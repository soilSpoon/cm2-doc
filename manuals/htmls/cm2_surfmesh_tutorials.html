<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .page {
            page-break-after: always;
            margin-bottom: 50px;
            padding: 20px;
            border: 1px solid #ddd;
        }
        .page-header {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #333;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
        }
        table td, table th {
            border: 1px solid #ddd;
            padding: 8px;
        }
        pre, code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 3px;
        }
        pre {
            padding: 10px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
<!-- Model: document-parse-250618 -->
<div class="page">
<div class="page-header">Page 1</div>
<h1 id='0' style='font-size:20px'>COMPUTING<br>OBJECTS</h1>
<h1 id='1' style='font-size:22px'>CM2 SurfMesh � T3/04<br>for OpenCascade �</h1>
<br><h1 id='2' style='font-size:16px'>Version 5.6</h1>
<p id='3' data-category='paragraph' style='font-size:18px'>tutorials</p>
<p id='4' data-category='paragraph' style='font-size:14px'>Revision February 2025.<br>https://www.computing-objects.com<br>Ⓒ Computing Objects SARL - 25 rue du Marechal Foch, 78000 Versailles, France.</p>
</div>
<div class="page">
<div class="page-header">Page 2</div>
<h1 id='5' style='font-size:20px'>Forewords</h1>
<p id='6' data-category='paragraph' style='font-size:18px'>This manual describes the 3-D parametric surface mesh generators for OpenCascade� Technology (OCCT)<br>CM2 SurfMeshⓇ T3 and CM2 SurfMesh� Q4.</p>
<p id='7' data-category='paragraph' style='font-size:16px'>CM2 SurfMesh T3 and CM2 SurfMesh Q4 generate surface meshes directly onto the CAD surfaces defined in a<br>STEP/IGES/BRep file or by a TopoDS_Shape object (OpenCascade� object).</p>
<p id='8' data-category='paragraph' style='font-size:16px'>Main features of these parametric surface mesh generators:</p>
<p id='9' data-category='list' style='font-size:16px'>· User mesh sizes on vertices, curves and surfaces (or a global default).<br>· Automatically adjusted mesh sizes according to the curvatures, respecting a given maximal chordal error.<br>· Isotropic meshes (triangles tend to be equilateral, quadrangles tend to be squares) or anisotropic meshes<br>(triangles and quadrangles can be shrunken in principal curvature directions).<br>· Support of periodic surfaces (surfaces with non-bijective mapping like some torus, cones, spheres,<br>cylinders...)<br>· Automatic repairing of some pathologies (merging of vertices and merging of curves if within a given<br>tolerance from each other).<br>· Quadratic elements (T6, Q8 and Q9) can be generated, with possibly all of their nodes exactly onto the CAD<br>curves/surfaces (curved elements).</p>
<p id='10' data-category='paragraph' style='font-size:16px'>Like many other meshers of the library, CM2 SurfMesh T3/Q4 are multi-threaded (you can select in the settings<br>the maximum number of threads the generator can use).<br>The generated meshes are reproducible (same mesh with same input data and same mesh with any number of<br>threads).</p>
<p id='11' data-category='paragraph' style='font-size:14px'>CM2 SurfMesh T3 requires CM2 TriaMesh Aniso and the OpenCascade� libs.<br>CM2 SurfMesh Q4 requires CM2 TriaMesh Aniso + CM2 QuadMesh Aniso and the OpenCascade� libs.<br>Experienced users with a source code license of CM2 SurfMesh T3/Q4 can port to a different CAD kernel<br>(Spatial� Rhino� Hoops�...)</p>
<p id='12' data-category='paragraph' style='font-size:14px'>Data are exchanged through vector and matrix objects. Beginners with the CM2 MeshToolsⓇ SDK should start<br>by reading the manual CM2 Math1 - overview to get first views on these mathematical containers.</p>
<p id='13' data-category='paragraph' style='font-size:16px'>For a complete description of the data and settings classes used with these meshers please refer to the CM2<br>SurfMesh T3/Q4 - reference manual.</p>
<p id='14' data-category='paragraph' style='font-size:16px'>CM2 SurfMesh T3/Q4 shouldn't be confused with CM2 SurfRemesh T3/Q4Ⓡ which address the problem of<br>regenerating a mesh on a 3-D surface defined by an already existing mesh (such as a tessellation).</p>
<p id='15' data-category='paragraph' style='font-size:14px'>CM2 SurfMesh T3/Q4 can be complemented with the solid mesh generators CM2 TetraMeshⓇ Iso,<br>CM2 TetraMeshⓇ Aniso or CM2 HexaMeshⓇ Iso.</p>
<p id='16' data-category='paragraph' style='font-size:18px'>The source code of the CM2 MeshToolsⓇ SDK (full library) has been registered with the APP under Inter Deposit<br>number IDDN.FR.001.260002.00.R.P.1998.000.20700 (22/06/1 998) and IDDN.<br>FR.001.250030.00.S.P.1999.000.20700 (1 6/06/1999) is regularly deposited since then.</p>
<p id='17' data-category='paragraph' style='font-size:16px'>The source code specific to CM2 SurfMeshⓇ T3 and CM2 SurfMeshⓇ Q4 together with their manual have been<br>registered with the APP under Inter Deposit number FR.001 .480009.000.S.P.2019.000.20700 (20/1 1/201 9) and<br>is regularly deposited since then.</p>
<table id='18' style='font-size:14px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4 tutorials</td><td>2</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 3</div>
<h1 id='19' style='font-size:20px'>Table of contents</h1>
<p id='20' data-category='index' style='font-size:14px'>Forewords ····· 2<br>1. Getting started. Meshing with CM2 SurfMesh T3 and default settings ......... ..... 5<br>Some declarations. 6<br>Authorization of the library .................··················· 6<br>Settings.... ·············· 6<br>Running the mesh generator on the CAD model ············· ············· 7<br>Output information ········ 7<br>2. Chordal control ··············· ········· 9<br>chordal_control_type ············.............. ·········· 9<br>max_chordal_error ····· ············ 12<br>3. Lower bound on chordal control (min_h)............. ············· 13<br>4. Meshing with quads (CM2 SurfMesh Q4) ............... ············· 15<br>5. Healing pathologies (fix_tolerance)................... ............ 18<br>6. Specific mesh sizes ......... .......... 26<br>7. Quadratic elements................. ············· 29<br>high_order_type ··················· ............... 29<br>high_order_mode ............................ ···························· 29<br>Mesh gallery .............. ············ 31</p>
<table id='21' style='font-size:16px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4-tutorials</td><td>3</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 4</div>
<p id='22' data-category='paragraph' style='font-size:20px'>This manual shows examples of meshing of some CAD models illustrating along the way some of the major<br>options of the meshers.</p>
<p id='23' data-category='paragraph' style='font-size:20px'>Each example starts with including the file stdafx.h (usually a pre-compiled header) giving access to the<br>required classes and the functions of the CM2 library (API).</p>
<p id='24' data-category='paragraph' style='font-size:18px'>The general namespace cm2 has nested namespaces such as cm2 : : vecscal, cm2 : : vecvec,<br>cm2 : : meshtools or cm2 : : surfmesh_ t3. The user can add a using namespace cm2 directive in this<br>stdafx  h file. Keeping namespaces in the user's source code can however be useful to improve the legibility<br>and to avoid name conflicts. In the rest of this document we assume such a using namespace cm2 directive.</p>
<p id='25' data-category='paragraph' style='font-size:18px'>File stdafx. h:</p>
<p id='26' data-category='paragraph' style='font-size:14px'>11 CM2 MESHTOOLS<br>#include " meshtools. h"<br>#include " meshtools2d.h"<br>#include " surfmesh_t3.h"<br>#include "surfmesh_q4.h"</p>
<br><p id='27' data-category='list' style='font-size:14px'>MEDIT mesh visualisation routines (optional) ·<br>Some 2d mesh management routines (optional) ·<br>CM2 SurfMesh T3.<br>CM2 SurfMesh Q4.</p>
<p id='28' data-category='paragraph' style='font-size:16px'>using namespace cm2 ·</p>
<br><p id='29' data-category='paragraph' style='font-size:14px'>/ Main cm2 namespace can now be omi tted.</p>
<p id='30' data-category='paragraph' style='font-size:22px'>Required libraries1:</p>
<p id='31' data-category='list' style='font-size:14px'>· cm2math1<br>· cm2misc<br>· cm2meshtools (optional)<br>· cm2meshtools2d (optional)<br>· cm2surfmesh_t3<br>· cm2surfmesh_q4</p>
<p id='32' data-category='paragraph' style='font-size:14px'>1 The lib names end with ($platform)  ($ver). For instance cm2sur fmesh_ t3_x64_56. dll.<br>On Windows, file extensions for the libraries are - lib and . dll. On Linux/Unix/macOS platforms, file extensions are usually .a (static<br>archive), .SO or .dylib (dynamic lib).</p>
<table id='33' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5. .6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>4</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 5</div>
<h1 id='34' style='font-size:22px'>1. Getting started. Meshing with CM2 SurfMesh T3 and<br>default settings</h1>
<p id='35' data-category='paragraph' style='font-size:20px'>The first example is a simple mechanical part (link rod).</p>
<figure id='36' data-category='chart'><img data-coord="top-left:(301,289); bottom-right:(959,772)" /><figcaption><p>Chart Type: pie</p></figcaption><table><thead><tr><td></td><td>Blue</td><td>Green</td><td>Orange</td><td>Purple</td></tr></thead><tbody><tr><td>item_01</td><td>50%</td><td>25%</td><td>15%</td><td>10%</td></tr></tbody></table></figure>
<p id='37' data-category='paragraph' style='font-size:18px'>The code to mesh this part with CM2 SurfMesh T3 is given below (we are intersected in this manual only in the<br>meshing of the surfaces, not the volumes):</p>
<p id='38' data-category='paragraph' style='font-size:16px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='39' data-category='paragraph' style='font-size:16px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsi gned, const char* msg) { std : : cout << msg; }</p>
<p id='40' data-category='paragraph' style='font-size:16px'>int main()</p>
<br><p id='41' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='42' data-category='paragraph' style='font-size:16px'>surfmesh_t3 : : mesher the_mesher;<br>surfmesh_t3: : mesher: :data_type data;</p>
<p id='43' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_t3: :registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='44' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher . settings. target_h = 0.2;<br>the_mesher · run("link_rod.step" , data) ;</p>
<p id='45' data-category='paragraph' style='font-size:14px'>11 SOME OUTPUT INFO (OPTIONAL) ·<br>data.print_info(&display_hdl) ;</p>
<p id='46' data-category='paragraph' style='font-size:14px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools : : medit_output("out.mesh" , data. pos, data . connectM, CM2_FACET3, data. colors) ;</p>
<br><p id='47' data-category='paragraph' style='font-size:16px'>return 0;<br>} 11 main</p>
<p id='48' data-category='paragraph' style='font-size:18px'>Figure 2 shows the generated mesh. The mesh is an all-triangle mesh (CM2 SurfMesh T3 generates only<br>triangles). See Section 4 below for all-quad and quad-dominant meshes.</p>
<table id='49' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5. .6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>5</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 6</div>
<figure id='50'><img style='font-size:16px' alt="Figure 2 - Link rod. 5 706 triangles.
target_h = 0.2 (other settings to default)." data-coord="top-left:(293,112); bottom-right:(949,597)" /></figure>
<p id='51' data-category='paragraph' style='font-size:18px'>Let us explain this program line by line.</p>
<h1 id='52' style='font-size:20px'>Some declarations</h1>
<p id='53' data-category='paragraph' style='font-size:18px'>the_ mesher is an instance of cm2 : : surfmesh_t3 : : mesher.<br>data (type cm2 : : surfmesh_ t3 : : mesher : : data_ type) is a key structure for the mesher. Upon exit, it<br>stores among others the matrix pos of the nodes coordinates and the matrix connectM of the connectivity of<br>the elements.<br>data . pos is a DoubleMat (variable-sized matrix of doubles)2. data connectM is a UIntMat (variable-sized<br>matrix of natural integers). connectM (i, j) is the ith local node of the jth element. This integer value is the<br>column number in matrix pos where the coordinates of this node can be found3.</p>
<h1 id='54' style='font-size:20px'>Authorization of the library</h1>
<p id='55' data-category='paragraph' style='font-size:18px'>The library needs to be unlocked through a call to cm2 : : surfmesh_ t3 : : registration. Two strings must<br>be provided for each library: the name of your company or organization that has acquired the license and a<br>secret code4. Note that both strings are case sensitive and the registration call must be made each time the<br>library is loaded into memory and before the first run of the mesher.</p>
<p id='56' data-category='paragraph' style='font-size:14px'>surfmesh_t3 : : registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='57' data-category='paragraph' style='font-size:22px'>Settings</p>
<p id='58' data-category='paragraph' style='font-size:18px'>The settings here are very simple and consist only in a single global mesh size (same unit as the model):</p>
<p id='59' data-category='paragraph' style='font-size:14px'>the_mesher . settings . target_h = 0.2;</p>
<p id='60' data-category='list' style='font-size:14px'>2 See manual CM2 Math1 - overview.<br>3 Recall that array indices are zero based (from 0 to N-1).<br>4 Contact license@computing-objects.com for any licensing inquiry.</p>
<table id='61' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials 6</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 7</div>
<p id='62' data-category='paragraph' style='font-size:20px'>Running the mesh generator on the CAD model</p>
<p id='63' data-category='paragraph' style='font-size:18px'>Here, a file name is provided to the cm2 : : surfmesh_t3 : : mesher : : run member together with a data<br>structure (cm2 : : surfmesh_t3 : : mesher : : data_type) that will hold the resulting mesh (and some other<br>auxiliary data):</p>
<p id='64' data-category='paragraph' style='font-size:14px'>the_mesher run ("link_rod . step" , data) ;</p>
<p id='65' data-category='paragraph' style='font-size:18px'>The file can be a STEP file (with extension ".STEP", ".STP", .step" or ".stp"), a IGES file (with extension " .IGES",<br>".IGS", '.iges" or ".igs") or a B-Rep file (with extension " BREP" or .brep").</p>
<p id='66' data-category='paragraph' style='font-size:18px'>The mesher accepts also raw OCCT objects (as TopoDs_Shape* cast to a void* pointer):</p>
<p id='67' data-category='paragraph' style='font-size:16px'>STEPControl_ Reader reader;<br>TopoDS_Shape root;</p>
<p id='68' data-category='paragraph' style='font-size:16px'>if (reader ReadFile("link_rod. step") == IFSelect_RetDone)</p>
<br><p id='69' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='70' data-category='paragraph' style='font-size:14px'>reader * TransferRoots () ;<br>root = reader.0neShape () ;</p>
<br><p id='71' data-category='paragraph' style='font-size:16px'>}</p>
<br><p id='72' data-category='paragraph' style='font-size:14px'>the_mesher · run(static_cast<void*> (&root) , data) ;</p>
<h1 id='73' style='font-size:22px'>Output information</h1>
<p id='74' data-category='paragraph' style='font-size:18px'>Printed information about the generated mesh and a MEDITS output file are obtained with:</p>
<p id='75' data-category='paragraph' style='font-size:14px'>data.print_ info (&display_hdl) ;<br>meshtools : : medit_output("out.mesh" , data.pos, data . connectM, CM2_FACET3, data.colors) ;</p>
<p id='76' data-category='paragraph' style='font-size:20px'>Figure 3 shows the output of data . print_ info (&display_hdl) :</p>
<p id='77' data-category='paragraph' style='font-size:18px'>The times spent in the several steps of the meshing process are given in seconds6. The first step is the meshing<br>of the curves. The second step is the meshing of the surfaces (multi-threaded).<br>The read time dominates here the total meshing time. It can be eliminated (or moved) if we use the direct run<br>on a TopoDS_Shape*.</p>
<p id='78' data-category='paragraph' style='font-size:16px'>5 MEDIT is a free visualization program. Other available output formats: Ensight, FEMAP, Nastran, STL (ASCII or binary), VTK, Wavefront OBJ.</p>
<br><p id='79' data-category='list' style='font-size:16px'>6 All runs were done with x64 CM2 libs (VS 2010 MD build) on Windows� 8.1 with Intel� XeonⓇ E3-1270 V2 3.5 Ghz (8 threads, turbo boost<br>disabled).</p>
<table id='80' style='font-size:16px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4 - tutorials</td><td>7</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 8</div>
<figure id='81'><img style='font-size:14px' alt="* ** *
* Sur T3 (R) ( in *
* **** * 55 ******* **
Nodes : 2851
Triang les : 5706
Vertices : 74 (merged: 0)
Curves : 108 (merged: 0)
Surfaces : 37
Area : 3. 206425E+001
Qmin : 2.224215E-001
Read time : 0.81 s.
Curvs mesh time : 0.04 s.
Surfs mesh time : 0.10 s.
Total mesh time : 0.14 s. (39351. 73 t/s.)
* * * * * * ****** HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 5706
Number of smaller' values : ⊙
Number of
va lues : ⊙
V max : 9.979977E-001
V mean : 6.692706E-001
✓ min : 2.224215E-001
Bin number -- Bin boundaries - Hits
10 0.90 1.00 855
9 0.80 0.90 907
8 0.70 0.80 840
7 0.60 0.70 823
6 0.50 0.60 876
5 0.40 0.50 938
4 0.30 0.40 435
3 0.20 0.30 32
2 0.10 0.20 ⊙
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(109,119); bottom-right:(1142,727)" /></figure>
<p id='82' data-category='paragraph' style='font-size:16px'>Figure 3 - Link rod. Output info (triangles).<br>target_h = 0.2 (other settings to default).</p>
<p id='83' data-category='paragraph' style='font-size:20px'>You can notice that despite a global unique mesh size (target_h = 0.2), the elements do not have all the same<br>size. Moreover, some are shrunken in some directions. This is because of the default settings (illustrated in<br>subsequent sections) regarding the chordal error control. It defaults to the anisotropic chordal control (allowing<br>shrinking along high curvature principal directions) and to a maximum chordal error of 2% of the local<br>curvature radii.</p>
<table id='84' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5. .6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>8</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 9</div>
<h1 id='85' style='font-size:20px'>2. Chordal control</h1>
<p id='86' data-category='paragraph' style='font-size:18px'>The maximal chordal error (i.e. maximal distance between the flat elements and the exact CAD curves/surfaces)<br>is controlled by two parameters: settings_type : : chordal_control_type and<br>settings_type : : max_chordal_error.</p>
<h1 id='87' style='font-size:22px'>chordal_control_type</h1>
<p id='88' data-category='paragraph' style='font-size:20px'>Chordal control is disabled when chordal_control_type = 0. The elements have uniform size (as much as<br>possible) specified by settings_type : : target_h. The number of elements is minimal but the more curved<br>the surfaces (and the larger target_h), the larger the chordal error.</p>
<p id='89' data-category='paragraph' style='font-size:16px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='90' data-category='paragraph' style='font-size:16px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsigned, const char* msg) { std : : cout << msg; }</p>
<br><p id='91' data-category='paragraph' style='font-size:16px'>int main()</p>
<br><p id='92' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='93' data-category='paragraph' style='font-size:14px'>surfmesh_t3 : : mesher the_mesher;<br>surfmesh_t3 : : mesher: :data_type data;</p>
<p id='94' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_t3: : registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='95' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher . settings. target_h = 0.2;<br>the_mesher · settings.chordal_control_type = 0; 11 Disable chordal error control.<br>the_mesher . run("link_rod.step" , data) ;</p>
<p id='96' data-category='paragraph' style='font-size:14px'>11 SOME OUTPUT INFO (OPTIONAL) ·<br>data.print_info(&display_hdl) ;</p>
<p id='97' data-category='paragraph' style='font-size:14px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools : : mecit_output("out.mesh" , data.pos, data . connectM, CM2_FACET3) ;</p>
<br><p id='98' data-category='paragraph' style='font-size:16px'>return 0;<br>} 11 main</p>
<figure id='99'><img style='font-size:14px' alt="Figure 4 - Link rod. 1 934 triangles
target_h = 0.2, chordal control disabled (chordal_control_type = 0)." data-coord="top-left:(296,1013); bottom-right:(939,1495)" /></figure>
<p id='100' data-category='paragraph' style='font-size:20px'>Notice that, due to the dimensions of the surfaces, some elements may still have size smaller than target_h</p>
<table id='101' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>9</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 10</div>
<p id='102' data-category='paragraph' style='font-size:22px'>(elements are generated surface by surface and cannot span over or be optimized across the boundary curves<br>of the surfaces).</p>
<figure id='103'><img style='font-size:14px' alt="* **
* *
* * * * ** *
Nodes : 965
Triangles : 1934
Vertices : 74 (merged: ⊙)
Curves : 108 (merged: ⊙)
Surfaces : 37
Area : 3. 146739E+001
Qmin : 1. 988903E-001
Read time : 0.81 s.
Curvs mesh time : 0.02 s.
Surfs mesh time : 0.08 S.
Total mesh time : 0.10 s. (18596.14 t/s.)
* **** ******* HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 1934
Number of larger values : ⊙
Number of sma ller values : ⊙
V max : 9. 995265E-001
✓ mean : 8.882759E-001
✓ min : 1.988903E-001
Bin number -- Bin boundaries -- Hits
10 0.90 1.00 1187
9 0.80 0.90 440
8 0.70 0.80 155
7 0.60 0.70 64
6 0.50 0.60 19
5 0.40 0.50 29
4 0.30 0.40 19
3 0.20 0.30 20
2 0.10 0.20 1
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(105,221); bottom-right:(1143,839)" /></figure>
<p id='104' data-category='paragraph' style='font-size:18px'>Figure 5 - Link rod. Output info (triangles).<br>target_h = 0.2, chordal control disabled (chordal_control_type = 0).</p>
<p id='105' data-category='paragraph' style='font-size:22px'>Chordal control is isotropic when chordal_control_type = 3 or 1 (see Reference Manual). The elements<br>have size given by settings_type : : target_h or size computed by the chordal formula (below) whatever<br>the lowest. The number of elements can be much larger than with no chordal control but the maximum<br>chordal error is kept anywhere below settings_ type : : max_ chordal_error (2% of local smallest radius by<br>default).</p>
<p id='106' data-category='equation'>$$h=2\,R\,\sqrt{\varepsilon(2-\varepsilon)}\,\approx2\sqrt{2}\,\,R\,\sqrt{\varepsilon}$$</p>
<caption id='107' style='font-size:16px'>Formula 1 - Mesh size h for a given curvature radius R and a chordal error 3.</caption>
<table id='108' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>10</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 11</div>
<figure id='109'><img style='font-size:16px' alt="Figure 6 - Link rod. 11 272 triangles.
target_h = 0.2, isotropic chordal control (chordal_control_type = 3)" data-coord="top-left:(300,116); bottom-right:(941,601)" /></figure>
<figure id='110'><img style='font-size:14px' alt="* * * *
* (R) *
* *** * ****** **
Nodes : 5634
Triang les : 11272
Vertices : 74 (merged: 0)
Curves : 108 (merged: 0)
Surfaces : 37
Area : 3. 206579E+001
Qmin : 4. 266428E-001
Read time : 0.81 s.
Curvs mesh time : 0.03 s.
Surfs mesh time : 0.19 s.
Total mesh time : 0.22 s. (50774.75 t/s.)
* *********** HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 11272
Number of smatter values : ⊙
Number of
va lues : ⊙
V max : 9. 996927E-001
✓ mean : 8.847562E-001
✓ min : 4.266428E-001
Bin number -- Bin boundaries - - Hits
10 0.90 1.00 5838
9 0.80 0.90 3652
8 0.70 0.80 1586
7 0.60 0.70 184
6 0.50 0.60 10
5 0.40 0.50 2
4 0.30 0.40 ⊙
3 0.20 0.30 ⊙
2 0.10 0.20 ⊙
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(112,689); bottom-right:(1145,1301)" /></figure>
<p id='111' data-category='paragraph' style='font-size:16px'>Figure 7 - Link rod. Output info (triangles).<br>target_h = 0.2, isotropic chordal control (chordal_control_type = 3).</p>
<p id='112' data-category='paragraph' style='font-size:20px'>Chordal control is anisotropic when chordal_control_type = 4 (the default), or 2 (see reference manual).<br>The elements have size given by settings_type : : target_h or anisotropic sizes computed by the chordal<br>formula (Formula 1) in each principal curvature direction, whatever the lowest.<br>Since the sizes are reduced only in the directions of curvature, the number of elements can be much lower<br>than with isotropic chordal control (but still higher than with no chordal control at all) with a similar maximum<br>chordal error (5 706 triangles, Figure 2).</p>
<table id='113' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>11</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 12</div>
<h1 id='114' style='font-size:22px'>max_chordal_error</h1>
<p id='115' data-category='paragraph' style='font-size:18px'>The maximum chordal error 8 is governed by settings_type : :max_chordal_error. The mesh size is<br>reduced locally to limit the chordal error between the mesh and the curves or the surfaces:</p>
<p id='116' data-category='list' style='font-size:16px'>· If negative, this value (- 8) is relative to the local radii R (max chordal error 8 = - 8 R).<br>· If positive, this value is absolute (8 = 8).</p>
<p id='117' data-category='paragraph' style='font-size:18px'>Formula 1 shows that the mesh size depends linearly on the local curvature radius R and as the square root of<br>the relative chordal error 3. This gives for instance:</p>
<p id='118' data-category='list' style='font-size:18px'>· with max_ chordal_error = -0.05 (& = 5%), a complete circle is meshed with approximately 10 elements.<br>· with max_chordal_error = -0.03 (& = 3%), a complete circle is meshed with approximately 13 elements.<br>· with max_chordal_error = -0.02 (&= 2%), a complete circle is meshed with approximately 16 elements.<br>· with max_chordal_error = -0.01 (&= 1%), a complete circle is meshed with approximately 22 elements.</p>
<figure id='119'><img style='font-size:14px' alt="Figure 8 - Link rod. 8 402 triangles.
target_h = 0.2, max_ chordal_error = -0.01 (1 % of radius)," data-coord="top-left:(293,558); bottom-right:(945,1051)" /></figure>
<br><p id='120' data-category='paragraph' style='font-size:16px'>default anisotropic chordal control.</p>
<p id='121' data-category='paragraph' style='font-size:20px'>The triangles are more shrunken along the curved regions but remain mostly governed by the target_h mesh<br>size (unchanged at 0.2) on flat/shallow surfaces.</p>
<table id='122' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>12</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 13</div>
<h1 id='123' style='font-size:22px'>3. Lower bound on chordal control (min_h)</h1>
<p id='124' data-category='paragraph' style='font-size:20px'>The security lower bound for the size of the elements.</p>
<p id='125' data-category='paragraph' style='font-size:20px'>It is well known that CAD models are prone to local geometric errors almost invisible for the human eye.<br>These errors can be small gaps between surfaces, small overlaps or tiny highly-curved fillers connecting<br>surfaces or curves. This can translate in very high localized curvatures and, through Formula 1, to very small<br>elements.<br>Even in cases of very good CAD models, users may want to avoid element smaller than a given value (relaxing<br>somewhat the chordal error).<br>This is done with the settings_type : : min_h parameter.</p>
<p id='126' data-category='paragraph' style='font-size:20px'>The mesh sizes will not be reduced (by max_ chordal_error) beyond this limit h<br>min</p>
<p id='127' data-category='list' style='font-size:18px'>· If negative, this value is relative to target_h (h = - min_h * target_h).<br>min<br>· If positive, this value is absolute (h = min_h).<br>min</p>
<p id='128' data-category='paragraph' style='font-size:20px'>On the link rod model above with 1% anisotropic chordal control we reduce the number of elements from<br>8402 to 8110 if we set min_h = -0.1 (instead of the default -0.001).</p>
<p id='129' data-category='paragraph' style='font-size:16px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='130' data-category='paragraph' style='font-size:16px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsi gned, const char* msg) { std : : cout << msg; }</p>
<p id='131' data-category='paragraph' style='font-size:16px'>int main()</p>
<br><p id='132' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='133' data-category='paragraph' style='font-size:16px'>surfmesh_t3 : : mesher the_mesher;<br>surfmesh_t3 : : mesher: :data_type data;</p>
<p id='134' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_t3: : registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='135' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher · settings . target_h = 0.2;<br>the_mesher · settings.max_chordal_error = -0. 01;<br>the_mesher · settings.min_h = -0. 1;<br>the_mesher run("link_rod.step" , data) ;</p>
<br><p id='136' data-category='paragraph' style='font-size:16px'>11 SOME OUTPUT INFO (OPTIONAL)<br>data.print_info(&display_hdl) ;</p>
<br><p id='137' data-category='paragraph' style='font-size:14px'>·</p>
<p id='138' data-category='paragraph' style='font-size:16px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools : : medit_output("out.mesh" , data . pos, data . connectM, CM2_FACET3) ;</p>
<br><p id='139' data-category='paragraph' style='font-size:16px'>return 0;<br>} 11 main</p>
<table id='140' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5. .6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>13</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 14</div>
<figure id='141'><img style='font-size:14px' alt="Figure9 - Link rod. 8 110 triangles
target_h = 0.2, max_chordal_error = -0.01 (1 % of radius), min_h = -0.1," data-coord="top-left:(297,119); bottom-right:(936,600)" /></figure>
<br><p id='142' data-category='paragraph' style='font-size:16px'>default anisotropic chordal control.</p>
<figure id='143'><img alt="" data-coord="top-left:(223,715); bottom-right:(587,1009)" /></figure>
<br><figure id='144'><img alt="" data-coord="top-left:(657,706); bottom-right:(1015,1008)" /></figure>
<p id='145' data-category='paragraph' style='font-size:14px'>Figure 10 - Link rod. Detail.<br>min_h = -0.001 (default, left), min_h = -0.1 (right).</p>
<table id='146' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4 - tutorials</td><td>14</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 15</div>
<h1 id='147' style='font-size:22px'>4. Meshing with quads (CM2 SurfMesh Q4)</h1>
<p id='148' data-category='paragraph' style='font-size:20px'>To mesh with quads, it's just as easy as to replace the namespace surfmesh_ t3 with surfmesh_q4. All the<br>settings seen SO far (target_h, chordal_control_type, max_chordal_error, min_h) are also available<br>in CM2 SurfMesh Q4.</p>
<p id='149' data-category='paragraph' style='font-size:16px'>#include "stdafx.h"<br>#include <iostream></p>
<br><p id='150' data-category='paragraph' style='font-size:16px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsigned, const char* msg) { std: :cout くく msg; }</p>
<p id='151' data-category='paragraph' style='font-size:16px'>int main()</p>
<br><p id='152' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='153' data-category='paragraph' style='font-size:18px'>surfmesh_q4: :mesher the_mesher;<br>surfmesh_q4: :mesher::data_type data;</p>
<p id='154' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_q4: : registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='155' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher.settings. target_h = 0.2;<br>the_mesher .settings.max_chordal_error = -0.01;<br>the_mesher .settings.min_h = -0. 1;<br>the_mesher . run("link_rod.step", data) ;</p>
<p id='156' data-category='paragraph' style='font-size:14px'>11 SOME OUTPUT INFO (OPTIONAL) .<br>data.print_info(&display_hdl) ;</p>
<p id='157' data-category='paragraph' style='font-size:16px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools : :medit_output("out.mesh" , data. pos, data.connectM, CM2_FACE_MIX) ;</p>
<br><p id='158' data-category='paragraph' style='font-size:16px'>return 0;<br>} 11 main</p>
<figure id='159'><img alt="" data-coord="top-left:(305,878); bottom-right:(937,1317)" /></figure>
<p id='160' data-category='paragraph' style='font-size:14px'>Figure 11 - Link rod. Quad-dominant mesh. 802 quads, 100 triangles.<br>target_h = 0.2, max_chordal_error = -0.01 (1% of radius), min_h = -0.1,<br>default anisotropic chordal control.</p>
<table id='161' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>15</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 16</div>
<figure id='162'><img style='font-size:14px' alt="* *** * ****
* (R) ( 5 日) *
******** ****************** * *****
Nodes 3850
Elements 3902
Quadrangles : 3802 (97.44 %, 99.23 %)
Triangles : 100 (2.56 %, 0.77 %)
Vertices : 74 (merged: ⊙)
Curves : 108 (merged: 日)
Surfaces : 37
Area : 3. 207294E+001
Qmin : 1. 749600E-001
Read time : 0.81 s.
Curvs mesh time : 0.04 s.
Surfs mesh time : 0.15 S.
Total mesh time : 0.20 s. (19908.15 t/s.)
* *********** HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 3902
Number of smaller values : ⊙
Number of sma values : ⊙
✓ max : 9. 999616E-001
✓ mean : 6. 362755E-001
✓ min : 1. 749600E-001
Bin number -- Bin boundaries Hits
10 0.90 1.00 524
9 0.80 0.90 517
8 0.70 0.80 524
7 0.60 0.70 641
6 0.50 0.60 607
5 0.40 0.50 457
4 0.30 0.40 438
3 0.20 0.30 186
2 0.10 0.20 8
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(105,120); bottom-right:(1144,757)" /></figure>
<p id='163' data-category='paragraph' style='font-size:16px'>Figure 12 - Link rod. Output info (quad-dominant).<br>target_h = 0.2, max_chordal_error = -0.01 (1% of radius), min_h = -0.1,<br>default anisotropic chordal control.</p>
<p id='164' data-category='paragraph' style='font-size:22px'>By default, CM2 SurfMesh Q4 generates quad-dominant meshes. To get an all-quad mesh, one needs to set the<br>settings_type: :all_quad_flag = true (default =false).</p>
<p id='165' data-category='paragraph' style='font-size:18px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='166' data-category='paragraph' style='font-size:18px'>11 Simple optional tionalydiallay handler.<br>(void*, unsigned, const char* msg) { std : : cout << msg; }<br>static void</p>
<p id='167' data-category='paragraph' style='font-size:18px'>int main()</p>
<br><p id='168' data-category='paragraph' style='font-size:18px'>{</p>
<br><p id='169' data-category='paragraph' style='font-size:18px'>surfmesh_q4 : : mesher the_mesher;<br>surfmesh_q4 : : mesher: :data_type data;</p>
<p id='170' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_q4: : registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='171' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher · settings · target_h = 0. 2;<br>the_mesher · settings . max_chordal_error = -0 . 01;<br>the_mesher · settings.all_quad_flag = true;<br>the_mesher · settings. min_h = -0 1;<br>the_mesher · run("link_rod. step" , data) ;</p>
<p id='172' data-category='paragraph' style='font-size:16px'>11 SOME OUTPUT INFO (OPTIONAL) .<br>data.print_info(&display_hdl) ;</p>
<p id='173' data-category='paragraph' style='font-size:16px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools : : medit_output("out.mesh" , data.pos, data . connectM, CM2_FACEQ4) ;</p>
<br><p id='174' data-category='paragraph' style='font-size:18px'>return 0;<br>} 11 main</p>
<table id='175' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>16</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 17</div>
<figure id='176'><img alt="" data-coord="top-left:(305,111); bottom-right:(935,558)" /></figure>
<p id='177' data-category='paragraph' style='font-size:16px'>Figure 13 - Link rod. All-quad mesh. 4 092 quadrangles.<br>target_h = 0.2, max_ chordal_error = -0.01 (1% of radius), min_h = -0.1,<br>default anisotropic chordal control.</p>
<figure id='178'><img style='font-size:14px' alt="* ** * *
* (R) ( ⊙) *
* *** * 大 *** * * * * ***
Nodes : 4090
Elements : 4092
Quadrangles : 4092 (100.00 %, 100.00 %)
Triangles : ⊙ (0.00 %, 0.00 %)
Vertices : 74 (merged: 0)
Curves : 108 (merged: ⊙)
Surfaces : 37
Area : 3. 208350E+001
Qmin : 1. 230279E-001
Read time : 0.81 s.
Curvs mesh time : 0.04 s.
Surfs mesh time : 0.19 s.
Total mesh time : 0. 23 s. (17562.23 t/s.)
* *********** HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 4092
Number of smaller values : ⊙
Number of sma values : ⊙
V max : 9. 995153E-001
V mean : 6.078816E-001
✓ min : 1.230279E-001
Bin number -- Bin boundaries Hits
10 0.90 1.00 525
9 0.80 0.90 440
8 0.70 0.80 438
7 0.60 0.70 679
6 0.50 0.60 594
5 0.40 0.50 532
4 0.30 0.40 620
0.20 0.30 229
32 0.10 0.20 35
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(109,670); bottom-right:(1143,1303)" /></figure>
<p id='179' data-category='paragraph' style='font-size:16px'>Figure 14 - Link rod. Output info (all-quad).<br>target_h = 0.2, max  chordal_error = -0.01 (1% of radius), min_h = -0.1,<br>default anisotropic chordal control.</p>
<p id='180' data-category='paragraph' style='font-size:20px'>If possible, prefer the quad-dominant mode over the all-quad mode. The former gives usually meshes of better<br>quality. Moreover, all-quad mode can fail at present (version 5.6.0) on some non-bijective (aka. periodic)<br>surfaces, returning a mesh with a few triangles and a CM2_ FAILED_SURFACES_WARNING. This can usually be<br>fixed a posteriori with a local remeshing with the help of CM2 SurfRemesh Q4 (see CM2 SurfRemesh T3/Q4 -<br>tutorial and reference manual).</p>
<table id='181' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>17</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 18</div>
<h1 id='182' style='font-size:22px'>5. Healing pathologies (fix_tolerance)</h1>
<p id='183' data-category='paragraph' style='font-size:18px'>On top of (local) geometric pathologies (such as spurious high-curvatures which can be mitigated by the min_h<br>parameter), CAD models often exhibit topological errors such as gaps between surfaces. This is usually caused<br>by a boundary between two surfaces defined by two different curves (almost coincident) instead of sharing the<br>same curve. CM2 SurfMesh T3 and CM2 SurfMesh Q4 can repair this kind of error of modeling.</p>
<p id='184' data-category='paragraph' style='font-size:18px'>The following example has many discontinuities between surfaces:</p>
<figure id='185'><img style='font-size:14px' alt="Figure 15 - Bearing.
IGES file. 925 vertices, 9 041 curves, 213 surfaces." data-coord="top-left:(300,357); bottom-right:(957,842)" /></figure>
<p id='186' data-category='paragraph' style='font-size:18px'>We first proceed with repairing disabled to show the initial CAD errors (with the help of some meshtools code<br>to extract the boundaries of the mesh). Disabling the repairing merges is done by affecting the special value<br>DBL_MAX to fix_ tolerance (fix_ tolerance = 0 would merge the vertices and the curves that has exactly<br>the same positions).</p>
<p id='187' data-category='paragraph' style='font-size:18px'>The fix_tolerance parameter obeys the same rule as max_chordal_error and min_h:</p>
<p id='188' data-category='list' style='font-size:16px'>· If negative, this value is relative to target_h (merge tol = - fix_ tolerance * target_h).<br>· If positive, this value is absolute (merge tol = fix_tolerance).</p>
<p id='189' data-category='paragraph' style='font-size:18px'>Vertices are merged (vertices with highest ids into lowest ones) if their distance is below or equal to merge tol.<br>Curves are merged (curves with highest ids into lowest ones) if their (approximated) maximal distance is below<br>or equal to merge tol.</p>
<p id='190' data-category='paragraph' style='font-size:20px'>CM2 SurfMesh T3/Q4 cannot repair all pathologies:</p>
<p id='191' data-category='list' style='font-size:16px'>· At present (version 5.6), curves are merged only when any point of one is within the tolerance distance of<br>the second. This implies that two connected and successive small curves are not merged into a third larger<br>one, even if the group of the two curves is coincident with the large curve.<br>· At present (version 5.6), surfaces cannot be merged (only their contour curves can be merged).</p>
<table id='192' style='font-size:16px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5. .6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>18</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 19</div>
<p id='193' data-category='paragraph' style='font-size:18px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='194' data-category='paragraph' style='font-size:18px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsigned, const char* msg) { std: : cout << msg; }</p>
<p id='195' data-category='paragraph' style='font-size:18px'>int main()</p>
<br><p id='196' data-category='paragraph' style='font-size:18px'>{</p>
<br><table id='197' style='font-size:18px'><thead></thead><tbody><tr><td>surfmesh_ t3 : : mesher</td><td>the_mesher;</td></tr><tr><td>surfmesh_t3 : : mesher: :data_type</td><td>data;</td></tr><tr><td>UIntMat</td><td>connectV, connectB;</td></tr></tbody></table>
<p id='198' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_t3: : registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='199' data-category='paragraph' style='font-size:16px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher.settings.fix_tolerance = DBL_MAX; 11 Disable merging.<br>the_mesher · settings. target_h = 0. 003 ;<br>the_mesher . run("bearing.iges" , data) ;</p>
<p id='200' data-category='paragraph' style='font-size:14px'>.</p>
<br><p id='201' data-category='paragraph' style='font-size:18px'>11 SOME OUTPUT INFO (OPTIONAL)<br>data.print_ info(&display_hdl) ;</p>
<p id='202' data-category='paragraph' style='font-size:18px'>11 EXTRACT THE BOUNDARIES (TO SHOW GAPS) ·<br>meshtools : :get_neighbors(data. connectM, CM2_ FACET3, false, connectV) ;<br>meshtools : :get_mesh_boundaries (data.connectM, connectV, CM2_FACET3, connectB) ;<br>11 VISUALIZATION (OPTIONAL) .<br>meshtools : : medit_output("out. mesh" , data.pos, data. connectM, CM2_FACET3, data . colors) ;<br>meshtools : :medit_output("boundaries.mesh", data.pos, connectB, CM2_EDGE2) ;</p>
<br><p id='203' data-category='paragraph' style='font-size:18px'>return 0;<br>11 main</p>
<br><p id='204' data-category='paragraph' style='font-size:18px'>}</p>
<caption id='205' style='font-size:22px'>target_h is set to 0.003. The other parameters are left to their default (i.e. 2% anisotropic chordal control).</caption>
<figure id='206'><img alt="" data-coord="top-left:(300,840); bottom-right:(955,1269)" /></figure>
<p id='207' data-category='paragraph' style='font-size:18px'>Figure 16 - Bearing. Mesh with no repairing.. 6 909 triangles.<br>target_h = 0.03, default 2% anisotropic chordal control.</p>
<table id='208' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>19</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 20</div>
<figure id='209'><img style='font-size:14px' alt="* * * 大 * * *
* T3 (R) ( 5 ) *
* *** * * * ******** ****
Nodes : 5354
Triang les : 6909
Vertices : 925 (merged: ⊙)
Curves : 941 (merged: ⊙)
Surfaces : 213
Area : 1. 336568E-002
Qmin : 1. 125807E-001
Read time : 0.26 s.
Curvs mesh time : 0.16 s.
Surfs mesh time : 0.23 s.
Total mesh time : 0.40 s. (17272.51 t/s.)
* * * * * ******* HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 6909
Number of larger values : ⊙
ller va lues : ⊙
Number of
V max : 9.993214E-001
V mean : 6.647028E-001
✓ min : 1.125807E-001
Bin number -- Bin boundaries Hits
10 0.90 1.00 929
9 0.80 0.90 1304
8 0.70 0.80 1006
7 0.60 0.70 1015
6 0.50 0.60 884
5 0.40 0.50 947
4 0.30 0.40 668
3 0.20 0.30 141
2 0.10 0.20 15
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(108,118); bottom-right:(1143,732)" /></figure>
<p id='210' data-category='paragraph' style='font-size:16px'>Figure 17 - Bearing. Output info (triangles).<br>target_h = 0.003, default 2% anisotropic chordal control, no repairing.</p>
<p id='211' data-category='paragraph' style='font-size:20px'>The problems of connectivity between many surfaces appear clearly with a zoom:</p>
<figure id='212'><img alt="" data-coord="top-left:(321,913); bottom-right:(918,1441)" /></figure>
<br><caption id='213' style='font-size:14px'>Figure 18 - Bearing. Zoom.<br>Meshes between many surfaces are not connected.</caption>
<p id='214' data-category='paragraph' style='font-size:22px'>Figure 19 shows all the boundary edges (i.e. edges that are not shared by exactly two triangles).</p>
<table id='215' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>20</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 21</div>
<figure id='216'><img style='font-size:16px' alt="Figure 19 - Bearing.
Boundary edges (no repairing)." data-coord="top-left:(296,119); bottom-right:(953,615)" /></figure>
<p id='217' data-category='paragraph' style='font-size:20px'>With the default value fix_ tolerance = -1E-4 (giving here an absolute tolerance of 3E-7), almost all the gaps<br>are repaired. But not all.</p>
<figure id='218'><img style='font-size:14px' alt="!
Figure 20 - Bearing.
Boundary edges with default fix_tolerance =- 1E-4." data-coord="top-left:(294,744); bottom-right:(958,1243)" /></figure>
<p id='219' data-category='paragraph' style='font-size:22px'>With this model, with have to push fix_ tolerance to +5E-6 (absolute value) to merge all bad curves:</p>
<table id='220' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>21</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 22</div>
<figure id='221'><img style='font-size:16px' alt="Figure 21 - Bearing.
Boundary edges with fix_tolerance = + 5E-6." data-coord="top-left:(297,120); bottom-right:(954,623)" /></figure>
<figure id='222'><img style='font-size:14px' alt="* * *
* R *
* * * * * * **
Nodes 5357
Triang les : 9254
Vertices : 925 (merged: 662)
Curves : 941 (merged: 450)
Surfaces : 213
Area : 1. 336575E-002
Qmin 8.545688E-002
Read time : 0.26 s.
Curvs mesh time : 0.14 s.
Surfs mesh time : 0.26 s.
Total mesh time : 0.41 s. (22570.73 t/s.)
* * * 大 * ******* HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 9254
Number of larger values : ⊙
Number of sma ller values : ⊙
V max : 9. 993164E-001
✓ mean : 6.677958E-001
✓ min : 8.545688E-002
Bin number -- Bin boundaries Hits
10 0.90 1.00 1096
9 0.80 0.90 1519
8 0.70 0.80 1626
7 0.60 0.70 1600
6 0.50 0.60 1404
5 0.40 0.50 1231
4 0.30 0.40 644
3 0.20 0.30 119
2 0.10 0.20 14
1 0.01 0.10 1
⊙ 0.00 0.01 ⊙" data-coord="top-left:(113,708); bottom-right:(1143,1315)" /></figure>
<p id='223' data-category='paragraph' style='font-size:18px'>Figure 22 - Bearing. Output info (triangles).<br>target_h = 0.003, fix_tolerance= + 5E-6,<br>default 2% anisotropic chordal control.</p>
<p id='224' data-category='paragraph' style='font-size:22px'>662 vertices have been merged (out of 925). 450 curves have been merged (out of 941). The boundary edges<br>are now limited to the external boundary of the model. We have now a manifold global surface:</p>
<p id='225' data-category='paragraph' style='font-size:22px'>We can improve the mesh a bit further by raising the min_h parameter to -1E-1 (from default -1E-3) as in<br>Section 3:</p>
<table id='226' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5. 6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>22</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 23</div>
<p id='227' data-category='paragraph' style='font-size:16px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='228' data-category='paragraph' style='font-size:16px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsigned, const char* msg) { std: : cout << msg; }</p>
<p id='229' data-category='paragraph' style='font-size:18px'>int main()</p>
<br><p id='230' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='231' data-category='paragraph' style='font-size:18px'>surfmesh_t3 : : mesher the_mesher;<br>surfmesh_t3: :mesher: :data_type data;</p>
<p id='232' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_t3: :registration("Licensed to SMART Inc. " "F5BEA10ABCWX") ;<br>,</p>
<p id='233' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher.settings. fix_tolerance = 5E-6; 11 Absolute val.<br>the_mesher .settings.min_h = -0.1; / / Relative val.<br>the_mesher · settings. target_h = 0. 003;<br>the_mesher . run("bearing.iges" , data) ;</p>
<p id='234' data-category='paragraph' style='font-size:16px'>11 SOME OUTPUT INFO (OPTIONAL) .<br>data.print_info(&display_hdl) ;</p>
<p id='235' data-category='paragraph' style='font-size:16px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools: :medit_output("out.mesh" , data.pos, data.connectM, CM2_FACET3) ;</p>
<br><p id='236' data-category='paragraph' style='font-size:18px'>return 0;<br>} 11 main</p>
<figure id='237'><img alt="" data-coord="top-left:(300,736); bottom-right:(950,1197)" /></figure>
<br><p id='238' data-category='paragraph' style='font-size:14px'>Figure 23 - Bearing.<br>target_h = 0.003, fix_tolerance= + 5E-6, min_h = - 0.1,<br>default 2% anisotropic chordal control,</p>
<table id='239' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>23</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 24</div>
<figure id='240'><img style='font-size:14px' alt="* * * * * *
* (R) ( 5 ⊙ ) *
* *** * * ** ************ 大大 * * ***
Nodes : 5312
Triang les : 9164
Vertices : 925 (merged: 662)
Curves : 941 (merged: 450)
Surfaces : 213
Area : 1. 336565E-002
Qmin : 8.545688E-002
Read time : 0.26 s.
Curvs mesh time : 0.14 s.
Surfs mesh time : 0.27 s.
Total mesh time : 0.42 s. (22028.84 t/s.)
* * * * * ******* HISTOGRAM QS *************
Total number of bins : 11
Total number of counts : 9164
Number of smatie values : ⊙
ller va lues : ⊙
Number of
V max : 9.997505E-001
V mean : 6.664721E-001
✓ min : 8.545688E-002
Bin number -- Bin boundaries - Hi ts
10 0.90 1.00 1080
9 0.80 0.90 1466
8 0.70 0.80 1622
7 0.60 0.70 1597
6 0.50 0.60 1390
5 0.40 0.50 1237
4 0.30 0.40 647
3 0.20 0.30 110
2 0.10 0.20 14
1 0.01 0.10 1
⊙ 0.00 0.01 ⊙" data-coord="top-left:(108,117); bottom-right:(1142,727)" /></figure>
<p id='241' data-category='paragraph' style='font-size:16px'>Figure 24 - Bearing. Output info (triangles).<br>target_h = 0.003, fix_tolerance= + 5E-6, min_h = - 0.1,<br>default 2% anisotropic chordal control.</p>
<p id='242' data-category='paragraph' style='font-size:20px'>The number of triangles is reduced from 9254 to 9164.</p>
<p id='243' data-category='paragraph' style='font-size:20px'>CM2 SurfMesh Q4 in quad-dominant mode with same settings gives:</p>
<figure id='244'><img alt="" data-coord="top-left:(300,1030); bottom-right:(950,1466)" /></figure>
<p id='245' data-category='paragraph' style='font-size:16px'>Figure 25 - Bearing. 4 209 quads, 288 triangles.<br>target_h = 0.003, fix_tolerance= + 5E-6, min_h = - 0.1,<br>default 2% anisotropic chordal control.</p>
<table id='246' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>24</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 25</div>
<figure id='247'><img style='font-size:14px' alt="****
* *
* * *** * ** **** **** ******* **** 大大 **
Nodes 5083
Elements : 4497
Quadrangles : 4209 (93.60 %, 98.17 %)
Triangles 288 (6.40 %, 1.83 %)
Vertices 925 (merged: 662)
Curves : 941 (merged: 450)
Surfaces : 213
Area : 1. 336572E-002
Qmin : 1. 395770E-001
Read time : 0.24 s.
Curvs mesh time : 0.13 S.
Surfs mesh time : 0.32 S.
Total mesh time : 0.46 s. (9818. 78 t/s.)
* * *** ******* HISTOGRAM QS * ************
Total number of bins 11
Total number of counts : 4497
Number of larger values : ⊙
Number of sma ller values : ⊙
V max : 9. 999652E-001
✓ mean : 6.586261E-001
✓ min : 1.395770E-001
Bin number -- Bin boundaries - - Hits
10 0.90 1.00 571
9 0.80 0.90 542
8 0.70 0.80 744
7 0.60 0.70 874
6 0.50 0.60 828
5 0.40 0.50 548
4 0.30 0.40 265
3 0.20 0.30 112
2 0.10 0.20 13
1 0.01 0.10 ⊙
⊙ 0.00 0.01 ⊙" data-coord="top-left:(115,171); bottom-right:(826,778)" /></figure>
<p id='248' data-category='paragraph' style='font-size:16px'>Figure 26 - Bearing. Output info (quad-dominant).<br>target_h = 0.003, fix_tolerance=+ 5E-6, min_h = - 0.1,<br>default 2% anisotropic chordal control.</p>
<table id='249' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>25</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 26</div>
<h1 id='250' style='font-size:22px'>6. Specific mesh sizes</h1>
<p id='251' data-category='paragraph' style='font-size:20px'>settings_ type : : target_h is the global default mesh size. As seen before, CM2 SurfMesh T3/Q4 may<br>reduce automatically the sizes on curved lines and surfaces, either in all directions (isotropic) or in selected<br>directions (anisotropic) to honor the settings_type : : max_chordal_error criterion.</p>
<p id='252' data-category='paragraph' style='font-size:18px'>However, CM2 SurfMesh T3/Q4 allows more control over mesh sizes. Users can set local mesh sizes at specific<br>CAD vertices, curves or surfaces (see fields vertex_H, curve_H and surface_H of struct data_type).</p>
<p id='253' data-category='paragraph' style='font-size:20px'>To illustrate this, let's consider this simple model for which we want specific mesh sizes near vertex #66, along<br>curve #38 and on top and bottom surfaces (ids 2and 5):</p>
<figure id='254' data-category='chart'><img data-coord="top-left:(323,476); bottom-right:(934,1137)" /><figcaption><p>Chart Title: Surface #2</p><p>Chart Type: pie</p></figcaption><table><thead><tr><td></td><td>Surface</td><td>Vertex</td><td>Surface #5</td></tr></thead><tbody><tr><td>item_01</td><td>50%</td><td>66%</td><td>5%</td></tr></tbody></table></figure>
<br><p id='255' data-category='paragraph' style='font-size:14px'>IGES model (39 surfaces, 108 curves, 72 vertices).</p>
<p id='256' data-category='paragraph' style='font-size:20px'>The vertex, curve and surface ids must follow the CAD indexing-scheme.<br>With OCCT, we use the CAD indexing scheme given by TopTools_IndexedMapOfShape.<br>Example:</p>
<br><table id='257' style='font-size:16px'><thead></thead><tbody><tr><td>TopTools_IndexedMapOfShape vertices;</td><td></td></tr><tr><td>TopExp : : MapShapes (root, TopAbs_ VERTEX, vertices) unsigned i = vertices. FindIndex (some_vertex) ;</td><td>; 11 Index all vertices of root consecutively starting from 1. i is the index we use to refer 、 to some_ vertex ·</td></tr></tbody></table>
<p id='258' data-category='paragraph' style='font-size:20px'>As OCCT follows a 1-base indexing scheme, vertex_H[0], curve_H[0] and surface_H[0] are discarded.</p>
<p id='259' data-category='paragraph' style='font-size:18px'>The index of an edge or face is also its color.</p>
<table id='260' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>26</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 27</div>
<figure id='261'><img alt="" data-coord="top-left:(233,162); bottom-right:(565,632)" /></figure>
<br><figure id='262'><img alt="" data-coord="top-left:(675,157); bottom-right:(1006,627)" /></figure>
<p id='263' data-category='paragraph' style='font-size:14px'>Figure 28 - Body. Quad-dominant mesh.<br>target_h = 7.0 only (left),<br>+ finer mesh sizes on top and bottom surfaces, along a curve and near a vertex (right),<br>max_chordal_error = -0.10 (i.e. 10% of radius), default anisotropic chordal control.</p>
<p id='264' data-category='paragraph' style='font-size:20px'>If we mesh only with a global target_h (we choose here value = 7 .0) we get the mesh Figure 28 (left).</p>
<p id='265' data-category='paragraph' style='font-size:20px'>Note that CM2 SurfMesh T3/Q4 reduces by itself the global target mesh size (7.0) where curvatures are high in<br>order to respect the settings_ type : : max_ chordal_error criterion. Here we chose a maximum of 10% of<br>local radii and anisotropic control (the default control).</p>
<table id='266' style='font-size:16px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>27</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 28</div>
<p id='267' data-category='paragraph' style='font-size:20px'>To specify special mesh sizes on the top surface (id = 2) and on the bottom surface (id = 5), we resize the<br>surface_H array (empty by default) to at least 6 entries and populate the indices #2 and #5 with the specific<br>mesh sizes (here a mesh size of 1.0 for both). The others, left to 0.0 or out-of-bound of the array will default to<br>target_h = 7.0.</p>
<table id='268' style='font-size:16px'><thead></thead><tbody><tr><td>the_mesher.settings. target_h = 7.; 11 Default target size = 7 .</td></tr><tr><td>data . surface_H.resize(6, 0.) ; - Reserve space in the array to control the mesh sizes of the first five surfaces. data · surface_H[2] = 1. ; / Overwrite the default size for surface #1 · data · surface_H[5] = 1. ; / Overwrite the default size for surface #4 .</td></tr></tbody></table>
<p id='269' data-category='paragraph' style='font-size:18px'>We can do the same on curves and vertices:</p>
<table id='270' style='font-size:16px'><thead></thead><tbody><tr><td>data.curve_H.resize(39, 0.) ;  11</td><td>Reserve space in the array to control the mesh sizes of the first 38 curves.</td></tr><tr><td>data curve_H[38] = ⊙  50; 11</td><td>Overwrite the default size for curve #38.</td></tr><tr><td>data . vertex_H.resize(67, 0.) ; 11</td><td>Reserve space in the array to control the mesh sizes of the first 66 vertices.</td></tr><tr><td>data . vertex_H[66] = 0.25; ==</td><td>Overwrite the default size for vertex #66.</td></tr></tbody></table>
<p id='271' data-category='paragraph' style='font-size:22px'>The resulting mesh is shown Figure 28 (right).</p>
<p id='272' data-category='paragraph' style='font-size:20px'>Another strategy, followed in the code below, is to resize the arrays to the number of surfaces, curves and<br>vertices in the model and fill all of them with the same target size (here again 7.0), then overwrite the selected<br>entity ids with whatever specific mesh sizes.</p>
<p id='273' data-category='paragraph' style='font-size:18px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='274' data-category='paragraph' style='font-size:16px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsigned, const char* msg) { std : : cout << msg; }</p>
<p id='275' data-category='paragraph' style='font-size:18px'>int main()</p>
<br><p id='276' data-category='paragraph' style='font-size:16px'>{</p>
<br><p id='277' data-category='paragraph' style='font-size:18px'>surfmesh_q4 : : mesher the_mesher;<br>surfmesh_q4 : : mesher: :data_type data;</p>
<p id='278' data-category='paragraph' style='font-size:16px'>11 UNLOCK THE DLL.<br>surfmesh_q4 : : registration("Licensed to SMART Inc. " "F5BEA10ABCWX" ) ;<br>,</p>
<p id='279' data-category='paragraph' style='font-size:14px'>11 DEFINE SETTINGS, DATA AND RUN THE MESHER.<br>the_mesher . settings . max_chordal_error = -0 . 10 ;<br>the_mesher · settings · max_gradation = ⊙ . 2 ;<br>data · surface_H. resize(40, 7 .0) ;<br>data · curve_H. resize(109, 7 · 0) ;<br>data · vertex_H. resize(73, 7 · 0) ;<br>data · surface_ H[2] = data · surface_H[5] = 1.0;<br>data · curve_H[38] = 0. 50;<br>data · vertex_H[66] = 0.25;</p>
<br><p id='280' data-category='paragraph' style='font-size:14px'>/</p>
<br><p id='281' data-category='paragraph' style='font-size:16px'>Max distance of 10% of radii.<br>Low gradation for nicer rendering.</p>
<br><p id='282' data-category='paragraph' style='font-size:16px'>Size 7.0 on all surfaces.<br>Size 7.0 on all curves.<br>Size 7.0 on all vertices.<br>Change size to 1.0 for surfaces #2 and #5.<br>Change size to 0.5 for curve #38.<br>Change size to 0.25 for vertex #66.</p>
<p id='283' data-category='paragraph' style='font-size:16px'>the_mesher.run("body · iges" , data) ;</p>
<p id='284' data-category='paragraph' style='font-size:16px'>11 SOME OUTPUT INFO (OPTIONAL) ·<br>data.print_info(&display_hdl) ;</p>
<p id='285' data-category='paragraph' style='font-size:16px'>11 VISUALIZATION (OPTIONAL) .<br>meshtools : : medit_output("out. mesh" , data. pos, connectM_, CM2_FACE_MIX, data.colors) ;</p>
<br><p id='286' data-category='paragraph' style='font-size:18px'>return 0;<br>} 11 main</p>
<p id='287' data-category='paragraph' style='font-size:20px'>Setting value 7.0 by default to all curves and vertices isn't strictly necessary since the values affected to surfaces<br>are transferred to their children curves and recursively to their grand-children vertices, unless valid mesh sizes<br>are provided for them in curve_H or vertex_H.</p>
<p id='288' data-category='paragraph' style='font-size:20px'>This assumes that the ids of the CAD entities are known (using TopTools_IndexedMapOfShape indexing).</p>
<table id='289' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>28</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 29</div>
<h1 id='290' style='font-size:22px'>7. Quadratic elements</h1>
<p id='291' data-category='paragraph' style='font-size:18px'>Beyond the meshtools2d : : convert_ into_high_order function (and its simplified version<br>meshtools2d : : convert_ into_quadratic, see CM2 MeshTools HTML reference manual),<br>CM2 SurfMesh T3/Q4 have embedded facilities to generate directly quadratic elements (6-node triangles and<br>8-node or 9-node quadrangles).</p>
<p id='292' data-category='paragraph' style='font-size:18px'>With CM2 SurfMesh T3/Q4, high-order nodes can be exactly positioned onto the curves and surfaces, whereas<br>meshtools2d : : convert_ into_high_order (and friends) generate these nodes through linear<br>interpolation of the base nodes (though boundary edges can use specific curved high-order nodes).</p>
<p id='293' data-category='paragraph' style='font-size:18px'>The generation of quadratic elements is governed by two parameters: settings_type: :high_order_type<br>and settings_type : : high_order _mode.</p>
<h1 id='294' style='font-size:20px'>high_order_type</h1>
<p id='295' data-category='paragraph' style='font-size:18px'>Controls the type of generated elements. The value can be:</p>
<p id='296' data-category='list' style='font-size:16px'>· 0: Elements remain linear (3-node triangles and 4-node quadrangles). This is the default.<br>· 1: Elements are 6-node triangles and 8-node (so-called serendipity) quadrangles.<br>· 2+: Elements are 6-node triangles and 9-node (full) quadrangles.</p>
<h1 id='297' style='font-size:20px'>high_order_mode</h1>
<p id='298' data-category='paragraph' style='font-size:18px'>Controls the position of the high-order nodes (when high_order_ type > 0). The value can be:</p>
<p id='299' data-category='list' style='font-size:16px'>· 0: The high-order nodes are interpolated between the linear 3D nodes. Elements remain straight.<br>This is equivalent to a call to meshtools2d : : convert_ into_high_order.<br>· 1: The high-order nodes are on the curves/surfaces and have reference coordinates in the middle between<br>the linear nodes but may not be equidistant between the linear 3D nodes. Elements are curved.<br>2+: The high-order nodes are on the curves/surfaces and equidistant between the linear 3D nodes but may<br>not have reference values in the middle between the linear nodes. Elements are curved. This is the default.</p>
<p id='300' data-category='paragraph' style='font-size:16px'>The considered chordal error is always the maximum distance between the linear elements and the curves/<br>surfaces.</p>
<p id='301' data-category='paragraph' style='font-size:18px'>With linear elements of size h along a curve of local radius R, the chordal error is approximately given by<br>h2<br>8 =</p>
<br><p id='302' data-category='equation'>$$\delta={\frac{h^{2}}{8R}}$$</p>
<p id='303' data-category='paragraph' style='font-size:14px'>Formula 2 - Chordal error between linear element of size h and a circle of radius R.</p>
<p id='304' data-category='paragraph' style='font-size:16px'>The chordal error 8 is divided by 4 when the size h is divided by 2.</p>
<p id='305' data-category='paragraph' style='font-size:18px'>With quadratic elements, the maximum distance to the curve (abusively called also chordal error) is<br>approximately given by</p>
<br><p id='306' data-category='equation'>$$\delta={\frac{h^{4}}{512\,R^{3}}}$$</p>
<p id='307' data-category='paragraph' style='font-size:14px'>Formula 3 - Chordal error between quadratic element of size h and a circle of radius R.</p>
<p id='308' data-category='paragraph' style='font-size:16px'>The chordal error 8 is divided by 16 when the size h is divided by 2.<br>A linear relative chordal error of 40% translates into a quadratic relative chordal error of 2%.</p>
<table id='309' style='font-size:14px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4 - tutorials</td><td>29</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 30</div>
<p id='310' data-category='paragraph' style='font-size:18px'>#include "stdafx.h"<br>#include <iostream></p>
<p id='311' data-category='paragraph' style='font-size:18px'>11 Simple optional display handler.<br>static void display_hdl (void*, unsigned, const char* msg) { std: : cout << msg; }</p>
<p id='312' data-category='paragraph' style='font-size:18px'>int main()</p>
<br><p id='313' data-category='paragraph' style='font-size:18px'>{</p>
<br><p id='314' data-category='paragraph' style='font-size:20px'>surfmesh_q4 : :mesher the_mesher;<br>surfmesh_q4 : :mesher: :data_type data;</p>
<p id='315' data-category='paragraph' style='font-size:14px'>11 UNLOCK THE DLL.<br>surfmesh_q4: :registration("Licensed to SMART Inc · "F5BEA10ABCWX") ;<br>"<br>,</p>
<p id='316' data-category='paragraph' style='font-size:16px'>11 DEFINE SETTINGS AND RUN THE MESHER.<br>the_mesher.settings.high_order type = 2; T6/Q9.<br>the_mesher · settings.max_chordal_ error = -0.40; To get a max distance of 2%.<br>the_mesher · settings. target_h = 0.006; Elements twice larger.<br>the_mesher run("bearing.iges", data) ;</p>
<p id='317' data-category='paragraph' style='font-size:16px'>11 SOME OUTPUT INFO (OPTIONAL) .<br>data.print_info(&display_hdl) ;</p>
<br><p id='318' data-category='paragraph' style='font-size:20px'>11 VISUALIZATION (OPTIONAL)</p>
<br><p id='319' data-category='paragraph' style='font-size:14px'>·</p>
<br><p id='320' data-category='paragraph' style='font-size:18px'>UIntMat connectM_;<br>connectM .copy(data.connectM) ;<br>meshtools2d: :convert_into_linear (connectM_) ; 11 MEDIT can't process quadratic elements.<br>meshtools: :medit_output("out.mesh" , data.pos, connectM_, CM2_FACE_MIX, data.colors) ;</p>
<p id='321' data-category='paragraph' style='font-size:18px'>return 0;<br>11 main</p>
<br><p id='322' data-category='paragraph' style='font-size:18px'>}</p>
<table id='323' style='font-size:22px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>30</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 31</div>
<h1 id='324' style='font-size:20px'>COMPUTING<br>OBJECTS</h1>
<h1 id='325' style='font-size:22px'>CM2 SurfMesh � T3/04<br>for OpenCascade �</h1>
<br><h1 id='326' style='font-size:16px'>Version 5.6</h1>
<h1 id='327' style='font-size:18px'>Mesh gallery</h1>
<p id='328' data-category='paragraph' style='font-size:14px'>Revision February 2025.<br>https://www.computing-objects.com<br>Ⓒ Computing Objects SARL - 25 rue du Marechal Foch, 78000 Versailles, France.</p>
</div>
<div class="page">
<div class="page-header">Page 32</div>
<h1 id='329' style='font-size:20px'>Archimedes turbine</h1>
<p id='330' data-category='paragraph' style='font-size:16px'>target_h = 10, all other settings to their default.</p>
<figure id='331'><img alt="" data-coord="top-left:(297,257); bottom-right:(937,1182)" /></figure>
<table id='332' style='font-size:14px'><thead></thead><tbody><tr><td colspan="2">CM2 SurfMesh T3 (R) ( 5</td></tr><tr><td colspan="2">* **********************</td></tr><tr><td>Nodes</td><td>: 10694</td></tr><tr><td>Triangles :</td><td>21528</td></tr><tr><td>Vertices</td><td>: 394 (merged: 8)</td></tr><tr><td>Curves</td><td>: 622 (merged: 12)</td></tr><tr><td>Surfaces :</td><td>258</td></tr><tr><td>Area :</td><td>2. 119694E+05</td></tr><tr><td>Qmin :</td><td>2. 314685E-02</td></tr><tr><td>Read time </td><td>5.59 s.</td></tr><tr><td>Curvs mesh time :</td><td>0.16 s.</td></tr><tr><td>Surfs mesh time :</td><td>0.48 s.</td></tr><tr><td>Total mesh time :</td><td>0.65 s. (32967 .85 t/s.)</td></tr></tbody></table>
<p id='333' data-category='paragraph' style='font-size:16px'>The output information given here are only indicative. All runs were done with x64 CM2 libs (Visual Studio 2022 MD build)<br>on Windows 8.1 x64 with Intel Xeon E3-1270 V2 3.5 Ghz (4 cores with hyper-threading, turbo boost disabled).</p>
<table id='334' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4-tutorials</td><td>32</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 33</div>
<figure id='335'><img alt="" data-coord="top-left:(295,196); bottom-right:(934,1138)" /></figure>
<p id='336' data-category='paragraph' style='font-size:14px'>* CM2 SurfMes (R) ( 5<br>* ** ************* *****<br>Nodes : 9818<br>Elements : 10199<br>Quadrangles 9577 (93.90 %, 97.64 %)<br>Triangles : 622 (6.10 %, 2.36 %)<br>Vertices : 394 (merged: 8)<br>Curves : 622 (merged: 12)<br>Surfaces : 258<br>Area : 2.120434E+05<br>Qmin 4.838189E-02<br>Read time 1.30 S.<br>Curvs mesh time 0.17 S.<br>Surfs mesh time : 0.53 S.<br>Total mesh time : 0.71 s. (14385. 05 t/s. )</p>
<table id='337' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4 - tutorials</td><td>33</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 34</div>
<h1 id='338' style='font-size:22px'>Hexapod</h1>
<p id='339' data-category='paragraph' style='font-size:18px'>target_h = 20, all other settings to their default.</p>
<figure id='340'><img alt="" data-coord="top-left:(191,248); bottom-right:(1041,1180)" /></figure>
<p id='341' data-category='paragraph' style='font-size:14px'>*</p>
<br><table id='342' style='font-size:16px'><thead></thead><tbody><tr><td></td><td>CM2 SurfMesh T3 (R) (5 ⊙ )</td></tr><tr><td colspan="2">* *****************************</td></tr><tr><td>Nodes</td><td>: 152178</td></tr><tr><td>Triangles</td><td>: 303116</td></tr><tr><td>Vertices</td><td>: 4348 (merged: 80)</td></tr><tr><td>Curves</td><td>: 7307 (merged: 80)</td></tr><tr><td>Surfaces</td><td>: 3198</td></tr><tr><td>Area</td><td>: 1. 784679E+06</td></tr><tr><td>Qmin</td><td>· 3.554735E-03</td></tr><tr><td>Read time</td><td>1.59 S.</td></tr><tr><td>Curvs mesh time</td><td>: 1,75 s.</td></tr><tr><td>Surfs mesh time</td><td>: 6.76 s.</td></tr><tr><td>Total mesh time</td><td>: 8.54 s. (35506.15 t/s.)</td></tr></tbody></table>
<table id='343' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4 tutorials</td><td>34</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 35</div>
<figure id='344'><img style='font-size:14px' alt="III
1880
(주동音)" data-coord="top-left:(190,228); bottom-right:(1045,1154)" /></figure>
<figure id='345'><img style='font-size:16px' alt="* * * * * *
* CM2 SurfMesh Q4 (R) (5 ⊙ ) *
* ** * ******************************
Nodes : 137917
Elements : 149544
Quadrangles : 125050 (83.62 %, 97.83 %)
Triangles : 24494 (16.38 %, 2.17 %)
Vertices : 4348 (merged: 80)
Curves 7307 (merged: 80)
Surfaces : 3198
Area 1. 784513E+06
Qmin 8.804998E-03
Read time 1.39 S.
Curvs mesh time 1.76 S.
Surfs mesh time : 8.05 S.
Total mesh time : 9.84 s. (15202.20 t/s. )" data-coord="top-left:(202,1208); bottom-right:(783,1502)" /></figure>
<table id='346' style='font-size:20px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4 - tutorials</td><td>35</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 36</div>
<h1 id='347' style='font-size:20px'>Krank Mili</h1>
<p id='348' data-category='paragraph' style='font-size:16px'>target_h = 5, fix_tolerance = -0.05, all other settings to their default.</p>
<figure id='349'><img alt="" data-coord="top-left:(179,381); bottom-right:(1072,838)" /></figure>
<p id='350' data-category='paragraph' style='font-size:14px'>SurfMesh R 5<br>*********************<br>Nodes 48959<br>Triangles : 94568<br>Vertices : 2369 (merged: 1638)<br>Curves : 2370 (merged: 1183)<br>Surfaces : 466<br>Area : 3.002293E+05<br>Qmin 1. 080618E-02<br>Read time 1. 07 s.<br>Curvs mesh time : 0.44 S.<br>Surfs mesh time : 1.49 S.<br>Total mesh time : 1.94 S. (48646.09 t/s. )</p>
<table id='351' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMeshⓇ T3/Q4-tutorials</td><td>36</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 37</div>
<figure id='352'><img alt="" data-coord="top-left:(172,389); bottom-right:(1063,835)" /></figure>
<figure id='353'><img style='font-size:14px' alt="* CM2 SurfMesh (R) (5 ⊙ ) *
******** ********************************* *
Nodes : 44929
Elements : 48039
Quadrangles 38469 (80. 08 %, 97.59 %)
Triangles 9570 (19.92 %, 2.41 %)
Vertices 2369 (merged: 1638)
Curves 2370 (merged: 1183)
Surfaces 466
Area 3.001658E+05
Qmin 1.208474E-02
Read time 1.01 s.
Curvs mesh time 0.45 S.
Surfs mesh time 1.82 s.
Total mesh time 2.28 s. (21069. 74 t/s.)" data-coord="top-left:(206,1068); bottom-right:(787,1364)" /></figure>
<table id='354' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4 - tutorials</td><td>37</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 38</div>
<h1 id='355' style='font-size:20px'>Micro ATX</h1>
<p id='356' data-category='paragraph' style='font-size:16px'>target_h = 5,, all other settings to their default.</p>
<figure id='357'><img alt="" data-coord="top-left:(134,370); bottom-right:(1104,950)" /></figure>
<p id='358' data-category='paragraph' style='font-size:14px'>***<br>CM2 SurfMesh T3 (R) (5 )<br>* *************************<br>Nodes : 652530<br>Triangles : 1308244<br>Vertices : 70720 (merged: 830)<br>Curves : 107249 (merged: 968)<br>Surfaces 40748<br>Area 5.459773E+05<br>Qmin 4.812106E-04<br>Read time 24.51 S.<br>Curvs mesh time : 26.09 S.<br>Surfs mesh time : 31.39 S.<br>Total mesh time : 57.94 S. (22577.73 t/s.)</p>
<table id='359' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4-tutorials</td><td>38</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 39</div>
<figure id='360'><img alt="" data-coord="top-left:(132,415); bottom-right:(1102,992)" /></figure>
<p id='361' data-category='paragraph' style='font-size:14px'>* CM2 SurfMesh 04 (R) (5 ⊙ ) *<br>********* ******************************** *<br>Nodes : 623724<br>Elements 659020<br>Quadrangles 591612 (89.77 %, 97.39 %)<br>Triangles 67408 (10.23 %, 2.61 %)<br>Vertices 70720 (merged: 830)<br>Curves 107249 (merged: 968)<br>Surfaces 40748<br>Area 5.459561E+05<br>Qmin 4.529884E-04<br>Read time 24.21 S.<br>Curvs mesh time 25.98 S.<br>Surfs mesh time 40.94 S.<br>Total mesh time : 67.38 s. (9780.50 t/s. )</p>
<table id='362' style='font-size:18px'><thead></thead><tbody><tr><td>Ⓒ Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfMesh � T3/Q4 -tutorials</td><td>39</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 40</div>
<h1 id='363' style='font-size:14px'>COMPUTING<br>OBJECTS</h1>
</div>

</body>
</html>
