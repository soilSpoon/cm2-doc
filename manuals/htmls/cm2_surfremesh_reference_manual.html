<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .page {
            page-break-after: always;
            margin-bottom: 50px;
            padding: 20px;
            border: 1px solid #ddd;
        }
        .page-header {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #333;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
        }
        table td, table th {
            border: 1px solid #ddd;
            padding: 8px;
        }
        pre, code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 3px;
        }
        pre {
            padding: 10px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
<!-- Model: document-parse-250618 -->
<div class="page">
<div class="page-header">Page 1</div>
<h1 id='0' style='font-size:20px'>CM2 SurfRemesh® T3/Q4</h1>
<br><h1 id='1' style='font-size:16px'>Version 5.6</h1>
<p id='2' data-category='paragraph' style='font-size:18px'>reference manual</p>
<p id='3' data-category='paragraph' style='font-size:14px'>Revision February 2025.<br>https://www.computing-objects.com<br>© Computing Objects SARL - 25 rue du Maréchal Foch, 78000 Versailles, France.</p>
</div>
<div class="page">
<div class="page-header">Page 2</div>
<h1 id='4' style='font-size:20px'>Forewords</h1>
<p id='5' data-category='paragraph' style='font-size:16px'>This manual is a reference manual for the structures data_type and settings_type of the surface mesh<br>generators CM2 SurfRemesh® T3/Q4 of the CM2 MeshTools® SDK.</p>
<br><p id='6' data-category='paragraph' style='font-size:16px'>It is based on the HTML reference manual (Doxygen© generated).</p>
<br><p id='7' data-category='paragraph' style='font-size:16px'>For examples, please refer to the manual CM2 SurfRemesh T3/Q4 - tutorials.</p>
<p id='8' data-category='paragraph' style='font-size:16px'>The source code of the CM2 MeshTools® SDK (full library) has been registered with the APP under Inter Deposit<br>number IDDN.FR.001.260002.00.R.P.1998.000.20700 (22/06/1998) and IDDN.<br>FR.001.250030.00.S.P.1999.000.20700 (16/06/1999) is regularly deposited since then.</p>
<br><p id='9' data-category='paragraph' style='font-size:16px'>The source code specific to CM2 SurfRemesh® T3, together with this manual, has been registered with the APP<br>under Inter Deposit number IDDN.FR.001.450010.000.S.P.2007.000.20600 (9/11/2007) and is regularly<br>deposited since then.</p>
<br><p id='10' data-category='paragraph' style='font-size:16px'>The source code specific to CM2 SurfRemesh® Q4, together with this manual, has been registered with the APP<br>under Inter Deposit number IDDN.FR.001.440018.000.R.P.2008.000.20700 (31/10/2008) and is regularly<br>deposited since then.</p>
<table id='11' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 2</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 3</div>
<h1 id='12' style='font-size:20px'>Table of contents</h1>
<p id='13' data-category='index' style='font-size:16px'>Forewords .................................................................................................................................................. 2<br>1. Data of the remeshers ......................................................................................................................... 6<br>Coordinates of the points ....................................................................................................................................................... 6<br>Elements ..................................................................................................................................................................................... 6<br>Metric map ................................................................................................................................................................................. 6<br>Neighbors ................................................................................................................................................................................... 7<br>Ancestors .................................................................................................................................................................................... 7<br>Shape qualities .......................................................................................................................................................................... 7<br>Histograms ................................................................................................................................................................................. 8<br>Hard faces .................................................................................................................................................................................. 8<br>Skeleton edges of the initial mesh ....................................................................................................................................... 8<br>Skeleton edges of the final mesh ......................................................................................................................................... 8<br>Edges to exclude from the skeleton edge set ................................................................................................................... 8<br>Hard edges ................................................................................................................................................................................. 9<br>Hard nodes ................................................................................................................................................................................ 9<br>Nodes to exclude from the hard node set ......................................................................................................................... 9<br>Field to interpolate on the new mesh ................................................................................................................................. 9<br>Initial elements’ color ............................................................................................................................................................... 9<br>Final elements’ color .............................................................................................................................................................. 10<br>Initial skeleton edges’ color .................................................................................................................................................. 10<br>Final skeleton edges’ color ................................................................................................................................................... 10<br>Maximum error distance ...................................................................................................................................................... 10<br>Errors and warnings ............................................................................................................................................................... 11<br>Complementary information ............................................................................................................................................... 11<br>Function members ................................................................................................................................................................. 12<br>2. Error and warning codes ................................................................................................................... 14<br>Error codes ............................................................................................................................................................................... 14<br>Warning codes ......................................................................................................................................................................... 15<br>3. Settings of the remeshers ................................................................................................................. 17<br>Minimum size of the elements ............................................................................................................................................ 17</p>
<table id='14' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 3</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 4</div>
<h1 id='15' style='font-size:20px'>Table of contents</h1>
<p id='16' data-category='index' style='font-size:16px'>Maximum size of the elements ........................................................................................................................................... 17<br>Target mesh size ..................................................................................................................................................................... 17<br>Max chordal error .................................................................................................................................................................. 17<br>Max gradation 1d ................................................................................................................................................................... 17<br>Max gradation 2d ................................................................................................................................................................... 18<br>Patch angle tolerance ............................................................................................................................................................ 18<br>Initial fixing tolerance ............................................................................................................................................................. 18<br>Final optimization tolerance ................................................................................................................................................ 18<br>Strain tolerance ....................................................................................................................................................................... 19<br>Initial clean-up ......................................................................................................................................................................... 19<br>Closing initial notches ............................................................................................................................................................ 19<br>Closed manifolds .................................................................................................................................................................... 19<br>Line proximity detection ....................................................................................................................................................... 19<br>All-quad or quad-dominant mode (CM2 SurfRemesh Q4) ........................................................................................... 20<br>Remeshing ................................................................................................................................................................................ 20<br>Parity along the skeleton lines ............................................................................................................................................. 20<br>Node smoothing ..................................................................................................................................................................... 20<br>Node inserting ......................................................................................................................................................................... 20<br>Node removing ....................................................................................................................................................................... 21<br>Shell remeshing ...................................................................................................................................................................... 21<br>Final optimization ................................................................................................................................................................... 21<br>Computation of the size-qualities histogram .................................................................................................................. 21<br>Deep analyzing ........................................................................................................................................................................ 21<br>Pattern for structured meshes (CM2 SurfRemesh T3) .................................................................................................. 22<br>Pattern for structured meshes (CM2 SurfRemesh Q4) ................................................................................................. 22<br>Limit on the number of nodes ............................................................................................................................................ 22<br>Optimization level ................................................................................................................................................................... 22<br>Weight on shape quality ....................................................................................................................................................... 22<br>Weight on quadrangles (CM2 SurfRemesh Q4) .............................................................................................................. 22</p>
<table id='17' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>4</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 5</div>
<p id='18' data-category='index' style='font-size:18px'>Minimum quadrangle quality (CM2 SurfRemesh Q4) .................................................................................................... 23<br>Minimum warp quality (CM2 SurfRemesh Q4) ................................................................................................................ 23<br>Upper bound on edges length ............................................................................................................................................ 23<br>Minimum number of edges along loops .......................................................................................................................... 23<br>Maximum number of edges along loops .......................................................................................................................... 24<br>Number of threads for parallel processing ...................................................................................................................... 24<br>Display handler ....................................................................................................................................................................... 24<br>Interrupt handler .................................................................................................................................................................... 25<br>Pass-through pointer ............................................................................................................................................................. 25<br>Function members ................................................................................................................................................................. 27<br>4. General scheme of the remeshers ................................................................................................... 28</p>
<table id='19' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>5</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 6</div>
<h1 id='20' style='font-size:22px'>1. Data of the remeshers</h1>
<p id='21' data-category='paragraph' style='font-size:18px'>The whole data set for a run of the remeshers is gathered into a single structure of type data_type:</p>
<p id='22' data-category='paragraph' style='font-size:14px'>void surfremesh_t3::mesher::run (surfremesh_t3::mesher::data_type& data);<br>void surfremesh_q4::mesher::run (surfremesh_q4::mesher::data_type& data);</p>
<p id='23' data-category='paragraph' style='font-size:18px'>The data_type structure contains the following fields:</p>
<br><h1 id='24' style='font-size:20px'>Coordinates of the points</h1>
<p id='25' data-category='paragraph' style='font-size:18px'>Matrix pos of dimensions 3 x total_nods (IN/OUT).</p>
<br><p id='26' data-category='paragraph' style='font-size:18px'>It stores the coordinates of all points. The coordinates are stored column-wise. The column index is the index<br>of the node (zero-based, i.e. from 0 to N-1). The X-coordinates are in the first row, the Y-coordinates in the<br>second row and the Z-coordinates in the third row.</p>
<br><p id='27' data-category='paragraph' style='font-size:18px'>Upon exit, the coordinates of the newly generated nodes are appended to the back of the matrix as new<br>columns. The initial columns are left unchanged1.</p>
<h1 id='28' style='font-size:20px'>Elements</h1>
<p id='29' data-category='paragraph' style='font-size:18px'>Matrix connectM (IN/OUT) of the connectivity of the elements (column oriented).</p>
<br><p id='30' data-category='paragraph' style='font-size:18px'>For the triangle remesher, the dimensions of this matrix are 3 x nefs_in (input) and 3 x nefs (output).</p>
<br><p id='31' data-category='paragraph' style='font-size:18px'>For the quadrangle remesher, the dimensions are 3 x nefs_in upon entry (only triangle meshes upon entry2)<br>and 4 x nefs upon exit. In this case, the leading part of the matrix (from columns 0 to nefs_Q4 - 1) is the<br>connectivity of the quadrangle elements. The tailing part (from columns nefs_Q4 to nefs - 1) is the<br>connectivity of the triangle elements, the fourth node ID in this part being CM2_NONE (i.e. unsigned(-1)).</p>
<br><p id='32' data-category='paragraph' style='font-size:18px'>The ordering of the elements in this matrix is irrelevant.</p>
<br><p id='33' data-category='paragraph' style='font-size:18px'>The initial connectivity is lost and overwritten by the new mesh connectivity, except when the remesher fails.</p>
<h1 id='34' style='font-size:20px'>Metric map</h1>
<h1 id='35' style='font-size:18px'>Vector metrics (IN).</h1>
<br><p id='36' data-category='paragraph' style='font-size:18px'>The user can specify a target mesh size at each initial node. If the value for a node is zero or negative or not<br>present a default value will be used instead3. The new mesh is generated to fit best locally the metric values.</p>
<br><p id='37' data-category='paragraph' style='font-size:18px'>Only the values on the nodes of the initial mesh are considered.</p>
<p id='38' data-category='list' style='font-size:14px'>1 To keep only the nodes of the final mesh, use function cm2::meshtools::simplify after the remeshing:<br>cm2::meshtools::simplify(data.pos, data.connectM);</p>
<p id='39' data-category='list' style='font-size:14px'>2 To remesh an all-quad or a quad-dominant mesh, use cm2::meshtools2d::split_Q4_into_T3 to transform into an all-triangle mesh<br>prior to remeshing.</p>
<br><p id='40' data-category='paragraph' style='font-size:14px'>3 The default mesh size value at a hard node is the minimum distance to any other hard node, caped with min_h and max_h.</p>
<table id='41' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>6</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 7</div>
<h1 id='42' style='font-size:22px'>Neighbors</h1>
<p id='43' data-category='paragraph' style='font-size:18px'>Matrix neighbors (OUT) of the neighbor elements of dimensions 3 x nefs (T3) or 4 x nefs (Q4).</p>
<br><p id='44' data-category='paragraph' style='font-size:18px'>This matrix gives, for each element in the final mesh, the indices of the three or four neighboring elements<br>(CM2_NONE if none or several).</p>
<br><p id='45' data-category='paragraph' style='font-size:18px'>neighbors(i, j) is the neighbor of the jth element sharing its ith edge. See Figure 1 for the local numbering<br>of the faces.</p>
<figure id='46'><img style='font-size:18px' alt="E2
1 3
E2
2
E0
E3
E1
0
2
0
1
E1
E0" data-coord="top-left:(182,361); bottom-right:(1041,728)" /></figure>
<br><caption id='47' style='font-size:14px'>Figure 1 – Nodes and edges local numbering in triangles and quads.</caption>
<h1 id='48' style='font-size:22px'>Ancestors</h1>
<p id='49' data-category='paragraph' style='font-size:18px'>ancestors is a vector of size total_nods, i.e. the number of columns in the pos matrix upon exit (OUT).</p>
<br><p id='50' data-category='paragraph' style='font-size:18px'>This vector gives, for each node, the index of one of the elements in which it belongs (CM2_NONE if the node is<br>not referenced in the final connectivity matrix connectM).</p>
<br><p id='51' data-category='paragraph' style='font-size:18px'>Together with the neighbors matrix, this can make easy the design of search and traversal algorithms (such<br>as looking for all elements connected to a node).</p>
<br><h1 id='52' style='font-size:22px'>Shape qualities</h1>
<p id='53' data-category='paragraph' style='font-size:18px'>Vector shape_qualities is a vector of size nefs (OUT).</p>
<br><p id='54' data-category='paragraph' style='font-size:18px'>This vector gives the shape quality of each element.</p>
<br><p id='55' data-category='paragraph' style='font-size:18px'>The formula for the shape quality of a triangle writes:</p>
<table id='56' style='font-size:18px'><thead></thead><tbody><tr><td>S</td><td>S Area of the triangle.</td></tr><tr><td>Qs = 4 3 Lmax P</td><td>with: Lmax Length of the longest edge of the triangle. P Perimeter of the triangle.</td></tr></tbody></table>
<p id='57' data-category='paragraph' style='font-size:18px'>The formula for the shape quality of a 2-D quadrangle writes:</p>
<p id='58' data-category='equation'>$$Q_{s}=8\sqrt{2}\frac{S_{\mathrm{min}}}{L_{\mathrm{max}}P}$$</p>
<br><table id='59' style='font-size:16px'><thead></thead><tbody><tr><td rowspan="3">with:</td><td>Smin</td><td>Minimum area of the 4 triangles.</td></tr><tr><td>Lmax</td><td>Max length of the four sides and the two diagonals.</td></tr><tr><td>P</td><td>Perimeter of the quadrangle.</td></tr></tbody></table>
<table id='60' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 7</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 8</div>
<p id='61' data-category='paragraph' style='font-size:16px'>The formula for the shape quality of a 3-D quadrangle writes:</p>
<p id='62' data-category='paragraph' style='font-size:16px'>Qw Warp quality of the quadrangle</p>
<p id='63' data-category='paragraph' style='font-size:16px'>3D = Q s</p>
<br><p id='64' data-category='paragraph' style='font-size:18px'>2D Qw</p>
<br><p id='65' data-category='paragraph' style='font-size:16px'>Q s</p>
<br><p id='66' data-category='paragraph' style='font-size:20px'>with: Qw��� 1 �</p>
<br><h1 id='67' style='font-size:20px'>acos�min � N 0 , N2 , N , N3 ��</h1>
<br><p id='68' data-category='paragraph' style='font-size:14px'>1</p>
<br><p id='69' data-category='paragraph' style='font-size:20px'>�</p>
<br><p id='70' data-category='paragraph' style='font-size:16px'>Ni Normal to the quad at node i</p>
<br><h1 id='71' style='font-size:22px'>Histograms</h1>
<br><p id='72' data-category='paragraph' style='font-size:16px'>Histograms histo_Qs_in, histo_Qs and histo_Qh (OUT).</p>
<br><p id='73' data-category='paragraph' style='font-size:16px'>histo_Qs_in is the histogram of the shape qualities in the initial mesh. histo_Qs is the histogram of the<br>vector shape_qualities in the final mesh.</p>
<br><p id='74' data-category='paragraph' style='font-size:16px'>histo_Qh is the histogram of the normalized edge lengths in the final mesh (computed only when the option<br>flag compute_Qh_flag is up, see Section 3).</p>
<br><p id='75' data-category='paragraph' style='font-size:16px'>Each histogram stores the minimum, the maximum and the average value as data members.</p>
<br><h1 id='76' style='font-size:22px'>Hard faces</h1>
<h1 id='77' style='font-size:16px'>Vector hard_faces (IN).</h1>
<br><p id='78' data-category='paragraph' style='font-size:16px'>Put in this vector the IDs of the initial triangles (column IDs in input matrix connectM) that must be kept in the<br>final mesh. Their edges and nodes will be also considered as hard edges and hard nodes.</p>
<h1 id='79' style='font-size:22px'>Skeleton edges of the initial mesh</h1>
<p id='80' data-category='paragraph' style='font-size:16px'>Matrix skeleton_edges_in of dimension 2 x NEski (IN/OUT).</p>
<br><p id='81' data-category='paragraph' style='font-size:16px'>These skeleton edges are the boundaries of the patches in the initial mesh. They are the stitches in the initial<br>mesh found by the partitioning algorithm or specified by user. The skeleton lines are remeshed in the final<br>mesh.</p>
<br><p id='82' data-category='paragraph' style='font-size:16px'>Only the edges in the initial mesh are considered.</p>
<h1 id='83' style='font-size:22px'>Skeleton edges of the final mesh</h1>
<p id='84' data-category='paragraph' style='font-size:16px'>These skeleton edges are the remeshed skeleton lines. They are the boundaries of the patches in the final mesh.</p>
<br><p id='85' data-category='paragraph' style='font-size:16px'>Matrix skeleton_edges of dimension 2 x NEskf (OUT).</p>
<p id='86' data-category='paragraph' style='font-size:22px'>Edges to exclude from the skeleton edge set</p>
<p id='87' data-category='paragraph' style='font-size:16px'>Matrix exclude_skeleton_edges of dimension 2 x NExsk (IN).</p>
<br><p id='88' data-category='paragraph' style='font-size:16px'>User can put in this matrix the edges that should not be considered as skeleton edges, if possible. However,<br>only the edges that violate the patch_angle_tolerance criterion can be excluded this way. The algorithm<br>will keep any other skeleton edge if it violates any other criterion (strain_tolerance or if it is impossible to<br>remesh without splitting along this edge).</p>
<br><p id='89' data-category='paragraph' style='font-size:16px'>Only the edges in the initial mesh are considered.</p>
<table id='90' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 8</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 9</div>
<h1 id='91' style='font-size:22px'>Hard edges</h1>
<p id='92' data-category='paragraph' style='font-size:20px'>Matrix hard_edges of dimension 2 x NEhe (IN).</p>
<br><p id='93' data-category='paragraph' style='font-size:20px'>Hard edges are skeleton edges that should not be remeshed. Their vertices are considered as hard nodes.</p>
<br><p id='94' data-category='paragraph' style='font-size:20px'>Only the edges in the initial mesh are considered.</p>
<h1 id='95' style='font-size:22px'>Hard nodes</h1>
<p id='96' data-category='paragraph' style='font-size:20px'>Vector hard_nodes (IN/OUT).</p>
<br><p id='97' data-category='paragraph' style='font-size:20px'>Upon entry, the user can put in this vector some node IDs to constrain them to remain in the final mesh. Upon<br>exit, this vector contains in addition all the skeleton nodes, e.g. the topologically singular nodes (nodes<br>connected to one, three or more skeleton lines) and the nodes of the skeleton lines for which the angle<br>between coincident skeleton lines is greater than patch_angle_tolerance.</p>
<br><p id='98' data-category='paragraph' style='font-size:20px'>Only the nodes in the initial mesh are considered.</p>
<h1 id='99' style='font-size:22px'>Nodes to exclude from the hard node set</h1>
<h1 id='100' style='font-size:20px'>Vector exclude_hard_nodes (IN).</h1>
<br><p id='101' data-category='paragraph' style='font-size:20px'>This vector contains the nodes that should not be selected as skeleton nodes, if possible.Only the nodes that<br>violate the patch_angle_tolerance criterion of the skeleton lines can be excluded. The algorithm will keep<br>any other skeleton node, as well as the user-defined hard nodes.</p>
<br><p id='102' data-category='paragraph' style='font-size:20px'>Only the nodes in the initial mesh are considered.</p>
<h1 id='103' style='font-size:22px'>Field to interpolate on the new mesh</h1>
<h1 id='104' style='font-size:20px'>Matrix interpolate_field (IN/OUT).</h1>
<br><p id='105' data-category='paragraph' style='font-size:20px'>This matrix contains nodal data to be interpolated to the new mesh (such as FEA data, textures...)<br>Data for node #i is at column #i (can be a single scalar or a vector). As new nodes are appended to the<br>coordinate matrix pos, new values are linearly interpolated and appended to this matrix4.</p>
<h1 id='106' style='font-size:22px'>Initial elements’ color</h1>
<h1 id='107' style='font-size:20px'>Vector colors_in (IN/OUT).</h1>
<br><p id='108' data-category='paragraph' style='font-size:20px'>The patch ID (color) of the initial elements.</p>
<br><p id='109' data-category='paragraph' style='font-size:20px'>Automatic coloring when colors_in is empty upon entry:</p>
<br><p id='110' data-category='paragraph' style='font-size:20px'>• The partitioning algorithm use its own criterions (settings_type::patch_angle_tolerance,<br>settings_type::strain_tolerance, settings_type::max_chordal_error, skeleton_edges_in,<br>exclude_skeleton_edges) to partition the initial mesh and set colors to the patches.</p>
<br><p id='111' data-category='paragraph' style='font-size:20px'>• User has little control over the patches (only through the above criterions) and none over the color values.<br>Patches are colored consecutively starting from 0.<br>Elements eliminated during the initial clean-up and final optimization steps have no color ID (CM2_NONE).</p>
<p id='112' data-category='paragraph' style='font-size:14px'>4 To eliminate the old nodes together with their data, use the following code snippet after the remeshing:</p>
<p id='113' data-category='paragraph' style='font-size:16px'>UIntMat connectM;<br>connectM.copy(data.connectM); // Copy of initial connectivity.<br>cm2::meshtools::simplify(data.pos, connectM); // Eliminate unused nodes.<br>cm2::meshtools::simplify(data.interpolate_field, data.connectM); // Eliminate unused data.</p>
<table id='114' style='font-size:18px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>9</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 10</div>
<p id='115' data-category='paragraph' style='font-size:16px'>User coloring when colors_in is not empty upon entry:</p>
<br><p id='116' data-category='list' style='font-size:16px'>• The boundaries between different colors are considered as skeleton edges and honored as such.<br>• User can provide colors for only some elements in the initial mesh (partial user coloring).<br>The boundaries between colored elements and non-colored elements are also considered as skeleton edges.</p>
<br><p id='117' data-category='paragraph' style='font-size:16px'>• The partitioning algorithm can add other skeleton edges (angulous edges or in order to respect other<br>criterions such as settings_type::strain_tolerance, settings_type::max_chordal_error...)</p>
<br><p id='118' data-category='paragraph' style='font-size:16px'>• Additional color values (when partial user coloring) start with the next highest value given by user in<br>colors_in and increase consecutively.</p>
<h1 id='119' style='font-size:20px'>Final elements’ color</h1>
<p id='120' data-category='paragraph' style='font-size:16px'>Vector colors (OUT).</p>
<br><p id='121' data-category='paragraph' style='font-size:16px'>The patch ID (color) of the final elements.</p>
<br><p id='122' data-category='paragraph' style='font-size:16px'>Elements with the same color in colors are the remeshed elements (children) from the initial elements<br>(parents) with that color in colors_in.</p>
<br><h1 id='123' style='font-size:20px'>Initial skeleton edges’ color</h1>
<h1 id='124' style='font-size:16px'>Vector skeleton_colors_in (IN/OUT).</h1>
<br><p id='125' data-category='paragraph' style='font-size:16px'>The skeleton line ID (color) of the initial skeleton edges</p>
<br><p id='126' data-category='paragraph' style='font-size:16px'>Automatic coloring when skeleton_colors_in is empty upon entry:</p>
<p id='127' data-category='paragraph' style='font-size:16px'>• The color of the skeleton lines is defined by the partitioning algorithm (one color value by line with<br>continuous numbering starting with 0).<br>• User has little control over the lines and none over the color values.<br>Skeleton lines are colored consecutively starting from 0.<br>Edges eliminated during the initial clean-up and final optimization steps have no color ID (CM2_NONE).</p>
<br><p id='128' data-category='paragraph' style='font-size:16px'>User coloring when skeleton_colors_in is not empty upon entry:</p>
<br><p id='129' data-category='list' style='font-size:16px'>• The extremities of colored lines are considered as hard nodes and honored as such.<br>• The partitioning algorithm can add other skeleton nodes (angulous nodes).</p>
<br><p id='130' data-category='paragraph' style='font-size:16px'>Additional line color values (when partial user coloring) start with the next highest value given by user in<br>skeleton_colors_in and increase consecutively.</p>
<br><h1 id='131' style='font-size:20px'>Final skeleton edges’ color</h1>
<h1 id='132' style='font-size:16px'>Vector skeleton_colors (OUT).</h1>
<br><p id='133' data-category='paragraph' style='font-size:16px'>The skeleton line ID (color) of the final skeleton edges.</p>
<br><p id='134' data-category='paragraph' style='font-size:16px'>Skeleton edges with the same color in skeleton_colors are the remeshed edges (children) from the initial<br>edges (parents) with that color in skeleton_colors_in.</p>
<br><h1 id='135' style='font-size:20px'>Maximum error distance</h1>
<h1 id='136' style='font-size:16px'>Scalar max_error_distance (OUT).</h1>
<br><p id='137' data-category='paragraph' style='font-size:16px'>This is an approximate maximum distance between the initial mesh and the final mesh (so-called Hausdorff<br>distance). This is a measure of the geometric error between the two meshes.</p>
<table id='138' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>10</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 11</div>
<h1 id='139' style='font-size:20px'>Errors and warnings</h1>
<p id='140' data-category='paragraph' style='font-size:16px'>Two enums, error_code and warning_code, give upon exit the error and warning codes if any (OUT).</p>
<br><p id='141' data-category='paragraph' style='font-size:16px'>A correct run gives the CM2_NO_ERROR and CM2_NO_WARNING codes (zero values). See Section 2 for more<br>detailed explanations of the error and warning codes.</p>
<br><p id='142' data-category='paragraph' style='font-size:16px'>String msg1 holds explanation messages about the error/warning if any. In case of error, the meshing process<br>is aborted and the output mesh (connectM) is left unchanged (equal to the input mesh). With a mere warning,<br>the process goes to its end though the final mesh may have a poor quality.</p>
<br><p id='143' data-category='paragraph' style='font-size:16px'>String msg2 is for debugging purpose and shouldn’t normally be used on production code.</p>
<br><h1 id='144' style='font-size:20px'>Complementary information</h1>
<p id='145' data-category='paragraph' style='font-size:16px'>In this section are gathered the remaining fields of the data structure (OUT):</p>
<br><p id='146' data-category='list' style='font-size:16px'>• nefs_in: the number of elements in the initial mesh (also equals to the number of columns in connectM<br>upon entry). nefs_in = nefs_Q4_in + nefs_T3_in.<br>• nefs_T3_in: the number of triangles in the initial mesh.<br>• nefs_Q4_in: the number of quadrangles in the initial mesh (null with CM2 SurfRemesh T3).<br>• nefs: the number of elements in the final mesh (also equals to the number of columns in connectM upon exit).<br>nefs = nefs_Q4 + nefs_T3.<br>• nefs_T3: the number of triangles in the final mesh (null with CM2 SurfRemesh Q4 in all-quad mode).<br>• nefs_Q4: the number of quadrangles in the final mesh (null with CM2 SurfRemesh T3).<br>• nods_in: the number of nodes in the initial mesh (less or equal to the number of columns in pos upon entry).<br>• nods: the number of nodes in the final mesh (less or equal to the number of columns in pos upon exit).<br>• total_nods: the total number of points (i.e. columns) in matrix pos upon exit.<br>• area_in: the area of the initial mesh. area_in = area_Q4_in + area_T3_in<br>• area_T3_in: the area of the triangles in the initial mesh.<br>• nefs_Q4_in: the area of the quadrangles in the initial mesh (null with CM2 SurfRemesh T3).<br>• area: the area of the final mesh. area = area_Q4 + area_T3<br>• area_T3: the area of the triangles in the final mesh (null with CM2 SurfRemesh Q4 in all-quad mode).<br>• area_Q4: the area of the quadrangles in the final mesh (null with CM2 SurfRemesh T3).<br>• Qmin_in: the worst shape quality of the elements in the initial mesh.<br>• Qmin: the worst shape quality of the elements in the final mesh.<br>• error_code, warning_code: the error and warning codes (see Section 2).<br>• msg1: the error message.<br>• cleaning_time, partition_time, remesh_time, optim_time: the times spent in the successive steps<br>of the remesher.<br>• total_time: the total time spent in the remesher.<br>• speed: the global speed of the remesher (number of generated elements per second).</p>
<table id='147' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>11</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 12</div>
<p id='148' data-category='paragraph' style='font-size:14px'>struct data_type</p>
<br><p id='149' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='150' data-category='paragraph' style='font-size:14px'>DoubleMat<br>UIntMat<br>DoubleVec</p>
<p id='151' data-category='paragraph' style='font-size:14px'>UIntMat<br>UIntVec<br>DoubleVec<br>misc::histogram<br>misc::histogram<br>misc::histogram</p>
<br><p id='152' data-category='paragraph' style='font-size:14px'>UIntVec</p>
<br><h1 id='153' style='font-size:14px'>UIntMat</h1>
<br><p id='154' data-category='paragraph' style='font-size:14px'>UIntMat</p>
<br><p id='155' data-category='paragraph' style='font-size:14px'>UIntMat</p>
<br><h1 id='156' style='font-size:14px'>UIntMat</h1>
<br><p id='157' data-category='paragraph' style='font-size:14px'>UIntVec</p>
<br><p id='158' data-category='paragraph' style='font-size:14px'>UIntVec</p>
<br><h1 id='159' style='font-size:14px'>DoubleMat</h1>
<h1 id='160' style='font-size:14px'>UIntVec</h1>
<br><p id='161' data-category='paragraph' style='font-size:14px'>UIntVec</p>
<br><p id='162' data-category='paragraph' style='font-size:14px'>UIntVec</p>
<br><h1 id='163' style='font-size:14px'>UIntVec</h1>
<br><h1 id='164' style='font-size:14px'>double</h1>
<h1 id='165' style='font-size:14px'>unsigned</h1>
<br><h1 id='166' style='font-size:14px'>unsigned</h1>
<br><p id='167' data-category='paragraph' style='font-size:14px'>double</p>
<br><p id='168' data-category='paragraph' style='font-size:14px'>double</p>
<br><h1 id='169' style='font-size:14px'>unsigned</h1>
<br><h1 id='170' style='font-size:14px'>unsigned</h1>
<br><h1 id='171' style='font-size:14px'>unsigned</h1>
<br><h1 id='172' style='font-size:14px'>unsigned</h1>
<br><p id='173' data-category='paragraph' style='font-size:14px'>double</p>
<br><p id='174' data-category='paragraph' style='font-size:14px'>double</p>
<br><h1 id='175' style='font-size:14px'>double</h1>
<br><p id='176' data-category='paragraph' style='font-size:14px'>double</p>
<br><h1 id='177' style='font-size:14px'>unsigned</h1>
<br><p id='178' data-category='paragraph' style='font-size:14px'>double</p>
<br><p id='179' data-category='paragraph' style='font-size:14px'>double</p>
<br><p id='180' data-category='paragraph' style='font-size:14px'>double</p>
<br><h1 id='181' style='font-size:14px'>double</h1>
<br><p id='182' data-category='paragraph' style='font-size:14px'>double</p>
<br><p id='183' data-category='paragraph' style='font-size:14px'>pos;<br>connectM;<br>metrics;</p>
<p id='184' data-category='paragraph' style='font-size:14px'>double</p>
<br><p id='185' data-category='paragraph' style='font-size:14px'>neighbors;<br>ancestors;<br>shape_qualities;<br>histo_Qs_in;<br>histo_Qs;<br>histo_Qh;</p>
<p id='186' data-category='paragraph' style='font-size:14px'>hard_faces;<br>skeleton_edges_in;<br>skeleton_edges;<br>exclude_skeleton_edges;<br>hard_edges;<br>hard_nodes;<br>exclude_hard_nodes;</p>
<h1 id='187' style='font-size:14px'>interpolate_field;</h1>
<br><p id='188' data-category='paragraph' style='font-size:14px'>colors_in;<br>colors;<br>skeleton_colors_in;<br>skeleton_colors;</p>
<br><h1 id='189' style='font-size:14px'>max_error_distance;</h1>
<br><p id='190' data-category='paragraph' style='font-size:14px'>nefs_in;</p>
<br><p id='191' data-category='paragraph' style='font-size:14px'>nods_in;</p>
<br><p id='192' data-category='paragraph' style='font-size:14px'>area_in;</p>
<br><p id='193' data-category='paragraph' style='font-size:14px'>Qmin_in;</p>
<br><p id='194' data-category='paragraph' style='font-size:14px'>nefs;</p>
<br><p id='195' data-category='paragraph' style='font-size:14px'>nefs_Q4;</p>
<br><p id='196' data-category='paragraph' style='font-size:14px'>nefs_T3;</p>
<br><p id='197' data-category='paragraph' style='font-size:14px'>nods;</p>
<br><p id='198' data-category='paragraph' style='font-size:14px'>area;</p>
<br><p id='199' data-category='paragraph' style='font-size:14px'>area_Q4;</p>
<br><p id='200' data-category='paragraph' style='font-size:14px'>area_T3;</p>
<br><p id='201' data-category='paragraph' style='font-size:14px'>Qmin;</p>
<br><h1 id='202' style='font-size:14px'>total_nods;</h1>
<br><p id='203' data-category='paragraph' style='font-size:14px'>cleaning_time;</p>
<br><p id='204' data-category='paragraph' style='font-size:14px'>partition_time;</p>
<br><p id='205' data-category='paragraph' style='font-size:14px'>remesh_time;</p>
<br><p id='206' data-category='paragraph' style='font-size:14px'>optim_time;</p>
<br><p id='207' data-category='paragraph' style='font-size:14px'>speed;</p>
<br><p id='208' data-category='paragraph' style='font-size:14px'>total_time;</p>
<p id='209' data-category='paragraph' style='font-size:14px'>msg1[256];</p>
<br><p id='210' data-category='paragraph' style='font-size:14px'>error_code;</p>
<br><p id='211' data-category='paragraph' style='font-size:14px'>warning_code;</p>
<caption id='212' style='font-size:14px'>Table 1 – The data_type structures.</caption>
<br><p id='213' data-category='paragraph' style='font-size:14px'>};</p>
<h1 id='214' style='font-size:20px'>Function members</h1>
<p id='215' data-category='paragraph' style='font-size:18px'>The data_type are equipped with constructors, copy operator and other utility members:</p>
<br><p id='216' data-category='paragraph' style='font-size:14px'>char</p>
<br><h1 id='217' style='font-size:14px'>warning_type</h1>
<br><p id='218' data-category='paragraph' style='font-size:14px'>error_type</p>
<table id='219' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 12</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 13</div>
<h1 id='220' style='font-size:14px'>// Constructors.</h1>
<br><p id='221' data-category='paragraph' style='font-size:14px'>data_type();<br>data_type (const data_type& cpy);<br>data_type (const DoubleMat& P, const UIntMat& connectM);</p>
<br><p id='222' data-category='paragraph' style='font-size:14px'>// Copy operator.<br>const data_type& operator= (const data_type& data);</p>
<br><p id='223' data-category='paragraph' style='font-size:14px'>// Members.<br>void shallow_copy (const data_type& data);<br>bool valid() const;<br>int check() const;</p>
<br><p id='224' data-category='paragraph' style='font-size:14px'>void clear();<br>void clear_data_out();<br>void extract (DoubleMat& P, UIntMat& connectM) const;<br>void extract (DoubleMat& P, UIntMat& connectQ4, UIntMat& connectT3) const;<br>void IDs_sorted_by_color_in (UIntVec& color_order, UIntVec& xColor) const;<br>void IDs_sorted_by_color (UIntVec& color_order, UIntVec& xColor) const;<br>void skeleton_IDs_sorted_by_color_in (UIntVec& color_order, UIntVec& xColor) const;<br>void skeleton_IDs_sorted_by_color (UIntVec& color_order, UIntVec& xColor) const;<br>void save (const char* filename, unsigned precision = 16) const;<br>int load (const char* filename);<br>void print_info (display_handler_type hdl) const;<br>bool error_raised() const;<br>bool warning_raised() const;</p>
<p id='225' data-category='paragraph' style='font-size:14px'>Table 2 – The data_type function members.</p>
<br><p id='226' data-category='paragraph' style='font-size:20px'>The IDs_sorted_by_color_in member gets the order of the initial elements according to their color.<br>The IDs_sorted_by_color member gets the order of the final elements according to their color.<br>The skeleton_IDs_sorted_by_color_in member gets the order of the initial skeleton edges according to<br>their color.<br>The skeleton_IDs_sorted_by_color member gets the order of the final skeleton edges according to their<br>color.</p>
<br><p id='227' data-category='paragraph' style='font-size:20px'>Refer to the HTML reference manual for more details.</p>
<table id='228' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 13</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 14</div>
<h1 id='229' style='font-size:22px'>2. Error and warning codes</h1>
<br><h1 id='230' style='font-size:20px'>Error codes</h1>
<p id='231' data-category='paragraph' style='font-size:18px'>The error code is a public field of the class data_type::error_code as an enum of type error_type.</p>
<p id='232' data-category='paragraph' style='font-size:14px'>enum error_type</p>
<br><p id='233' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='234' data-category='paragraph' style='font-size:14px'>CM2_NO_ERROR,</p>
<br><p id='235' data-category='paragraph' style='font-size:14px'>CM2_LICENSE_ERROR,</p>
<br><p id='236' data-category='paragraph' style='font-size:14px'>CM2_SETTINGS_ERROR,</p>
<br><p id='237' data-category='paragraph' style='font-size:14px'>CM2_DATA_ERROR,</p>
<br><p id='238' data-category='paragraph' style='font-size:14px'>CM2_NODES_LIMIT_ERROR,</p>
<br><p id='239' data-category='paragraph' style='font-size:14px'>CM2_DEGENERATED_ELEMENT,</p>
<br><p id='240' data-category='paragraph' style='font-size:14px'>CM2_REMESHING_ERROR,</p>
<br><p id='241' data-category='paragraph' style='font-size:14px'>CM2_SYSTEM_MEMORY_ERROR,</p>
<br><p id='242' data-category='paragraph' style='font-size:14px'>// 0</p>
<p id='243' data-category='paragraph' style='font-size:14px'>CM2_INTERNAL_ERROR</p>
<br><p id='244' data-category='paragraph' style='font-size:14px'>// -100</p>
<br><p id='245' data-category='paragraph' style='font-size:14px'>// -101</p>
<br><p id='246' data-category='paragraph' style='font-size:14px'>// -102</p>
<br><p id='247' data-category='paragraph' style='font-size:14px'>// -103</p>
<br><p id='248' data-category='paragraph' style='font-size:14px'>// -107</p>
<br><p id='249' data-category='paragraph' style='font-size:14px'>// -108</p>
<br><p id='250' data-category='paragraph' style='font-size:14px'>// -199</p>
<br><p id='251' data-category='paragraph' style='font-size:14px'>// -200</p>
<br><p id='252' data-category='paragraph' style='font-size:14px'>};</p>
<p id='253' data-category='paragraph' style='font-size:14px'>Table 3 – Error codes enum.</p>
<table id='254' style='font-size:18px'><thead></thead><tbody><tr><td>CM2_NO_ERROR</td><td>OK, no problem.</td></tr><tr><td>CM2_LICENSE_ERROR</td><td>The registration must occur before the instantiation of any meshers. Check also your license. You may have to renew it. Please, contact <license@computing-objects.com>.</td></tr><tr><td>CM2_SETTINGS_ERROR</td><td>At least one setting is not valid (see Section 3). Check the positivity/range of scalar values such as shape_ quality_weight, max_gradation...</td></tr><tr><td>CM2_DATA_ERROR</td><td>The input data are not valid. Check the sizes of matrices, of vectors, node indices in the connectivity matrices, look for insane values...</td></tr><tr><td>CM�_NODES_LIMIT_ERROR</td><td>The limit on the number of nodes is too low.</td></tr><tr><td>CM�_DEGENERATED_ELEMENT</td><td>At least one of the final elements is invalid (null area). Can't generate a valid mesh. Check the input data.</td></tr><tr><td>CM�_REMESHING_ERROR</td><td>Can't generate a better mesh. Reduce parameter min_h, max_h, patch_angle_tolerance, strain_tolerance.</td></tr><tr><td>CM�_SYSTEM_MEMORY_ERROR</td><td>Insufficient memory available. Mesh is too big to be generated (over several tens millions elements).</td></tr><tr><td>CM�_INTERNAL_ERROR</td><td>Unexpected error. Save the data by calling data_type::save and send the file zipped to <support@computing-objects.com>.</td></tr></tbody></table>
<p id='255' data-category='paragraph' style='font-size:14px'>Table 4 – Error codes.</p>
<table id='256' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 14</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 15</div>
<p id='257' data-category='paragraph' style='font-size:18px'>In case of error the output mesh in field data.pos and data.connectM is identical to the input mesh.</p>
<br><p id='258' data-category='paragraph' style='font-size:18px'>For error codes CM2_DEGENERATED_ELEMENT, CM2_REMESHING_ERROR and CM2_INTERNAL_ERROR, save<br>the data by calling data_type::save, zip the file and send to <support@computing-objects.com>.</p>
<p id='259' data-category='paragraph' style='font-size:20px'>Example</p>
<p id='260' data-category='paragraph' style='font-size:14px'>if (data.error_raised())<br>{<br>// Error, do something according to data.error_code (forward message to a window...)<br>}</p>
<h1 id='261' style='font-size:22px'>Warning codes</h1>
<br><p id='262' data-category='paragraph' style='font-size:18px'>The warning code is located in the structure data_type.</p>
<p id='263' data-category='paragraph' style='font-size:14px'>enum warning_type</p>
<br><p id='264' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='265' data-category='paragraph' style='font-size:14px'>CM2_NO_WARNING,</p>
<br><p id='266' data-category='paragraph' style='font-size:14px'>CM2_INTERRUPTION,</p>
<br><h1 id='267' style='font-size:14px'>CM2_NODES_LIMIT_WARNING,</h1>
<br><p id='268' data-category='paragraph' style='font-size:14px'>// 0</p>
<h1 id='269' style='font-size:14px'>CM2_SHAPE_QUALITY_WARNING,</h1>
<br><p id='270' data-category='paragraph' style='font-size:14px'>// -10</p>
<br><p id='271' data-category='paragraph' style='font-size:14px'>// -11</p>
<br><p id='272' data-category='paragraph' style='font-size:14px'>// -12</p>
<br><h1 id='273' style='font-size:14px'>CM2_NON_CLOSED_MANIFOLD_WARNING</h1>
<br><p id='274' data-category='paragraph' style='font-size:14px'>// -13</p>
<br><p id='275' data-category='paragraph' style='font-size:14px'>};</p>
<caption id='276' style='font-size:14px'>Table 5 – Warning codes enum.</caption>
<table id='277' style='font-size:18px'><thead></thead><tbody><tr><td>CM�_NO_WARNING</td><td>OK, no problem.</td></tr><tr><td>CM�_NODES_LIMIT_WARNING</td><td>The node limit has been reached and the mesh may be far from optimal.</td></tr><tr><td>CM�_INTERRUPTION</td><td>The user has aborted the run (through the interrupt handler). The final mesh may be empty or valid but of poor quality.</td></tr><tr><td>CM�_SHAPE_QUALITY_WARNING</td><td>The final mesh is valid but at least one of the elements is very bad (shape quality < 0.01). Reduce min_h, max_h. Increase patch_angle_tolerance, strain_tolerance, optim_tolerance…</td></tr><tr><td>CM�_NON_CLOSED_MANIFOLD_ WARNING</td><td>The 3-D surface mesh could not be made watertight. This warning can be raised only in the closed-manifold mode (closed_ manifold_flag = true).</td></tr></tbody></table>
<p id='278' data-category='paragraph' style='font-size:14px'>Table 6 – Warning codes.</p>
<table id='279' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>15</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 16</div>
<header id='280' style='font-size:20px'>Example</header>
<p id='281' data-category='paragraph' style='font-size:14px'>if (data.warning_raised())</p>
<br><p id='282' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='283' data-category='paragraph' style='font-size:14px'>// Warning, do something according to data.warning_code (remesh again,<br>// increase optimisation level...)</p>
<br><p id='284' data-category='paragraph' style='font-size:14px'>}</p>
<table id='285' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 16</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 17</div>
<h1 id='286' style='font-size:22px'>3. Settings of the remeshers</h1>
<br><p id='287' data-category='paragraph' style='font-size:18px'>CM2 SurfRemesh T3/Q4 have several settings that can change drastically their outputs. They are gathered into<br>a structure of type settings_type as a public field of the remeshers:</p>
<p id='288' data-category='paragraph' style='font-size:14px'>cm2::surfremesh_t3::mesher::settings_type settings;<br>cm2::surfremesh_q4::mesher::settings_type settings;</p>
<h1 id='289' style='font-size:20px'>Minimum size of the elements</h1>
<p id='290' data-category='paragraph' style='font-size:18px'>min_h. Default = 0. (should be reset by user).</p>
<br><p id='291' data-category='paragraph' style='font-size:18px'>Lower bound for the metric map used to generate the new mesh. This value controls the size of the smallest<br>elements along the skeleton lines5. The user's specified values in metrics are not limited by this value.</p>
<h1 id='292' style='font-size:20px'>Maximum size of the elements</h1>
<p id='293' data-category='paragraph' style='font-size:18px'>max_h. Default = DBL_MAX (should be reset by user).</p>
<br><p id='294' data-category='paragraph' style='font-size:18px'>Upper bound for the metric map used to generate the new mesh. This value controls the size of the largest<br>elements along the skeleton lines. The user's specified values in metrics are not limited by this value.</p>
<h1 id='295' style='font-size:20px'>Target mesh size</h1>
<p id='296' data-category='paragraph' style='font-size:18px'>target_h. Default = 0 (should be reset by user).</p>
<br><p id='297' data-category='paragraph' style='font-size:18px'>Whereas min_h and max_h control the mesh size along the skeleton lines, target_h controls the mesh size<br>inside the patches.</p>
<p id='298' data-category='paragraph' style='font-size:18px'>With the default value (target_h = 0) the size map is interpolated inside the patches from the bounding<br>skeleton lines. With small geometric features (fillets, ridges, holes…) the skeleton lines may be remeshed quite<br>fine (as low as min_h) which in turn, through the default interpolation inside the patches, can lead to over-fine<br>mesh and excessive number of elements. Setting target_h (for instance to same value as max_h) mitigates<br>this effect. The elements size tends (according to the max_gradation_2d parameter) toward this value (if > 0)<br>as we go away from the skeleton lines.</p>
<p id='299' data-category='paragraph' style='font-size:18px'>When min_h = max_h you can leave target_h = 0 (the default). However, when min_h << max_h, it’s a good<br>practice to set target_h to same value as max_h to keep the total number of elements as low as possible.</p>
<br><h1 id='300' style='font-size:20px'>Max chordal error</h1>
<p id='301' data-category='paragraph' style='font-size:18px'>max_chordal_error. Default = -0.02 (i.e. 2% of local radius).</p>
<br><p id='302' data-category='paragraph' style='font-size:18px'>Maximum chordal error allowed. The mesh size is reduced locally to limit the chordal error between the mesh<br>and the surface:</p>
<br><p id='303' data-category='list' style='font-size:18px'>• If negative, this value is relative to the local radii (for instance -0.01 => max chordal error = 1% of local radii).<br>• If positive, this value is absolute (for instance 0.1 => max chordal error = 0.1).</p>
<br><h1 id='304' style='font-size:20px'>Max gradation 1d</h1>
<p id='305' data-category='paragraph' style='font-size:18px'>max_gradation_1d. Positive value. Default = 0.5</p>
<p id='306' data-category='paragraph' style='font-size:14px'>5 However some elements may be smaller to satisfy geometric constraints.</p>
<table id='307' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 17</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 18</div>
<p id='308' data-category='paragraph' style='font-size:16px'>This parameter controls the gradation of the element sizes along the skeleton lines towards the max_h mesh<br>size. A value close to 0 leads to a more progressive variation (smoother) of the mesh sizes along the skeleton<br>lines.</p>
<p id='309' data-category='paragraph' style='font-size:16px'>When max_gradation_1d = 0, the sizes are linearly interpolated between the sizes at the skeleton nodes<br>(which depend on min_h, max_h and max_chordal_error).</p>
<br><h1 id='310' style='font-size:20px'>Max gradation 2d</h1>
<p id='311' data-category='paragraph' style='font-size:16px'>max_gradation_2d. Positive value. Default = 0.5</p>
<br><p id='312' data-category='paragraph' style='font-size:16px'>This parameter controls the gradation of the element sizes inside the patches towards the target_h mesh<br>size. A value close to 0 leads to a more progressive variation (smoother) of the mesh sizes inside patches.</p>
<br><p id='313' data-category='paragraph' style='font-size:16px'>When max_gradation_2d = 0, target_h is discarded and the sizes are linearly interpolated between sizes<br>along the skeleton lines.</p>
<h1 id='314' style='font-size:20px'>Patch angle tolerance</h1>
<p id='315' data-category='paragraph' style='font-size:16px'>patch_angle_tolerance. Default = 20.</p>
<br><p id='316' data-category='paragraph' style='font-size:16px'>Parameter used to delimit the patches (groups of connected triangles in the initial mesh).</p>
<br><p id='317' data-category='paragraph' style='font-size:16px'>An angle between two adjacent triangles greater than this value will draw a limit between two patches (we call<br>such limit a skeleton edge). A small value tends to give numerous small patches and the final mesh will be close<br>to the initial mesh but may be of poor quality. A big value tends to give fewer bigger patches. The remesher can<br>do a better job on big patches but the final mesh may be more distant from the initial mesh (increased<br>Hausdorff distance).</p>
<p id='318' data-category='paragraph' style='font-size:16px'>A value of 45° should be considered as the maximum for this parameter.</p>
<h1 id='319' style='font-size:20px'>Initial fixing tolerance</h1>
<p id='320' data-category='paragraph' style='font-size:16px'>fix_tolerance. Default = -0.0025 (i.e. 0.25% of min_h).</p>
<br><p id='321' data-category='paragraph' style='font-size:16px'>Controls the merging of nodes and the swapping of edges during the initial clean-up step.</p>
<br><p id='322' data-category='paragraph' style='font-size:16px'>This parameter is the maximum allowable distance (absolute or relative to min_h) that a node merging or an<br>edge swapping can induce on the initial surface.</p>
<br><p id='323' data-category='paragraph' style='font-size:16px'>If fix_tolerance > 0, fix_tolerance is taken as an absolute tolerance.<br>If fix_tolerance < 0, this is a relative tolerance. The distance of merging is then computed as the product of<br>‐fix_tolerance and min_h or, if min_h is null, as the product of -fix_tolerance and a mean of the<br>lengths of the edges in the initial mesh.</p>
<br><p id='324' data-category='paragraph' style='font-size:16px'>This parameter should be used only to treat pathologically close nodes that are present in the initial mesh.</p>
<br><p id='325' data-category='paragraph' style='font-size:16px'>A value of 1% (i.e. -0.01) should be considered as the maximum for this parameter.</p>
<h1 id='326' style='font-size:20px'>Final optimization tolerance</h1>
<p id='327' data-category='paragraph' style='font-size:16px'>optim_tolerance. Default = -0.05 (i.e. 5% of min_h).</p>
<br><p id='328' data-category='paragraph' style='font-size:16px'>Controls the merging of nodes and the swapping of edges during the final optimization step.</p>
<br><p id='329' data-category='paragraph' style='font-size:16px'>This parameter is the maximum allowable distance (absolute or relative to min_h) that a node merging or an<br>edge swapping can induce on the final surface.</p>
<br><p id='330' data-category='paragraph' style='font-size:16px'>If optim_tolerance > 0, optim_tolerance is taken as an absolute tolerance.</p>
<table id='331' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>18</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 19</div>
<p id='332' data-category='paragraph' style='font-size:16px'>If optim_tolerance < 0, this is a relative tolerance. The distance of merging is then computed as the product<br>of -optim_tolerance and min_h, or if min_h is null, as the product of -optim_tolerance and a mean of<br>the lengths of the edges in the initial mesh.</p>
<br><p id='333' data-category='paragraph' style='font-size:16px'>A value of 20% (i.e. -0.20) should be considered as the maximum for this parameter.</p>
<h1 id='334' style='font-size:20px'>Strain tolerance</h1>
<p id='335' data-category='paragraph' style='font-size:16px'>strain_tolerance. Default = 0.30</p>
<br><p id='336' data-category='paragraph' style='font-size:16px'>This is the maximum allowable strain for the elements in a patch when unfolded.</p>
<br><p id='337' data-category='paragraph' style='font-size:16px'>Set strain_tolerance = 0 if no strain is allowed. Only perfectly unfoldable patches will be selected in this<br>case (i.e. flat or simple-curved patches).<br>A small value tends to reduce the size of the patches. A large value tends to give fewer bigger patches.</p>
<br><p id='338' data-category='paragraph' style='font-size:16px'>A value of 0.60 should be considered as the maximum for this parameter.</p>
<br><h1 id='339' style='font-size:20px'>Initial clean-up</h1>
<h1 id='340' style='font-size:16px'>initial_cleanup_flag. Default = true.</h1>
<br><p id='341' data-category='paragraph' style='font-size:16px'>Flag to allow a clean-up of the initial mesh (node merging, gaps filling and topological fixing).</p>
<br><h1 id='342' style='font-size:20px'>Closing initial notches</h1>
<p id='343' data-category='paragraph' style='font-size:16px'>notch_closing_flag. Default = true.</p>
<br><p id='344' data-category='paragraph' style='font-size:16px'>Flag to allow the closing of notches during the clean-up phase. Triggers a specific algorithm within the initial<br>clean-up step to close open nodes (merged to the closest open nodes).</p>
<br><h1 id='345' style='font-size:16px'>Disabled when initial_cleanup_flag = false.</h1>
<h1 id='346' style='font-size:20px'>Closed manifolds</h1>
<p id='347' data-category='paragraph' style='font-size:16px'>closed_manifold_flag. Default = false.</p>
<br><p id='348' data-category='paragraph' style='font-size:16px'>Flag to tell if the 3-D surface should be considered as closed and simple (no internal faces) or not.</p>
<br><p id='349' data-category='paragraph' style='font-size:16px'>If true, a specific algorithm is used to correct the initial mesh when some elements are under-connected or<br>over-connected (edges not shared exactly by two elements).<br>The remesher emits a warning (CM2_NON_CLOSED_MANIFOLD_WARNING) when it cannot enforce all edges in<br>the initial mesh to be shared by exactly two elements.</p>
<h1 id='350' style='font-size:20px'>Line proximity detection</h1>
<p id='351' data-category='paragraph' style='font-size:16px'>line_proximity_detection_flag. Default = true.</p>
<br><p id='352' data-category='paragraph' style='font-size:16px'>Flag to take into account (true) or not (false) the distance between skeleton lines for the size of the elements.</p>
<br><p id='353' data-category='paragraph' style='font-size:16px'>If true, the size of the elements along close skeleton line is reduced (depending on the distance between<br>these skeleton lines, min_h, max_gradation_1d, max_gradation_2d).<br>If false, the distance between the skeleton lines isn't considered for the sizes, but their lengths remain<br>considered near their extremities (and these mesh sizes can be propagated along the skeleton lines and inside<br>the surface patches through max_gradation_1d and max_gradation_2d).</p>
<table id='354' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>19</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 20</div>
<h1 id='355' style='font-size:20px'>All-quad or quad-dominant mode (CM2 SurfRemesh Q4)</h1>
<p id='356' data-category='paragraph' style='font-size:16px'>all_quad_flag. Default = false.</p>
<br><p id='357' data-category='paragraph' style='font-size:16px'>Flag to force the generation of an all-quad mesh (no triangle):</p>
<br><p id='358' data-category='list' style='font-size:16px'>• false: generates a mixed triangle-quad mesh (the default).<br>• true: generate a all-quad mesh.</p>
<br><p id='359' data-category='paragraph' style='font-size:16px'>A good all-quad mesh can only be generated in simple cases. If possible, rather use the mixed quad-dominant<br>generation mode.</p>
<br><p id='360' data-category='paragraph' style='font-size:16px'>When this flag is set to false, parameter quadrangle_weight can be used to control the trade-off between<br>meshes with more numerous quads and meshes with more numerous triangles but of better shape quality.</p>
<br><h1 id='361' style='font-size:20px'>Remeshing</h1>
<p id='362' data-category='paragraph' style='font-size:16px'>remesh_flag. Default = true.</p>
<br><p id='363' data-category='paragraph' style='font-size:16px'>This flag enables the remeshing of the patches.</p>
<br><p id='364' data-category='paragraph' style='font-size:16px'>Set this flag to false if you don’t want to remesh but only to optimize it (or simply to compute the partition<br>patches in the initial mesh, the skeleton edges and the skeleton nodes).</p>
<p id='365' data-category='paragraph' style='font-size:16px'>☞ Note that the initial clean-up and final optimization, if not disabled, may still modify the mesh.</p>
<h1 id='366' style='font-size:20px'>Parity along the skeleton lines</h1>
<p id='367' data-category='paragraph' style='font-size:16px'>force_even_flag. Default = false.</p>
<br><p id='368' data-category='paragraph' style='font-size:16px'>Flag to force the number of edges in the final skeleton lines to be even.</p>
<br><p id='369' data-category='paragraph' style='font-size:16px'>This is always the case with CM2 SurfRemesh Q4 when all_quad_flag is set to true.</p>
<h1 id='370' style='font-size:20px'>Node smoothing</h1>
<p id='371' data-category='paragraph' style='font-size:16px'>node_smoothing_flag. Default = true.</p>
<br><p id='372' data-category='paragraph' style='font-size:16px'>This flag controls the node-smoothing scheme in the optimization step.</p>
<br><p id='373' data-category='paragraph' style='font-size:16px'>When remeshing_flag = false, node smoothing doesn't change the mesh connectivity, only the<br>coordinates of nodes.</p>
<br><p id='374' data-category='paragraph' style='font-size:16px'>This flag has no effect when the optimization step is disabled (optim_level = 0).</p>
<h1 id='375' style='font-size:20px'>Node inserting</h1>
<p id='376' data-category='paragraph' style='font-size:16px'>node_inserting_flag. Default = true.</p>
<br><p id='377' data-category='paragraph' style='font-size:16px'>This flag controls the node-inserting scheme in the optimization step.</p>
<br><p id='378' data-category='paragraph' style='font-size:16px'>When remeshing_flag = false, node inserting increases the number of nodes, changes the mesh<br>connectivity, but doesn't change the other nodes' coordinates.</p>
<br><p id='379' data-category='paragraph' style='font-size:16px'>This flag has no effect when the optimization step is disabled (optim_level = 0).</p>
<table id='380' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 20</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 21</div>
<h1 id='381' style='font-size:20px'>Node removing</h1>
<p id='382' data-category='paragraph' style='font-size:16px'>node_removing_flag. Default = true.</p>
<br><p id='383' data-category='paragraph' style='font-size:16px'>This flag controls the node-removing scheme in the optimization step.</p>
<br><p id='384' data-category='paragraph' style='font-size:16px'>When remeshing_flag = false, node removing decreases the number of nodes, changes the mesh<br>connectivity, but doesn't change the other nodes' coordinates.</p>
<br><p id='385' data-category='paragraph' style='font-size:16px'>This flag has no effect when the optimization step is disabled (optim_level = 0).</p>
<h1 id='386' style='font-size:20px'>Shell remeshing</h1>
<p id='387' data-category='paragraph' style='font-size:16px'>shell_remeshing_flag. Default = true.</p>
<br><p id='388' data-category='paragraph' style='font-size:16px'>This flag controls the local remeshing scheme in the optimization step.</p>
<br><p id='389' data-category='paragraph' style='font-size:16px'>When remeshing_flag = false, shell remeshing changes the mesh connectivity, but doesn't change the<br>number of nodes nor their coordinates.</p>
<br><p id='390' data-category='paragraph' style='font-size:16px'>This flag has no effect when the optimization step is disabled (optim_level = 0).</p>
<br><h1 id='391' style='font-size:20px'>Final optimization</h1>
<p id='392' data-category='paragraph' style='font-size:16px'>final_optimization_flag. Default = true.</p>
<br><p id='393' data-category='paragraph' style='font-size:16px'>Flag to allow the final inter-patch optimization scheme.</p>
<br><p id='394' data-category='paragraph' style='font-size:16px'>If true, nodes can be merged together if they are within the merging distance (optim_tolerance) and edges<br>can be swapped if the induced geometric error is lower than optim_tolerance.</p>
<h1 id='395' style='font-size:20px'>Computation of the size-qualities histogram</h1>
<h1 id='396' style='font-size:16px'>compute_Qh_flag. Default = false.</h1>
<br><p id='397' data-category='paragraph' style='font-size:16px'>Before exiting the process, this flag tells the mesher to compute the histogram of the size quality of all the<br>edges in the new mesh.</p>
<h1 id='398' style='font-size:20px'>Deep analyzing</h1>
<br><p id='399' data-category='paragraph' style='font-size:16px'>force_deep_analyzing_flag. Default = false.</p>
<br><p id='400' data-category='paragraph' style='font-size:16px'>Flag to force deep analyzing of the model.</p>
<br><p id='401' data-category='paragraph' style='font-size:16px'>If set to false, the patch-finding algorithm starts in 'fast' mode: it assumes first that the flat patches have no<br>self-intersection and check the meshability for curved patches only.</p>
<br><p id='402' data-category='paragraph' style='font-size:16px'>In case of remeshing failure (when a flat patch has self-intersection), it falls back to the deep-analyzing mode<br>(where all patches are systematically checked for non self-intersection and meshability).<br>If you know that your model has flat self-intersections, you can save some CPU time by setting this flag to true<br>from the beginning.</p>
<table id='403' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 21</td></tr></tbody></table>
<br><p id='404' data-category='paragraph' style='font-size:16px'>☞ In patch-finding-only mode (remesh_flag = false, optim_level = 0) where no remeshing is performed, the<br>algorithm cannot fall back to deep-analyzing mode. Hence in case of flat self-intersections, correct patch-finding<br>requires this flag to bet set to true.</p>
</div>
<div class="page">
<div class="page-header">Page 22</div>
<h1 id='405' style='font-size:20px'>Pattern for structured meshes (CM2 SurfRemesh T3)</h1>
<p id='406' data-category='paragraph' style='font-size:18px'>structured_pattern. Default = -1</p>
<br><p id='407' data-category='paragraph' style='font-size:18px'>This option controls the way the generators does the structured meshes when possible (on rectangular-like<br>patches). It can take four values:</p>
<br><p id='408' data-category='list' style='font-size:18px'>• -1: the meshes are always done with the frontal-Delaunay algorithm (the default).<br>• 0: when possible, generates structured left-oriented meshes (simply oriented pattern).<br>• 1: when possible, generates structured right-oriented meshes (simply oriented pattern).<br>• 2+: when possible, generates structured UJ meshes (Union Jack pattern).</p>
<p id='409' data-category='paragraph' style='font-size:20px'>Pattern for structured meshes (CM2 SurfRemesh Q4)</p>
<p id='410' data-category='paragraph' style='font-size:18px'>structured_flag. Default = true.</p>
<br><p id='411' data-category='paragraph' style='font-size:18px'>This option controls the way the generators do the structured meshes when possible (on rectangular-like<br>patches):</p>
<br><p id='412' data-category='list' style='font-size:18px'>• true: when possible, generates structured (grid-like) meshes (the default).<br>• false: the quad meshes are always done with the frontal-Delaunay algorithm6.</p>
<br><h1 id='413' style='font-size:20px'>Limit on the number of nodes</h1>
<p id='414' data-category='paragraph' style='font-size:18px'>nodes_limit. Default = UINT_MAX.</p>
<br><p id='415' data-category='paragraph' style='font-size:18px'>When the mesh generator reaches this limit, the CM2_NODES_LIMIT_WARNING is issued and new nodes are<br>no longer created. In this case, the quality of some elements can be far from optimal. When the limit is so low<br>that the remesher cannot even insert all the skeleton nodes the CM2_NODES_LIMIT_ERROR is raised and the<br>mesh is aborted.</p>
<h1 id='416' style='font-size:20px'>Optimization level</h1>
<p id='417' data-category='paragraph' style='font-size:18px'>optim_level. Integer between 0 and 10. Default = 3</p>
<br><p id='418' data-category='paragraph' style='font-size:18px'>A null value makes the mesher to skip the optimization step. The speed is maximal but the quality may be poor.<br>From value 1 on, the optimizer algorithm uses several techniques to improve both the shape quality and the<br>size quality of the elements, such as node smoothing, edge swapping, node insertion and node removal.<br>Level 3 is usually a good trade-off between quality and speed.</p>
<h1 id='419' style='font-size:20px'>Weight on shape quality</h1>
<br><p id='420' data-category='paragraph' style='font-size:18px'>shape_quality_weight. Value between 0 and 1. Default = 0.6</p>
<br><p id='421' data-category='paragraph' style='font-size:18px'>This parameter controls the trade-off between shape optimization and size optimization. It is the weight of the<br>shape quality in the measure of the global quality of an element.<br>The default value (0.6) gives a slight preference to the shape quality over the size quality.</p>
<p id='422' data-category='paragraph' style='font-size:20px'>Weight on quadrangles (CM2 SurfRemesh Q4)</p>
<br><p id='423' data-category='paragraph' style='font-size:18px'>quadrangle_weight. Value between 0 and 1. Default = 0.70</p>
<br><p id='424' data-category='paragraph' style='font-size:18px'>Preference for quadrangles vs. triangles.</p>
<br><p id='425' data-category='paragraph' style='font-size:18px'>Weight between 0 and 1 indicating the preference for quadrangles over triangles, when a all-quad mesh cannot<br>be generated (i.e. when there is no parity on the boundaries or all_quad_flag = false).</p>
<p id='426' data-category='paragraph' style='font-size:14px'>6 This may give also structured meshes. The true option enforces this and is faster whenever a structured mesh can be generated.</p>
<table id='427' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 22</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 23</div>
<p id='428' data-category='paragraph' style='font-size:18px'>With quadrangle_weight = 0, quadrangles are never used. With quadrangle_weight = 0.5, quadrangles<br>are used only when they improve the quality of the mesh. For values between 0.5 and 1, quadrangles are more<br>and more used even if this lead to a lesser quality of the mesh. With quadrangle_weight = 1, the minimum<br>number of triangles are used (but may not be null).</p>
<br><p id='429' data-category='paragraph' style='font-size:18px'>This parameter is used only when all_quad_flag = false.</p>
<br><p id='430' data-category='paragraph' style='font-size:18px'>This parameter is not the ratio between quads and triangles. Furthermore, there is no linearity between this<br>weight and the ratio between quads and triangles.</p>
<br><h1 id='431' style='font-size:20px'>Minimum quadrangle quality (CM2 SurfRemesh Q4)</h1>
<p id='432' data-category='paragraph' style='font-size:18px'>min_Q4_angle_quality. Double value between 0 and 1. Default = 0 (no minimum).</p>
<br><p id='433' data-category='paragraph' style='font-size:18px'>Minimum acceptable angle quality for the quadrangles. This parameter is taken into account in mixed mode<br>only (all_quad_flag = false).</p>
<br><p id='434' data-category='paragraph' style='font-size:18px'>This quality threshold is based on the angle quality of the quads (not the geometric quality which takes the<br>length ratios also into account). The angle quality is computed as the minimum of the four angles at summits7</p>
<br><p id='435' data-category='paragraph' style='font-size:18px'>Set min_Q4_angle_quality = 1 - � to allow rectangles only (quads with right angles only). In this case, be<br>aware that when boundaries are not straight very few rectangles may be generated.</p>
<br><h1 id='436' style='font-size:20px'>Minimum warp quality (CM2 SurfRemesh Q4)</h1>
<p id='437' data-category='paragraph' style='font-size:18px'>min_Q4_warp_quality. Double value between 0 and 1. Default = 0.50 (maximum warpage of 90°).</p>
<br><p id='438' data-category='paragraph' style='font-size:18px'>Minimum acceptable warp quality for the quadrangles. Quads with warp quality below this threshold are split<br>into two triangles. This parameter is taken into account in mixed mode only (all_quad_flag = false).</p>
<br><p id='439' data-category='paragraph' style='font-size:18px'>If � is the maximum angle between the normals of two opposite split triangles. The warp quality of a<br>quadrangle is defined as 1 - �/π. The warp quality of a flat quad equals to 1 (perfect) whereas its geometric<br>quality is only equal to 1 when the quad is a square.</p>
<br><p id='440' data-category='paragraph' style='font-size:18px'>Set min_Q4_warp_quality = 1 - � to allow for flat quads only. In this case, be aware that very few rectangles<br>may be generated (mostly triangles).</p>
<br><h1 id='441' style='font-size:20px'>Upper bound on edges length</h1>
<br><p id='442' data-category='paragraph' style='font-size:18px'>length_upper_bound. Value greater than 0. Default = 1.414</p>
<br><p id='443' data-category='paragraph' style='font-size:18px'>This parameter is used to limit the length of the edges in the generated mesh (normalized length). This is not a<br>strict enforcement however. Most of the edges will be shorter than this limit, but some may remain somewhat<br>longer. The default value (1.414) gives the optimal meshes with respect to the size qualities. With this default<br>value, the average edge length tends to be 1 (optimal edge quality on average).</p>
<br><p id='444' data-category='paragraph' style='font-size:18px'>Sometimes, it can be useful to limit the length of the edges to a shorter value (usually between 1 and 1.414),<br>and to accept an average value smaller than 1 (sub-optimal edge qualities on average).</p>
<br><p id='445' data-category='paragraph' style='font-size:20px'>Minimum number of edges along loops</p>
<p id='446' data-category='paragraph' style='font-size:18px'>min_NE_for_loops. Integer greater or equal to 3. Default = 6</p>
<br><p id='447' data-category='paragraph' style='font-size:18px'>This parameter can be useful when holes or loops need to be remeshed with a minimum number of edges.<br>Works only for surface domains, not solid domains.</p>
<p id='448' data-category='paragraph' style='font-size:14px'>7 The angle quality of any flat rectangle equals to 1 whereas its geometric quality only equals 1 for a square.</p>
<table id='449' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>23</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 24</div>
<h1 id='450' style='font-size:22px'>Maximum number of edges along loops</h1>
<br><p id='451' data-category='paragraph' style='font-size:18px'>max_NE_for_loops. Integer greater or equal to 3. Default = UINT_MAX.</p>
<br><p id='452' data-category='paragraph' style='font-size:18px'>This parameter can be useful when holes or loops need to be remeshed with a limited number of edges. Works<br>only for surface domains, not solid domains.</p>
<h1 id='453' style='font-size:22px'>Number of threads for parallel processing</h1>
<p id='454' data-category='paragraph' style='font-size:18px'>num_threads. Integer ≥ 0. Default = 0 (= the number of logical processors on the running CPU).</p>
<br><p id='455' data-category='paragraph' style='font-size:18px'>If num_threads = 1 the mesh generator runs on a single thread. Values are capped by the number of logical<br>processors on the running CPU.</p>
<h1 id='456' style='font-size:22px'>Display handler</h1>
<p id='457' data-category='paragraph' style='font-size:18px'>display_hdl. Default = NULL.</p>
<br><p id='458' data-category='paragraph' style='font-size:18px'>This user-supplied function is used to handle the messages issued by the mesher.</p>
<p id='459' data-category='paragraph' style='font-size:14px'>typedef void (*display_handler_type) (void* pass_thru, unsigned level, const char* msg);</p>
<p id='460' data-category='paragraph' style='font-size:18px'>The pass_thru parameter is the pointer set by the user in the settings structure.</p>
<br><p id='461' data-category='paragraph' style='font-size:18px'>The level parameter gives the importance of the message:</p>
<br><p id='462' data-category='list' style='font-size:18px'>• 0: Important (for instance entering a major step of the process)<br>• 1: Somewhat important (minor step of the process)<br>• 2+: Not serious (debug messages that should not be printed for end-users).</p>
<br><p id='463' data-category='paragraph' style='font-size:18px'>The msg parameter is the string message (length ≤ 255 characters).</p>
<br><p id='464' data-category='paragraph' style='font-size:18px'>Note: This handler is not called in case of error or warning. At the end of the run, the user must check for an<br>error or a warning in the fields data_type::error_code and data_type::warning_code and then (in<br>case of error or warning) process the string data_type::msg1.</p>
<p id='465' data-category='paragraph' style='font-size:20px'>Example</p>
<p id='466' data-category='paragraph' style='font-size:14px'>void my_display_handler (void* pass_thru, unsigned level, const char* msg)</p>
<br><p id='467' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='468' data-category='paragraph' style='font-size:14px'>window_type* my_window = static_cast<window_type*>(pass_thru);<br>my_window->show(msg);</p>
<br><p id='469' data-category='paragraph' style='font-size:14px'>}</p>
<br><p id='470' data-category='paragraph' style='font-size:14px'>cm2::surfremesh_t3::mesher my_mesher;<br>cm2::surfremesh_t3::mesher::data_type my_data(pos, connectB);<br>window_type my_window; // A “window” instance.</p>
<br><p id='471' data-category='paragraph' style='font-size:14px'>my_window.init(...); // Initialize the window somehow.<br>my_mesher.settings.display_hdl = &my_display_handler;<br>my_mesher.settings.pass_thru = static_cast<void*>(&my_window);<br>my_mesher.run(my_data); // Will call my_display_handler with “my_window”<br>// in pass_thru parameter.</p>
<table id='472' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>24</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 25</div>
<h1 id='473' style='font-size:22px'>Interrupt handler</h1>
<p id='474' data-category='paragraph' style='font-size:18px'>interrupt_hdl. Default = NULL. Used in all modes.</p>
<br><p id='475' data-category='paragraph' style='font-size:18px'>Can be useful for big meshes (several thousands of elements).</p>
<p id='476' data-category='paragraph' style='font-size:14px'>typedef bool (*interrupt_handler_type) (void* pass_thru, double progress);</p>
<p id='477' data-category='paragraph' style='font-size:18px'>This handler, if any, is called periodically by the tool to check for a stop signal. When the handler returns true,<br>the tool aborts and the final mesh is usually non valid (some patches may be missing).</p>
<br><p id='478' data-category='paragraph' style='font-size:18px'>An interruption also raises the CM2_INTERRUPTION warning.</p>
<br><p id='479' data-category='paragraph' style='font-size:18px'>The pass_thru parameter is the void* pointer set by the user in settings_type::pass_thru (the same<br>parameter is also passed to the display handler).<br>The parameter progress (between 0 and 1) gives a hint about the progress of the meshing.</p>
<br><h1 id='480' style='font-size:20px'>Example (time-out)</h1>
<p id='481' data-category='paragraph' style='font-size:14px'>bool my_interrupt_handler (void* pass_thru, double progress)</p>
<br><p id='482' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='483' data-category='paragraph' style='font-size:14px'>clock_t* t_timeout = static_cast<clock_t*>(pass_thru);<br>return clock() > (*t_timeout);</p>
<br><p id='484' data-category='paragraph' style='font-size:14px'>}</p>
<br><p id='485' data-category='paragraph' style='font-size:14px'>cm2::surfremesh_t3::mesher my_mesher;<br>cm2::surfremesh_t3::mesher::data_type my_data(pos, connectB);<br>clock_t my_t_timeout(::clock() + 1E3*CLOCKS_PER_SEC);</p>
<br><p id='486' data-category='paragraph' style='font-size:14px'>my_mesher.settings.interrupt_hdl = &my_interrupt_handler;<br>my_mesher.settings.pass_thru = static_cast<void*>(&my_t_timeout);<br>my_mesher.run(my_data); // Will stop if duration > 1000 s.</p>
<h1 id='487' style='font-size:20px'>Example (progress bar)</h1>
<p id='488' data-category='paragraph' style='font-size:14px'>bool my_interrupt_handler (void* pass_thru, double progress)</p>
<br><p id='489' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='490' data-category='paragraph' style='font-size:14px'>window_type* my_window = static_cast<window_type*>(pass_thru);<br>std::string msg(“Progress: “);</p>
<br><p id='491' data-category='paragraph' style='font-size:14px'>msg += std::to_string(static_cast<int>(100.*progress)) + “ %”;<br>my_window->show(msg);<br>return false;</p>
<br><p id='492' data-category='paragraph' style='font-size:14px'>}</p>
<br><p id='493' data-category='paragraph' style='font-size:14px'>cm2::surfremesh_t3::mesher my_mesher;<br>cm2::surfremesh_t3::mesher::data_type my_data(pos, connectB);<br>window_type my_window; // A window instance.</p>
<br><p id='494' data-category='paragraph' style='font-size:14px'>my_window.init(...); // Initialize the window somehow.<br>my_mesher.settings.interrupt_hdl = &my_interrupt_handler;<br>my_mesher.settings.pass_thru = static_cast<void*>(&my_window);<br>my_mesher.run(my_data); // Will call my_interrupt_handler with “my_window”<br>// in pass_thru parameter.</p>
<h1 id='495' style='font-size:22px'>Pass-through pointer</h1>
<h1 id='496' style='font-size:18px'>pass_thru. Default = NULL.</h1>
<br><p id='497' data-category='paragraph' style='font-size:18px'>Void pointer (to be cast) to pass some user structure/class to the display handler and to the interruption</p>
<table id='498' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 25</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 26</div>
<p id='499' data-category='paragraph' style='font-size:20px'>handler.</p>
<h1 id='500' style='font-size:14px'>struct settings_type</h1>
<br><p id='501' data-category='paragraph' style='font-size:14px'>{</p>
<br><table id='502' style='font-size:14px'><thead></thead><tbody><tr><td>double</td><td>min_h;</td></tr><tr><td>double</td><td>max_h;</td></tr><tr><td>double</td><td>target_h;</td></tr><tr><td>double</td><td>max_chordal_error;</td></tr><tr><td>double</td><td>max_gradation_1d;</td></tr><tr><td>double</td><td>max_gradation_2d;</td></tr><tr><td>double</td><td>patch_angle_tolerance;</td></tr><tr><td>double</td><td>fix_tolerance;</td></tr><tr><td>double</td><td>optim_tolerance;</td></tr><tr><td>double</td><td>strain_tolerance;</td></tr><tr><td>bool</td><td>initial_cleanup_flag;</td></tr><tr><td>bool</td><td>notch_closing_flag;</td></tr><tr><td>bool</td><td>closed_manifold_flag;</td></tr><tr><td>bool</td><td>line_proximity_detection_flag;</td></tr><tr><td>bool</td><td>remesh_flag;</td></tr><tr><td>bool</td><td>force_even_flag;</td></tr><tr><td>bool</td><td>node_smoothing_flag;</td></tr><tr><td>bool</td><td>node_inserting_flag;</td></tr><tr><td>bool</td><td>node_removing_flag;</td></tr><tr><td>bool</td><td>shell_remeshing_flag;</td></tr><tr><td>bool</td><td>final_optimization_flag;</td></tr><tr><td>bool</td><td>compute_Qh_flag;</td></tr><tr><td>bool</td><td>force_deep_analyzing_flag;</td></tr><tr><td>int</td><td>structured_pattern;</td></tr><tr><td>unsigned</td><td>nodes_limit;</td></tr><tr><td>unsigned</td><td>optim_level;</td></tr><tr><td>double</td><td>shape_quality_weight;</td></tr><tr><td>double</td><td>length_upper_bound;</td></tr><tr><td>unsigned</td><td>min_NE_for_loops;</td></tr><tr><td>unsigned</td><td>max_NE_for_loops;</td></tr><tr><td>unsigned</td><td>num_threads;</td></tr><tr><td>display_handler_type</td><td>display_hdl;</td></tr><tr><td>interrupt_handler_type void*</td><td>interrupt_hdl; pass_thru;</td></tr></tbody></table>
<br><p id='503' data-category='paragraph' style='font-size:14px'>};</p>
<caption id='504' style='font-size:14px'>Table 7 – The settings_type structure (CM2 SurfRemesh T3).</caption>
<table id='505' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 26</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 27</div>
<table id='506' style='font-size:14px'><thead></thead><tbody><tr><td colspan="2">struct settings_type {</td></tr><tr><td>double</td><td>min_h;</td></tr><tr><td>double</td><td>max_h;</td></tr><tr><td>double</td><td>target_h;</td></tr><tr><td>double</td><td>max_chordal_error;</td></tr><tr><td>double</td><td>max_gradation_1d;</td></tr><tr><td>double</td><td>max_gradation_2d;</td></tr><tr><td>double</td><td>patch_angle_tolerance;</td></tr><tr><td>double</td><td>fix_tolerance;</td></tr><tr><td>double</td><td>optim_tolerance;</td></tr><tr><td>double</td><td>strain_tolerance;</td></tr><tr><td>bool</td><td>initial_cleanup_flag;</td></tr><tr><td>bool</td><td>notch_closing_flag;</td></tr><tr><td>bool</td><td>closed_manifold_flag;</td></tr><tr><td>bool</td><td>line_proximity_detection_flag;</td></tr><tr><td>bool</td><td>remesh_flag;</td></tr><tr><td>bool</td><td>all_quad_flag;</td></tr><tr><td>bool</td><td>force_even_flag;</td></tr><tr><td>bool</td><td>node_smoothing_flag;</td></tr><tr><td>bool</td><td>node_inserting_flag;</td></tr><tr><td>bool</td><td>node_removing_flag;</td></tr><tr><td>bool</td><td>shell_remeshing_flag;</td></tr><tr><td>bool</td><td>final_optimization_flag;</td></tr><tr><td>bool</td><td>compute_Qh_flag;</td></tr><tr><td>bool</td><td>force_deep_analyzing_flag;</td></tr><tr><td>bool</td><td>structured_flag;</td></tr><tr><td>unsigned</td><td>nodes_limit;</td></tr><tr><td>unsigned</td><td>optim_level;</td></tr><tr><td>double</td><td>shape_quality_weight;</td></tr><tr><td>double</td><td>quadrangle_weight;</td></tr><tr><td>double</td><td>min_Q4_angle_quality;</td></tr><tr><td>double</td><td>length_upper_bound;</td></tr><tr><td>unsigned</td><td>min_NE_for_loops;</td></tr><tr><td>unsigned</td><td>max_NE_for_loops;</td></tr><tr><td>unsigned</td><td>num_threads;</td></tr><tr><td>display_handler_type</td><td>display_hdl;</td></tr><tr><td>interrupt_handler_type</td><td>interrupt_hdl;</td></tr><tr><td>void*</td><td>pass_thru;</td></tr><tr><td>};</td><td></td></tr></tbody></table>
<caption id='507' style='font-size:14px'>Table 8 – The settings_type structure (CM2 SurfRemesh Q4).</caption>
<p id='508' data-category='paragraph' style='font-size:18px'>Most useful fields are min_h, max_h, optim_level (plus all_quad_flag for CM2 SurfRemesh Q4) and<br>possibly the handlers. Users can also adapt patch_angle_tolerance, max_chordal_error or optim_<br>tolerance to the specificity of her/his surfaces (to reduce further the Hausdorff error distance between the<br>meshes). Other parameters are rarely useful and should be left to expert users only.</p>
<h1 id='509' style='font-size:20px'>Function members</h1>
<p id='510' data-category='paragraph' style='font-size:18px'>The settings_type is equipped with with default constructor and some utility members:</p>
<p id='511' data-category='paragraph' style='font-size:14px'>// Constructor.<br>settings_type();</p>
<br><p id='512' data-category='paragraph' style='font-size:14px'>// Members.<br>bool valid() const;<br>int check() const;<br>void reset();<br>void save (const char* filename) const;<br>int load (const char* filename);</p>
<caption id='513' style='font-size:14px'>Table 9 – The settings_type function members.</caption>
<table id='514' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual 27</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 28</div>
<h1 id='515' style='font-size:20px'>4. General scheme of the remeshers</h1>
<figure id='516'><img style='font-size:16px' alt="INITIALIZATION
INITIAL CLEANING
(if initial_cleanup_flag)
Merge nodes too close to each other and swap pathological edges
(using fix_tolerance, notch_closing_flag,
closed_manifold_flag)
PATCH DETECTION
Computes patches, skeleton lines and skeleton nodes
(using patch_angle_tolerance, strain_tolerance,
max_chordal_error)
METRICS
Set the mesh-size at skeleton nodes if missing
(using data.metrics, min_h, max_h,
max_chordal_error, max_gradation_1d)
REMESH SKELETON LINES
(if remesh_flag, using force_even_flag)
REMESH AND OPTIMIZE PATCHES
Unfold patches and flatten to the Z=0 plane.
Remesh patches (if remesh_flag, using target_h, max_gradataion_2d).
Optimize within each patch (using.optim_level, node_smoothing_flag,
node_inserting_flag, node_removing_flag, shell_remeshing_flag).
Map back to the initial 3D surface.
FINAL OPTIMIZATION
(if final_optimization_flag)
Inter-patches optimizations
(using optim_tolerance, optim_level)
FINALIZATION" data-coord="top-left:(227,226); bottom-right:(992,1468)" /></figure>
<caption id='517' style='font-size:14px'>Figure 2 – General scheme of the remeshers.</caption>
<table id='518' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 rev. February 2025</td><td>CM2 SurfRemesh® T3/Q4 - reference manual</td><td>28</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 29</div>
<p id='519' data-category='paragraph' style='font-size:14px'>https://www.computing-objects.com</p>
<br><p id='520' data-category='paragraph' style='font-size:14px'>© Computing Objects SARL - 25 rue du Maréchal Foch, 78000 Versailles, France.</p>
<br><p id='521' data-category='paragraph' style='font-size:14px'>Limited Liability Company with a capital of 100 000 €.<br>Registered at Versailles RCS under SIRET number 422 791 038 00033.<br>EU VAT registration FR59422791038.</p>
</div>

</body>
</html>
