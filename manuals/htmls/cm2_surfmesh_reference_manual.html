<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .page {
            page-break-after: always;
            margin-bottom: 50px;
            padding: 20px;
            border: 1px solid #ddd;
        }
        .page-header {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #333;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
        }
        table td, table th {
            border: 1px solid #ddd;
            padding: 8px;
        }
        pre, code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 3px;
        }
        pre {
            padding: 10px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
<!-- Model: document-parse-250618 -->
<div class="page">
<div class="page-header">Page 1</div>
<h1 id='0' style='font-size:20px'>CM2 SurfMesh® T3/Q4<br>for OpenCascade®</h1>
<br><h1 id='1' style='font-size:16px'>Version 5.6</h1>
<p id='2' data-category='paragraph' style='font-size:18px'>reference manual</p>
<p id='3' data-category='paragraph' style='font-size:14px'>Revision February 2025.<br>https://www.computing-objects.com<br>© Computing Objects SARL - 25 rue du Maréchal Foch, 78000 Versailles, France.</p>
</div>
<div class="page">
<div class="page-header">Page 2</div>
<h1 id='4' style='font-size:20px'>Forewords</h1>
<p id='5' data-category='paragraph' style='font-size:16px'>This manual is a reference manual for the classes data_type and settings_type of the surface mesh<br>generators for OpenCascade® Technology (OCCT) CM2 SurfMesh® T3 and CM2 SurfMesh® Q4 of the<br>CM2 MeshTools® SDK.</p>
<br><p id='6' data-category='paragraph' style='font-size:16px'>It is based on the HTML reference manual (Doxygen© generated).</p>
<br><p id='7' data-category='paragraph' style='font-size:16px'>For examples, please refer to the manual CM2 SurfMesh T3/Q4 - tutorials.</p>
<p id='8' data-category='paragraph' style='font-size:16px'>The source code of the CM2 MeshTools® SDK (full library) has been registered with the APP under Inter Deposit<br>number IDDN.FR.001.260002.00.R.P.1998.000.20700 (22/06/1998) and IDDN.<br>FR.001.250030.00.S.P.1999.000.20700 (16/06/1999) is regularly deposited since then.</p>
<br><p id='9' data-category='paragraph' style='font-size:16px'>The source code specific to CM2 SurfMesh® T3 and CM2 SurfMesh® Q4 together with their manual have been<br>registered with the APP under Inter Deposit number FR.001.480009.000.S.P.2019.000.20700 (20/11/2019) and<br>is regularly deposited since then.</p>
<table id='10' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>2</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 3</div>
<h1 id='11' style='font-size:20px'>Table of contents</h1>
<p id='12' data-category='index' style='font-size:16px'>Forewords .................................................................................................................................................. 2<br>1. Data of the meshers ............................................................................................................................. 5<br>Mesh sizes on vertices (user input) ...................................................................................................................................... 5<br>Mesh sizes on curves (user input) ........................................................................................................................................ 5<br>Mesh sizes on surfaces (user input) .................................................................................................................................... 6<br>Edges of curves ......................................................................................................................................................................... 6<br>Elements ..................................................................................................................................................................................... 6<br>Colors of edges ......................................................................................................................................................................... 7<br>Colors of elements ................................................................................................................................................................... 7<br>Merged vertices ........................................................................................................................................................................ 7<br>Merged curves ........................................................................................................................................................................... 7<br>Failed surfaces ........................................................................................................................................................................... 7<br>Histogram ................................................................................................................................................................................... 7<br>Errors and warnings ................................................................................................................................................................. 7<br>Complementary information ................................................................................................................................................. 8<br>Function members ................................................................................................................................................................... 9<br>2. Error and warning codes ................................................................................................................... 10<br>Error codes ............................................................................................................................................................................... 10<br>Warning codes ......................................................................................................................................................................... 11<br>3. Settings of the meshers ..................................................................................................................... 12<br>Default target mesh size ....................................................................................................................................................... 12<br>Minimum size .......................................................................................................................................................................... 12<br>Fixing tolerance ....................................................................................................................................................................... 12<br>Max chordal error .................................................................................................................................................................. 12<br>Max ratio between chordal errors ..................................................................................................................................... 13<br>Chordal control type .............................................................................................................................................................. 13<br>Maximum gradation of sizes ................................................................................................................................................ 13<br>Flag for all-quad or quad-dominant mode (CM2 SurfMesh Q4) ................................................................................. 14<br>Parity along the curves .......................................................................................................................................................... 14<br>Optimization level ................................................................................................................................................................... 14</p>
<table id='13' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>3</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 4</div>
<h1 id='14' style='font-size:20px'>Table of contents</h1>
<p id='15' data-category='paragraph' style='font-size:16px'>Weight on quadrangles (CM2 SurfMesh Q4) ................................................................................................................... 14<br>Minimum acceptable quadrangle quality (CM2 SurfMesh Q4) ................................................................................... 15<br>Minimum acceptable warp quality (CM2 SurfMesh Q4) ............................................................................................... 15<br>High-order type ....................................................................................................................................................................... 15<br>High-order mode .................................................................................................................................................................... 15<br>Number of threads for parallel processing ...................................................................................................................... 16<br>Display handler ....................................................................................................................................................................... 16<br>Interrupt handler .................................................................................................................................................................... 16<br>Pass-through pointer ............................................................................................................................................................. 17<br>Function members ................................................................................................................................................................. 18</p>
<table id='16' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>4</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 5</div>
<h1 id='17' style='font-size:22px'>1. Data of the meshers</h1>
<p id='18' data-category='paragraph' style='font-size:18px'>All input and output data for a run is gathered into a structure of class<br>cm2::surfmesh_t3::mesher::data_type or cm2::surfmesh_q4::mesher::data_type:</p>
<p id='19' data-category='paragraph' style='font-size:14px'>void surfmesh_t3::mesher::run (surfmesh_t3::mesher::data_type& data);<br>void surfmesh_q4::mesher::run (surfmesh_q4::mesher::data_type& data);</p>
<p id='20' data-category='paragraph' style='font-size:18px'>The data_type class contains the following fields:</p>
<h1 id='21' style='font-size:20px'>Mesh sizes on vertices (user input)</h1>
<p id='22' data-category='paragraph' style='font-size:18px'>Vector vertex_H (IN) of the the mesh sizes (isotropic) at CAD vertices.</p>
<br><p id='23' data-category='paragraph' style='font-size:18px'>The value vertex_H[i] specifies the target mesh size near vertex with CAD id i.</p>
<br><p id='24' data-category='paragraph' style='font-size:18px'>Only strictly positive values are considered, with a minimum value of settings_type::min_h.<br>Vertices with CAD index greater than or equal to vertex_H.size() are assigned a default mesh size derived<br>from the lower precedence mesh sizes (curve_H, surface_H or settings_type::target_h).<br>vertex_H has the highest precedence over all user-defined mesh sizes. The precedence order is:</p>
<p id='25' data-category='list' style='font-size:18px'>• vertex_H (highest precedence)<br>• curve_H<br>• surface_H<br>• settings_type::target_h (lowest precedence)</p>
<p id='26' data-category='paragraph' style='font-size:18px'>☞ The vertex, curve and surface ids must follow the CAD indexing-scheme.<br>With OCCT, we use the CAD indexing scheme given by TopTools_IndexedMapOfShape.<br>Example:</p>
<br><p id='27' data-category='paragraph' style='font-size:16px'>TopTools_IndexedMapOfShape vertices;<br>TopExp::MapShapes(root, TopAbs_VERTEX, vertices);</p>
<p id='28' data-category='paragraph' style='font-size:16px'>unsigned i = vertices.FindIndex(some_vertex);</p>
<br><p id='29' data-category='paragraph' style='font-size:16px'>// Index all vertices of root<br>// consecutively starting from 1.<br>// `i` is the index we use to refer<br>// to `some_vertex`.</p>
<br><p id='30' data-category='paragraph' style='font-size:18px'>The index of an edge or face is also its color.</p>
<p id='31' data-category='paragraph' style='font-size:18px'>☞ As OCCT follows a one-base indexing scheme, vertex_H[0] is discarded.</p>
<p id='32' data-category='paragraph' style='font-size:18px'>☞ The mesher may use reduced mesh sizes in all directions (isotropic) or in selected directions (anisotropic) to<br>honor the settings_type::max_chordal_error criterion.</p>
<br><h1 id='33' style='font-size:20px'>Mesh sizes on curves (user input)</h1>
<br><p id='34' data-category='paragraph' style='font-size:18px'>Vector curve_H (IN) of the the mesh sizes (isotropic) on CAD curves.</p>
<br><p id='35' data-category='paragraph' style='font-size:18px'>The value curve_H[i] specifies the target mesh size on curve with CAD id i.</p>
<br><p id='36' data-category='paragraph' style='font-size:18px'>Only strictly positive values are considered, with a minimum value of settings_type::min_h.<br>Curves with CAD index greater than or equal to curve_H.size() are assigned a default mesh size derived<br>from the lower precedence mesh sizes (surface_H or settings_type::target_h).</p>
<p id='37' data-category='paragraph' style='font-size:18px'>☞ As OCCT follows a one-base indexing scheme, curve_H[0] is discarded.</p>
<table id='38' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>5</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 6</div>
<p id='39' data-category='paragraph' style='font-size:16px'>☞ The mesh size on a curve is also transferred to its (two) extremity vertices, unless valid mesh sizes are provided<br>for them in vertex_H.</p>
<p id='40' data-category='paragraph' style='font-size:16px'>☞ The mesher may use reduced mesh sizes in all directions (isotropic) or in selected directions (anisotropic) to<br>honor the settings_type::max_chordal_error criterion.</p>
<br><h1 id='41' style='font-size:20px'>Mesh sizes on surfaces (user input)</h1>
<br><p id='42' data-category='paragraph' style='font-size:16px'>Vector surface_H (IN) of the the mesh sizes (isotropic) on CAD surfaces.</p>
<br><p id='43' data-category='paragraph' style='font-size:16px'>The value surface_H[i] specifies the target mesh size on surface with CAD id i.</p>
<br><p id='44' data-category='paragraph' style='font-size:16px'>Only strictly positive values are considered, with a minimum value of settings_type::min_h.<br>Surfaces with CAD index greater than or equal to surface_H.size() are assigned the ultimate default mesh<br>size settings_type::target_h.</p>
<p id='45' data-category='paragraph' style='font-size:16px'>☞ As OCCT follows a one-base indexing scheme, surface_H[0] is discarded.</p>
<p id='46' data-category='paragraph' style='font-size:16px'>☞ The mesh size on a surface is also transferred to all its boundary curves and vertices, unless valid mesh sizes<br>are provided for them in curve_H and vertex_H.</p>
<p id='47' data-category='paragraph' style='font-size:16px'>☞ The mesher may use reduced mesh sizes in all directions (isotropic) or in selected directions (anisotropic) to<br>honor the settings_type::max_chordal_error criterion.</p>
<br><h1 id='48' style='font-size:20px'>Coordinates of the nodes</h1>
<br><p id='49' data-category='paragraph' style='font-size:16px'>Matrix pos of the the node coordinates with dimensions 3 x nods (OUT).</p>
<br><p id='50' data-category='paragraph' style='font-size:16px'>This matrix stores the coordinates of all nodes. The coordinates are stored column-wise. The column index is<br>the index of the node (zero-based, i.e. from 0 to N-1). The X-coordinates are in the first row, the Y-coordinates<br>in the second row and the Z-coordinates in the third row.</p>
<p id='51' data-category='paragraph' style='font-size:16px'>☞ As OCCT follows a one-base indexing scheme, there is a left one-shift in the indices.<br>The coordinates of CAD vertex with id i is at column i-1 in this pos matrix.</p>
<br><h1 id='52' style='font-size:20px'>Edges of curves</h1>
<br><p id='53' data-category='paragraph' style='font-size:16px'>Matrix connectE (OUT) of the connectivity of the edges along the curves of the model.</p>
<br><p id='54' data-category='paragraph' style='font-size:16px'>This matrix has 2 rows when settings_type::high_order_type = 0 (2-node edges), 3 rows otherwise (3-<br>node edges).</p>
<br><p id='55' data-category='paragraph' style='font-size:16px'>The values are node indices and refer to columns in the coordinate matrix pos.</p>
<h1 id='56' style='font-size:20px'>Elements</h1>
<p id='57' data-category='paragraph' style='font-size:16px'>Matrix connectM (OUT) of the connectivity of the elements.</p>
<br><p id='58' data-category='paragraph' style='font-size:16px'>For CM2 SurfMesh T3, the dimensions are 3 x nefs when settings_type::high_order_type = 0 (3-node<br>triangles) and 6 x nefs otherwise (6-node triangles).</p>
<p id='59' data-category='paragraph' style='font-size:16px'>For CM2 SurfMesh Q4, the dimensions are 4 x nefs when settings_type::high_order_type = 0 (4-node<br>quads and 3-node triangles), 8 x nefs when settings_type::high_order_type = 1 (8-node quads and 6-<br>node triangles) and 9 x nefs when settings_type::high_order_type = 2 (9-node quads and 6-node<br>triangles).<br>The leading part of this matrix (from col 0 to col nefs_Q - 1) is the connectivity of the quadrangle elements.</p>
<table id='60' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>6</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 7</div>
<p id='61' data-category='paragraph' style='font-size:16px'>The tailing part of this matrix (from col nefs_Q to col nefs - 1) is the connectivity of the triangles elements,<br>completed with CM2_NONE values (i.e. unsigned(-1)).</p>
<br><p id='62' data-category='paragraph' style='font-size:16px'>The values are node indices and refer to columns in the coordinate matrix pos.</p>
<br><h1 id='63' style='font-size:20px'>Colors of edges</h1>
<br><p id='64' data-category='paragraph' style='font-size:16px'>Vector colorsE (OUT) of the colors (same as curve ids) of the edges.</p>
<br><p id='65' data-category='paragraph' style='font-size:16px'>Each edge of connectE is assigned a color (from 1 to nbr_curves) corresponding to the CAD ids of its curve.<br>With OCCT, we use the CAD indexing scheme given by TopTools_IndexedMapOfShape.</p>
<br><h1 id='66' style='font-size:20px'>Colors of elements</h1>
<p id='67' data-category='paragraph' style='font-size:16px'>Vector colors (OUT) of the colors (same as surface ids) of the elements.</p>
<br><p id='68' data-category='paragraph' style='font-size:16px'>Each element of connectM is assigned a color (from 1 to nbr_surfaces) corresponding to the CAD ids of its<br>surface.<br>With OCCT, we use the CAD indexing scheme given by TopTools_IndexedMapOfShape.</p>
<h1 id='69' style='font-size:20px'>Merged vertices</h1>
<h1 id='70' style='font-size:16px'>Vector merged_vertices (OUT).</h1>
<br><p id='71' data-category='paragraph' style='font-size:16px'>The CAD ids of the merged vertices (eliminated due to settings_type::fix_tolerance) and their target<br>vertices.<br>merged_vertices[i] is the target vertex CAD id in which merged_vertices[i+1] is merged.<br>merged_vertices.size()/2 is the number of the merged (eliminated) vertices.</p>
<br><h1 id='72' style='font-size:20px'>Merged curves</h1>
<h1 id='73' style='font-size:16px'>Vector merged_curves (OUT).</h1>
<br><p id='74' data-category='paragraph' style='font-size:16px'>The CAD ids of the merged curves (eliminated due to settings_type::fix_tolerance) and of the target<br>curves.<br>merged_curves[i] is the target curve CAD id in which merged_curves[i+1] is merged.<br>merged_curves.size()/2 is the number of the merged (eliminated) curves.</p>
<br><h1 id='75' style='font-size:20px'>Failed surfaces</h1>
<p id='76' data-category='paragraph' style='font-size:16px'>Vector failed of the CAD ids of the failed surfaces, if any (OUT).</p>
<br><h1 id='77' style='font-size:20px'>Histogram</h1>
<p id='78' data-category='paragraph' style='font-size:16px'>Histogram histo_Qs of the shape qualities (OUT).</p>
<br><p id='79' data-category='paragraph' style='font-size:16px'>This histogram stores also the minimum, the maximum and the average values as data members.</p>
<h1 id='80' style='font-size:20px'>Errors and warnings</h1>
<p id='81' data-category='paragraph' style='font-size:16px'>Two enums, error_code and warning_code, give upon exit the error and warning codes (OUT).</p>
<br><p id='82' data-category='paragraph' style='font-size:16px'>A correct run gives CM2_NO_ERROR and CM2_NO_WARNING (zero values).<br>String msg1 holds explanation messages about the error/warning if any.<br>String msg2 is for debugging purpose and shouldn’t normally be used on production code.</p>
<table id='83' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual 7</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 8</div>
<p id='84' data-category='paragraph' style='font-size:18px'>See Section 2 for more detailed explanations of the error and warning codes.</p>
<br><h1 id='85' style='font-size:22px'>Complementary information</h1>
<p id='86' data-category='paragraph' style='font-size:18px'>The remaining fields of the data structure (OUT):</p>
<br><p id='87' data-category='list' style='font-size:18px'>• nbr_vertices: the number of vertices in the model, including the merged vertices.<br>• nbr_curves: the number of curves in the model, including the merged curves.<br>• nbr_surfaces: the number of surfaces in the model.<br>• nefs: the number of elements in the mesh (also equals to the number of columns in connectM upon exit).<br>nefs = nefs_Q + nefs_T.<br>• nefs_Q: the number of quadrangles in the mesh (zero with CM2 SurfMesh T3).<br>• nefs_T: the number of triangles in the mesh (normally zero with CM2 SurfMesh Q4 in all-quad mode).<br>• nods: the number of nodes in the mesh.<br>• area: the area of the final mesh. area = area_Q + area_T<br>• area_Q: the area of the quadrangles in the final mesh (zero with CM2 SurfMesh T3).<br>• area_T: the area of the triangles in the final mesh (normally zero with CM2 SurfMesh Q4 in all-quad mode).<br>• Qmin: the worst shape quality of the elements in the mesh (also stored in histo_Qs).<br>• error_code, warning_code: the error and warning codes (see Section 2).<br>• read_time, meshC_time, meshS_time, mesh_time: the times spent in the successive steps.<br>• total_time: the total time spent in the mesher (including read time).<br>• speed: the global meshing speed (number of generated elements per second) excluding the read time.</p>
<table id='88' style='font-size:20px'><thead></thead><tbody><tr><td>struct data_type <table><thead></thead><tbody><tr><td>{ DoubleVec</td><td>vertex_H;</td></tr><tr><td>DoubleVec</td><td>curve_H;</td></tr><tr><td>DoubleVec</td><td>surface_H;</td></tr><tr><td>DoubleMat</td><td>pos;</td></tr><tr><td>UIntMat</td><td>connectE;</td></tr><tr><td>UIntMat</td><td>connectM;</td></tr><tr><td>UIntVec</td><td>colorsE;</td></tr><tr><td>UIntVec</td><td>colors;</td></tr><tr><td>UIntVec</td><td>merged_vertices;</td></tr><tr><td>UIntVec</td><td>merged_curves;</td></tr><tr><td>UIntVec</td><td>failed;</td></tr><tr><td>unsigned</td><td>nbr_vertices;</td></tr><tr><td>unsigned</td><td>nbr_curves;</td></tr><tr><td>unsigned</td><td>nbr_surfaces;</td></tr><tr><td>unsigned</td><td>nefs;</td></tr><tr><td>unsigned</td><td>nefs_Q;</td></tr><tr><td>unsigned</td><td>nefs_T;</td></tr><tr><td>unsigned</td><td>nods;</td></tr><tr><td>double</td><td>area;</td></tr><tr><td>double</td><td>area_Q;</td></tr><tr><td>double</td><td>area_T;</td></tr><tr><td>double</td><td>Qmin;</td></tr><tr><td>misc::histogram</td><td>histo_Qs;</td></tr><tr><td>double</td><td>read_time;</td></tr><tr><td>double</td><td>meshC_time;</td></tr><tr><td>double</td><td>meshS_time;</td></tr><tr><td>double</td><td>mesh_time;</td></tr><tr><td>double</td><td>total_time;</td></tr><tr><td>double</td><td>speed;</td></tr><tr><td>error_type</td><td>error_code;</td></tr><tr><td>warning_type</td><td>warning_code;</td></tr><tr><td>char</td><td>msg1[256];</td></tr><tr><td>};</td><td></td></tr></tbody></table></td></tr></tbody></table>
<table id='89' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>8</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 9</div>
<header id='90' style='font-size:14px'>Table 1 – The data_type structures.</header>
<h1 id='91' style='font-size:20px'>Function members</h1>
<p id='92' data-category='paragraph' style='font-size:18px'>The data_type class is equipped with constructors, copy operator and some utility members:</p>
<p id='93' data-category='paragraph' style='font-size:14px'>// Constructors.<br>data_type();<br>data_type(const data_type& cpy);</p>
<br><p id='94' data-category='paragraph' style='font-size:14px'>// Copy operator.<br>const data_type& operator= (const data_type& data);<br>void shallow_copy (const data_type& data);</p>
<br><p id='95' data-category='paragraph' style='font-size:14px'>// Members.</p>
<br><p id='96' data-category='paragraph' style='font-size:14px'>void clear();<br>void extract (DoubleMat& P, UIntMat& connectM) const;<br>void extract (DoubleMat& P, UIntMat& connectQ, UIntMat& connectT) const;<br>void save (const char* filename, unsigned precision = 16) const;<br>void print_info (display_handler_type hdl) const;<br>bool error_raised() const;<br>bool warning_raised() const;</p>
<footer id='97' style='font-size:14px'>Table 2 – The data_type function members.</footer>
<table id='98' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>9</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 10</div>
<h1 id='99' style='font-size:22px'>2. Error and warning codes</h1>
<br><h1 id='100' style='font-size:20px'>Error codes</h1>
<p id='101' data-category='paragraph' style='font-size:18px'>The error code is a public field of the class data_type::error_code as an enum of type error_type:.</p>
<p id='102' data-category='paragraph' style='font-size:14px'>enum error_type</p>
<br><p id='103' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='104' data-category='paragraph' style='font-size:14px'>CM2_NO_ERROR,</p>
<br><p id='105' data-category='paragraph' style='font-size:14px'>CM2_LICENSE_ERROR,</p>
<br><p id='106' data-category='paragraph' style='font-size:14px'>CM2_SETTINGS_ERROR,</p>
<br><p id='107' data-category='paragraph' style='font-size:14px'>CM2_FILE_ERROR,</p>
<br><h1 id='108' style='font-size:14px'>CM2_DEGENERATED_ELEMENT,</h1>
<br><p id='109' data-category='paragraph' style='font-size:14px'>CM2_SYSTEM_MEMORY_ERROR,</p>
<br><p id='110' data-category='paragraph' style='font-size:14px'>CM2_INTERNAL_ERROR</p>
<br><p id='111' data-category='paragraph' style='font-size:14px'>};</p>
<br><p id='112' data-category='paragraph' style='font-size:14px'>// 0</p>
<br><p id='113' data-category='paragraph' style='font-size:14px'>// -100</p>
<br><p id='114' data-category='paragraph' style='font-size:14px'>// -101</p>
<br><p id='115' data-category='paragraph' style='font-size:14px'>// -102</p>
<br><p id='116' data-category='paragraph' style='font-size:14px'>// -103</p>
<br><p id='117' data-category='paragraph' style='font-size:14px'>// -199</p>
<br><p id='118' data-category='paragraph' style='font-size:14px'>// -200</p>
<p id='119' data-category='paragraph' style='font-size:14px'>Table 3 – Error codes enum.</p>
<table id='120' style='font-size:18px'><thead></thead><tbody><tr><td>CM2_NO_ERROR</td><td>OK, no problem.</td></tr><tr><td>CM2_LICENSE_ERROR</td><td>The registration must occur before any run of the mesher. Check also your license. You may have to renew it. If so, please, contact <license@computing-objects.com>.</td></tr><tr><td>CM2_SETTINGS_ERROR</td><td>At least one setting is not valid (see Section 3). Check the positivity/range of scalar values such as target_h, max_gradation...</td></tr><tr><td>CM2_FILE_ERROR</td><td>The input file couldn’t be opened/read. Check filename, format…</td></tr><tr><td>CM�_DEGENERATED_ELEMENT</td><td>At least one of the final elements is invalid (null area). Or the all-quad condition couldn’t be honored (remaining triangles with CM2 SurfMesh Q4). Contact support.</td></tr><tr><td>CM�_SYSTEM_MEMORY_ERROR</td><td>Insufficient memory available. Mesh is too big to be generated.</td></tr><tr><td>CM�_INTERNAL_ERROR</td><td>Unexpected error. Save the data by calling data_type::save and send the file zipped to <support@computing-objects.com>.</td></tr></tbody></table>
<br><p id='121' data-category='paragraph' style='font-size:14px'>Table 4 – Error codes.</p>
<p id='122' data-category='paragraph' style='font-size:18px'>☞ For error codes CM2_DEGENERATED_ELEMENT and CM2_INTERNAL_ERROR, please save the data with a call to<br>data_type::save, zip the file and send to <support@computing-objects.com>.</p>
<table id='123' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual 10</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 11</div>
<header id='124' style='font-size:18px'>Example</header>
<p id='125' data-category='paragraph' style='font-size:14px'>if (data.error_raised())<br>{<br>// Error, do something according to data.error_code (forward message to a window...)<br>}</p>
<h1 id='126' style='font-size:22px'>Warning codes</h1>
<p id='127' data-category='paragraph' style='font-size:16px'>The warning code is a public field of the class data_type::warning_code as an enum of type<br>warning_type:.</p>
<p id='128' data-category='paragraph' style='font-size:14px'>enum warning_type</p>
<br><p id='129' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='130' data-category='paragraph' style='font-size:14px'>CM2_NO_WARNING,</p>
<br><p id='131' data-category='paragraph' style='font-size:14px'>CM2_INTERRUPTION,</p>
<br><p id='132' data-category='paragraph' style='font-size:14px'>// 0</p>
<br><h1 id='133' style='font-size:14px'>CM2_FAILED_SURFACES_WARNING,</h1>
<br><p id='134' data-category='paragraph' style='font-size:14px'>// -10</p>
<br><h1 id='135' style='font-size:14px'>CM2_SHAPE_QUALITY_WARNING</h1>
<br><p id='136' data-category='paragraph' style='font-size:14px'>// -11</p>
<br><p id='137' data-category='paragraph' style='font-size:14px'>};</p>
<br><p id='138' data-category='paragraph' style='font-size:14px'>// -12</p>
<p id='139' data-category='paragraph' style='font-size:14px'>Table 5 – Warning codes enum.</p>
<table id='140' style='font-size:16px'><thead></thead><tbody><tr><td>CM�_NO_WARNING</td><td>OK, no problem.</td></tr><tr><td>CM�_INTERRUPTION</td><td>The user has aborted the run (through the interrupt handler). The final mesh may be empty or with missing parts.</td></tr><tr><td>CM�_FAILED_SURFACES_WARNING</td><td>At least one surface couldn’t be meshed. Check the model.</td></tr><tr><td>CM�_SHAPE_QUALITY_WARNING</td><td>The final mesh is valid but at least one of the elements is very bad (shape quality < 0.01). Check the model.</td></tr></tbody></table>
<br><p id='141' data-category='paragraph' style='font-size:14px'>Table 6 – Warning codes.</p>
<p id='142' data-category='paragraph' style='font-size:20px'>Example</p>
<p id='143' data-category='paragraph' style='font-size:14px'>if (data.warning_raised())</p>
<br><p id='144' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='145' data-category='paragraph' style='font-size:14px'>// Warning, do something according to data.warning_code<br>// e.g. mesh again with lower chordal error...</p>
<br><p id='146' data-category='paragraph' style='font-size:14px'>}</p>
<table id='147' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual 11</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 12</div>
<h1 id='148' style='font-size:22px'>3. Settings of the meshers</h1>
<br><p id='149' data-category='paragraph' style='font-size:18px'>CM2 SurfMesh T3/Q4 can be controlled by several settings that can change drastically the output meshes. They<br>are gathered into a structure of class cm2::surfmesh_t3::mesher::settings_type or<br>cm2::surfmesh_q4::mesher::settings_type as a public field of the meshers:</p>
<figure id='150'><img style='font-size:14px' alt="cm2::surfmesh_t3::mesher::settings_type settings;
cm2::surfmesh_q4::mesher::settings_type settings;" data-coord="top-left:(103,286); bottom-right:(1138,386)" /></figure>
<h1 id='151' style='font-size:20px'>Default target mesh size</h1>
<p id='152' data-category='paragraph' style='font-size:18px'>target_h. Positive value. Default = 0. Should be reset by user.</p>
<br><p id='153' data-category='paragraph' style='font-size:18px'>This is the target size for the elements when not constrained by the user-defined vertex_H, curve_H,<br>surface_H or by dimensions of the surfaces, their curvatures or the curvatures of their boundary curves.</p>
<p id='154' data-category='paragraph' style='font-size:18px'>☞ The default value (zero) is replaced with an arbitrary strictly positive value (at present computed as 1/20 of the<br>maximum dimension of the model) and fix_tolerance is considered as zero (merges only exactly coincident<br>vertices and curves).</p>
<h1 id='155' style='font-size:20px'>Minimum size</h1>
<p id='156' data-category='paragraph' style='font-size:18px'>The minimum mesh size (security). Default = -1E-3 (i.e. 0.1% of taget_h).</p>
<br><p id='157' data-category='paragraph' style='font-size:18px'>The mesh size will not be reduced (by max_chordal_error or max_chordal_error_ratio below) beyond<br>this limit:</p>
<br><p id='158' data-category='list' style='font-size:18px'>• If negative, this value is relative to target_h (min size = - min_h * target_h).<br>• If positive, this value is absolute (min size = target_h).</p>
<br><h1 id='159' style='font-size:20px'>Fixing tolerance</h1>
<p id='160' data-category='paragraph' style='font-size:18px'>fix_tolerance. Default = -1E-4 (i.e. 0.01% of taget_h).</p>
<br><p id='161' data-category='paragraph' style='font-size:18px'>CAD entities are merged when their maximum distance is below or equal to the merge tolerance:</p>
<br><p id='162' data-category='list' style='font-size:18px'>• If negative, this value is relative to target_h (merge tolerance = - fix_tolerance * target_h).<br>• If positive, this value is absolute (merge tolerance = fix_tolerance).</p>
<br><p id='163' data-category='paragraph' style='font-size:18px'>Vertices within the merge tolerance are merged. Curves approximately within the merge tolerance are merged.</p>
<br><p id='164' data-category='paragraph' style='font-size:18px'>Set to +-DBL_MAX to completely disable the merging.</p>
<h1 id='165' style='font-size:20px'>Max chordal error</h1>
<p id='166' data-category='paragraph' style='font-size:18px'>max_chordal_error. Default = -0.02 (i.e. 2% of local radius).</p>
<br><p id='167' data-category='paragraph' style='font-size:18px'>The maximum chordal error allowed between exact curves/surfaces and linear elements.</p>
<br><p id='168' data-category='paragraph' style='font-size:18px'>The mesh size will be reduced locally to limit the chordal error between the mesh and the curves or the<br>surfaces:</p>
<br><p id='169' data-category='list' style='font-size:18px'>• If negative, this value is relative to the local radii (for instance -0.02 => max chordal error = 2% of local radii).<br>• If positive, this value is absolute (for instance 0.1 => max chordal error = 0.1).</p>
<table id='170' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>12</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 13</div>
<p id='171' data-category='paragraph' style='font-size:16px'>A complete circle is meshed with approximately:</p>
<br><p id='172' data-category='list' style='font-size:16px'>• 10 linear elements for max_chordal_error = -0.05 (5% of radius).<br>• 13 linear elements for max_chordal_error = -0.03 (3% of radius).<br>• 16 linear elements for max_chordal_error = -0.02 (2% of radius).<br>• 22 linear elements for max_chordal_error = -0.01 (1% of radius).</p>
<p id='173' data-category='paragraph' style='font-size:16px'>☞ The considered chordal error is between the curves/surfaces and the linear elements.</p>
<br><p id='174' data-category='paragraph' style='font-size:16px'>With linear elements of size h along a curve of radius R, the chordal error is approximately given by</p>
<br><p id='175' data-category='equation'>$$\delta={\frac{h^{2}}{8R}}$$</p>
<p id='176' data-category='paragraph' style='font-size:16px'>The chordal error is divided by 4 when the size h is divided by 2</p>
<br><p id='177' data-category='paragraph' style='font-size:16px'>In case of quadratic elements (high_order_type >= 1 and high_order_mode >= 1), the chordal error (or<br>rather the maximum distance between the quadratic element and the curve) is well below:</p>
<br><p id='178' data-category='equation'>$$\delta={\frac{h^{4}}{512\,R^{3}}}$$</p>
<p id='179' data-category='paragraph' style='font-size:16px'>The chordal error is divided by 16 when the size h is divided by 2.</p>
<h1 id='180' style='font-size:20px'>Max ratio between chordal errors</h1>
<p id='181' data-category='paragraph' style='font-size:16px'>max_chordal_error_ratio. Default = 0.1</p>
<br><p id='182' data-category='paragraph' style='font-size:16px'>The size of the mesh along the smallest curvature direction (largest radius) is reduced (but not below<br>settings_type::min_h) so that the chordal error remains below max_chordal_error_ratio * size of<br>the mesh along highest curvature (smallest radius).</p>
<br><p id='183' data-category='paragraph' style='font-size:16px'>This parameter limits the anisotropy of the elements.<br>It is used only with anisotropic control (chordal_control_type = 2 or 4) and when the surface has double<br>curvature.</p>
<h1 id='184' style='font-size:20px'>Chordal control type</h1>
<p id='185' data-category='paragraph' style='font-size:16px'>The type of chordal control. Default = 4 (anisotropic control with exact curvatures).</p>
<br><p id='186' data-category='paragraph' style='font-size:16px'>Possible values are:</p>
<br><p id='187' data-category='list' style='font-size:16px'>• 0: No curvature is computed and the chordal error control is disabled.<br>• 1: Isotropic chordal control based on approximate curvatures (least-square method using the local bases).<br>Element sizes are limited by the same (isotropic) chordal value.<br>• 2: Anisotropic chordal control based on approximate curvatures (least-square method using the local<br>bases). Element sizes are limited by two different (anisotropic) chordal values along the two principal<br>curvature directions.<br>• 3: Isotropic chordal control based on exact curvatures. Element sizes are limited by the same (isotropic)<br>chordal value.<br>• 4+: Anisotropic chordal control based on exact curvature.<br>Element sizes are limited by two different (anisotropic) chordal values along the two principal curvature<br>directions.</p>
<h1 id='188' style='font-size:20px'>Maximum gradation of sizes</h1>
<p id='189' data-category='paragraph' style='font-size:16px'>The maximum gradation of the elements size. Default = 0.5</p>
<table id='190' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>13</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 14</div>
<p id='191' data-category='paragraph' style='font-size:16px'>This parameter controls the gradation of the elements size along the curves and inside the surfaces towards<br>the target_h mesh size.</p>
<br><p id='192' data-category='paragraph' style='font-size:16px'>A value close to 0 leads to a more progressive variation of mesh size (smoother).</p>
<br><h1 id='193' style='font-size:20px'>Flag for all-quad or quad-dominant mode (CM2 SurfMesh Q4)</h1>
<br><p id='194' data-category='paragraph' style='font-size:16px'>all_quad_flag. Default = false.</p>
<br><p id='195' data-category='paragraph' style='font-size:16px'>Flag to force the generation of an all-quad mesh (no triangle):</p>
<br><p id='196' data-category='list' style='font-size:16px'>• false: generates a mixed triangle-quad mesh (the default).<br>• true: generate an all-quad mesh.</p>
<br><p id='197' data-category='paragraph' style='font-size:16px'>A good all-quad mesh can only be generated in simple cases. If possible, rather use the mixed quad-dominant<br>generation mode.</p>
<br><p id='198' data-category='paragraph' style='font-size:16px'>Setting all_quad_flag to true, disables parameters min_Q4_angle_quality, min_Q4_warp_quality<br>(i.e. same as min_Q4_angle_quality = min_Q4_warp_quality = 0), force_even_flag (same as true)<br>and quadrangle_weight.</p>
<br><h1 id='199' style='font-size:20px'>Parity along the curves</h1>
<p id='200' data-category='paragraph' style='font-size:16px'>force_even_flag. Default = false.</p>
<br><p id='201' data-category='paragraph' style='font-size:16px'>Flag to force the number of edges along each curve to be even.</p>
<br><p id='202' data-category='paragraph' style='font-size:16px'>This flag is considered as true with CM2 SurfMesh Q4 when all_quad_flag is set to true.</p>
<br><h1 id='203' style='font-size:20px'>Optimization level</h1>
<p id='204' data-category='paragraph' style='font-size:16px'>optim_level. Integer between 0 and 10. Default = 3.</p>
<br><p id='205' data-category='paragraph' style='font-size:16px'>Controls the trade-off between speed (low values) and elements quality (high values). The higher the level, the<br>more aggressive the algorithms.</p>
<br><p id='206' data-category='paragraph' style='font-size:16px'>Level 0 disables any optimization.</p>
<p id='207' data-category='paragraph' style='font-size:18px'>☞ Optimizations are only intra-surface (no optimization across curves).</p>
<br><h1 id='208' style='font-size:20px'>Weight on quadrangles (CM2 SurfMesh Q4)</h1>
<p id='209' data-category='paragraph' style='font-size:16px'>quadrangle_weight. Value between 0 and 1. Default = 0.70</p>
<br><h1 id='210' style='font-size:16px'>Preference for quadrangles vs. triangles.</h1>
<p id='211' data-category='paragraph' style='font-size:16px'>Weight between 0 and 1 indicating the preference for quadrangles over triangles.<br>With quadrangle_weight = 0, quadrangles are never used. With quadrangle_weight = 0.5, quadrangles<br>are used only when they improve the quality of the mesh. For values between 0.5 and 1, quadrangles are more<br>and more used even if this lead to a lesser quality of the mesh. With quadrangle_weight = 1, the minimum<br>number of triangles are used (but may not be null).</p>
<br><p id='212' data-category='paragraph' style='font-size:16px'>This parameter is used only when all_quad_flag = false.</p>
<p id='213' data-category='paragraph' style='font-size:16px'>☞ This parameter is not the ratio between quads and triangles. And there is no linearity between this weight and<br>the ratio between quads and triangles.</p>
<table id='214' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>14</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 15</div>
<h1 id='215' style='font-size:20px'>Minimum acceptable quadrangle quality (CM2 SurfMesh Q4)</h1>
<br><p id='216' data-category='paragraph' style='font-size:16px'>min_Q4_angle_quality. Value between 0 and 1. Default = 0.20.</p>
<br><p id='217' data-category='paragraph' style='font-size:16px'>Minimum acceptable angle quality for the quadrangles. This threshold is based on the angle quality of the<br>quads (not the geometric quality which takes the length ratios also into account). The angle quality is computed<br>as the minimum of the four angles at summits.</p>
<br><p id='218' data-category='paragraph' style='font-size:16px'>With the default value (0.20), acceptable quads have angle between 0.20 * 90 = 18 deg and 180 - 0.20 * 90 =<br>162 deg. Others are split into triangles.</p>
<br><p id='219' data-category='paragraph' style='font-size:16px'>Set min_Q4_angle_quality = 1 - � to allow rectangles only (quads with right angles only). In this case, be<br>aware that when curves are not straight very few rectangles may be generated.</p>
<br><p id='220' data-category='paragraph' style='font-size:16px'>This parameter is used only when all_quad_flag = false.</p>
<br><h1 id='221' style='font-size:20px'>Minimum acceptable warp quality (CM2 SurfMesh Q4)</h1>
<p id='222' data-category='paragraph' style='font-size:16px'>min_Q4_warp_quality. Value between 0 and 1. Default = 0.50 (i.e. maximum warpage of 90°).</p>
<br><p id='223' data-category='paragraph' style='font-size:16px'>Minimum acceptable warp quality for the quadrangles. Quads with warp quality below this threshold are split<br>into two triangles.</p>
<br><p id='224' data-category='paragraph' style='font-size:16px'>If � is the maximum angle between the normals of two opposite split triangles. The warp quality of a<br>quadrangle is defined as 1 - �/π.<br>The warp quality of a flat quad equals to 1 (perfect) whereas its geometric quality equals to 1 only when the<br>quad is a square.</p>
<p id='225' data-category='paragraph' style='font-size:16px'>With the default value (0.50), acceptable quads have warpage below 90°. Others are split into triangles.</p>
<br><p id='226' data-category='paragraph' style='font-size:16px'>Set min_Q4_warp_quality = 1 - � to allow for flat quads only. In this case, be aware that very few rectangles<br>may be generated on non flat surfaces (mostly triangles).</p>
<br><p id='227' data-category='paragraph' style='font-size:16px'>This parameter is used only when all_quad_flag = false.</p>
<br><h1 id='228' style='font-size:20px'>High-order type</h1>
<br><p id='229' data-category='paragraph' style='font-size:16px'>high_order_type. Integer ≥ 0. Default = 0 (i.e. linear elements T3 and Q4).</p>
<br><p id='230' data-category='paragraph' style='font-size:16px'>To convert into high-order elements. Possible value are:</p>
<br><p id='231' data-category='list' style='font-size:16px'>• 0: Keep linear elements (CM2_FACET3).<br>• 1+: Convert to quadratic elements (CM2_FACET6).</p>
<br><p id='232' data-category='paragraph' style='font-size:16px'>High-order nodes are located onto the curves and surfaces (i.e. elements are curved) when<br>settings_type::high_order_mode > 0.</p>
<br><h1 id='233' style='font-size:20px'>High-order mode</h1>
<p id='234' data-category='paragraph' style='font-size:16px'>high_order_mode. Default = 2 (high-order nodes on curves/surfaces at middle between linear nodes).</p>
<br><p id='235' data-category='paragraph' style='font-size:16px'>The method for positioning of the high-order nodes (HON). Possible values are:</p>
<p id='236' data-category='paragraph' style='font-size:16px'>• 0: The HON are interpolated between the linear 3D nodes. Elements remain straight. This method is the<br>fastest.<br>• 1: The HON are on the curves/surfaces and have reference coordinates in the middle between the linear<br>nodes but may not be equidistant between the linear 3D nodes. Elements are curved. The speed of this<br>method is between methods 0 and 2.</p>
<table id='237' style='font-size:14px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>15</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 16</div>
<p id='238' data-category='paragraph' style='font-size:18px'>• 2+: The HON are on the curves/surfaces and equidistant between the linear 3D nodes but may not have<br>reference values in the middle between the linear nodes. Elements are curved. This method is the slowest.</p>
<br><p id='239' data-category='paragraph' style='font-size:18px'>Relevant only when high_order_type > 0.</p>
<br><h1 id='240' style='font-size:22px'>Number of threads for parallel processing</h1>
<br><p id='241' data-category='paragraph' style='font-size:18px'>num_threads. Integer ≥ 0. Default = 0 (= the number of logical processors on the running CPU).</p>
<br><p id='242' data-category='paragraph' style='font-size:18px'>If num_threads = 1 the mesh generator runs on a single thread. Value is capped by the number of logical<br>processors on the running CPU.</p>
<h1 id='243' style='font-size:22px'>Display handler</h1>
<p id='244' data-category='paragraph' style='font-size:18px'>display_hdl. Default = NULL.</p>
<br><p id='245' data-category='paragraph' style='font-size:18px'>The user-supplied function to handle the messages issued by the mesher.</p>
<p id='246' data-category='paragraph' style='font-size:14px'>typedef void (*display_handler_type) (void* pass_thru, unsigned level, const char* msg);</p>
<p id='247' data-category='paragraph' style='font-size:18px'>The pass_thru parameter is the pointer set by the user in settings_type::pass_thru (see below).<br>The level parameter gives the importance of the message:</p>
<br><p id='248' data-category='list' style='font-size:18px'>• 0: Important (for instance entering a major step of the process)<br>• 1: Somewhat important (minor step of the process)<br>• 2+: Not serious (debug messages that should not be printed for end-users).</p>
<br><p id='249' data-category='paragraph' style='font-size:18px'>The msg parameter is the string message (length ≤ 255 characters).</p>
<p id='250' data-category='paragraph' style='font-size:18px'>☞ This handler is not called in case of error or warning. At the end of the run, user must check for an error or a<br>warning in the fields data_type::error_code and data_type::warning_code and then (in case of error<br>or warning) process the string data_type::msg1.</p>
<p id='251' data-category='paragraph' style='font-size:20px'>Example</p>
<p id='252' data-category='paragraph' style='font-size:14px'>void my_display_handler (void* pass_thru, unsigned level, const char* msg)</p>
<br><p id='253' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='254' data-category='paragraph' style='font-size:14px'>window_type* my_window = static_cast<window_type*>(pass_thru);<br>my_window->show(msg);</p>
<br><p id='255' data-category='paragraph' style='font-size:14px'>}</p>
<br><p id='256' data-category='paragraph' style='font-size:14px'>c m2::surfmesh_t3::mesher my_mesher;<br>cm2::surfmesh_t3::mesher::data_type my_data(pos, connectB);<br>window_type my_window; // A “window” instance.</p>
<br><p id='257' data-category='paragraph' style='font-size:14px'>my_window.init(...); // Initialize the window somehow.<br>my_mesher.settings.display_hdl = &my_display_handler;<br>my_mesher.settings.pass_thru = static_cast<void*>(&my_window);<br>my_mesher.run(my_data); // Will call my_display_handler with “my_window”<br>// in pass_thru parameter.</p>
<h1 id='258' style='font-size:22px'>Interrupt handler</h1>
<p id='259' data-category='paragraph' style='font-size:18px'>interrupt_hdl. Default = NULL.</p>
<table id='260' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>16</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 17</div>
<p id='261' data-category='paragraph' style='font-size:18px'>The user-provided interruption function. When this function returns true, the tool aborts.</p>
<p id='262' data-category='paragraph' style='font-size:14px'>typedef bool (*interrupt_handler_type) (void* pass_thru, double progress);</p>
<p id='263' data-category='paragraph' style='font-size:18px'>An interruption also raises the CM2_INTERRUPTION warning.</p>
<br><p id='264' data-category='paragraph' style='font-size:18px'>The pass_thru parameter is the void* pointer set by the user in settings_type::pass_thru (the same<br>parameter is also passed to the display handler).<br>The parameter progress (between 0 and 1) gives a hint about the progress of the meshing process.</p>
<p id='265' data-category='paragraph' style='font-size:20px'>Example (time-out)</p>
<p id='266' data-category='paragraph' style='font-size:14px'>bool my_interrupt_handler (void* pass_thru, double progress)</p>
<br><p id='267' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='268' data-category='paragraph' style='font-size:14px'>clock_t* t_timeout = static_cast<clock_t*>(pass_thru);<br>return clock() > (*t_timeout);</p>
<br><p id='269' data-category='paragraph' style='font-size:14px'>}</p>
<br><p id='270' data-category='paragraph' style='font-size:14px'>cm2::surfmesh_t3::mesher my_mesher;<br>cm2::surfmesh_t3::mesher::data_type my_data(pos, connectB);<br>clock_t my_t_timeout(::clock() + 1E3 * CLOCKS_PER_SEC);</p>
<br><p id='271' data-category='paragraph' style='font-size:14px'>my_mesher.settings.interrupt_hdl = &my_interrupt_handler;<br>my_mesher.settings.pass_thru = static_cast<void*>(&my_t_timeout);<br>my_mesher.run(my_data); // Will stop if duration > 1000 s.</p>
<h1 id='272' style='font-size:20px'>Example (progress bar)</h1>
<p id='273' data-category='paragraph' style='font-size:14px'>bool my_interrupt_handler (void* pass_thru, double progress)</p>
<br><p id='274' data-category='paragraph' style='font-size:14px'>{</p>
<br><p id='275' data-category='paragraph' style='font-size:14px'>window_type* my_window = static_cast<window_type*>(pass_thru);<br>std::string msg(“Progress: “);</p>
<br><p id='276' data-category='paragraph' style='font-size:14px'>msg += std::to_string(static_cast<int>(100.*progress)) + “ %”;<br>my_window->show(msg);<br>return false;</p>
<br><p id='277' data-category='paragraph' style='font-size:14px'>}</p>
<br><p id='278' data-category='paragraph' style='font-size:14px'>cm2::surfmesh_t3::mesher my_mesher;<br>cm2::surfmesh_t3::mesher::data_type my_data(pos, connectB);<br>window_type my_window; // A window instance.</p>
<br><p id='279' data-category='paragraph' style='font-size:14px'>my_window.init(...); // Initialize the window somehow.<br>my_mesher.settings.interrupt_hdl = &my_interrupt_handler;<br>my_mesher.settings.pass_thru = static_cast<void*>(&my_window);<br>my_mesher.run(my_data); // Will call my_interrupt_handler with “my_window”<br>// in pass_thru parameter.</p>
<h1 id='280' style='font-size:22px'>Pass-through pointer</h1>
<h1 id='281' style='font-size:18px'>pass_thru. Default = NULL.</h1>
<br><p id='282' data-category='paragraph' style='font-size:18px'>Void pointer (to be cast) to pass some user structure/class to the display handler and to the interruption<br>handler.</p>
<table id='283' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>17</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 18</div>
<table id='284' style='font-size:18px'><thead></thead><tbody><tr><td>struct settings_type { };</td><td><table><thead></thead><tbody><tr><td>double</td><td>target_h;</td></tr><tr><td>double</td><td>min_h;</td></tr><tr><td>double</td><td>fix_tolerance;</td></tr><tr><td>double</td><td>max_chordal_error;</td></tr><tr><td>double</td><td>max_chordal_error_ratio;</td></tr><tr><td>unsigned</td><td>chordal_control_type;</td></tr><tr><td>double</td><td>max_gradation;</td></tr><tr><td>bool</td><td>force_even_flag;</td></tr><tr><td>unsigned</td><td>optim_level;</td></tr><tr><td>unsigned</td><td>high_order_type;</td></tr><tr><td>unsigned</td><td>high_order_mode;</td></tr><tr><td>unsigned</td><td>num_threads;</td></tr><tr><td>display_handler_type</td><td>display_hdl;</td></tr><tr><td>interrupt_handler_type</td><td>interrupt_hdl;</td></tr><tr><td>void*</td><td>pass_thru;</td></tr></tbody></table></td></tr></tbody></table>
<caption id='285' style='font-size:14px'>Table 7 – The settings_type structure (CM2 SurfMesh T3).</caption>
<table id='286' style='font-size:20px'><thead></thead><tbody><tr><td>struct settings_type</td><td></td></tr><tr><td><table><thead></thead><tbody><tr><td>{ double</td><td>target_h;</td></tr><tr><td>double</td><td>min_h;</td></tr><tr><td>double</td><td>fix_tolerance;</td></tr><tr><td>double</td><td>max_chordal_error;</td></tr><tr><td>double</td><td>max_chordal_error_ratio;</td></tr><tr><td>unsigned</td><td>chordal_control_type;</td></tr><tr><td>double</td><td>max_gradation;</td></tr><tr><td>bool</td><td>all_quad_flag;</td></tr><tr><td>bool</td><td>force_even_flag;</td></tr><tr><td>unsigned</td><td>optim_level;</td></tr><tr><td>unsigned</td><td>high_order_type;</td></tr><tr><td>unsigned</td><td>high_order_mode;</td></tr><tr><td>double</td><td>quadrangle_weight;</td></tr><tr><td>double</td><td>min_Q4_angle_quality;</td></tr><tr><td>Double</td><td>min_Q4_warp_quality;</td></tr><tr><td>unsigned</td><td>num_threads;</td></tr><tr><td>display_handler_type</td><td>display_hdl;</td></tr><tr><td>interrupt_handler_type</td><td>interrupt_hdl;</td></tr><tr><td>void*</td><td>pass_thru;</td></tr></tbody></table> };</td><td></td></tr></tbody></table>
<br><p id='287' data-category='paragraph' style='font-size:14px'>Table 8 – The settings_type structure (CM2 SurfMesh Q4).</p>
<p id='288' data-category='paragraph' style='font-size:20px'>Most useful fields are target_h, min_h, fix_tolerance, max_chordal_error (and all_quad_flag for<br>CM2 SurfMesh Q4) and possibly the handlers.</p>
<h1 id='289' style='font-size:22px'>Function members</h1>
<p id='290' data-category='paragraph' style='font-size:20px'>The settings_type class is equipped with default constructor and some utility members:</p>
<p id='291' data-category='paragraph' style='font-size:14px'>// Constructor.<br>settings_type();</p>
<br><p id='292' data-category='paragraph' style='font-size:14px'>// Members.<br>bool valid() const;<br>int check() const;<br>void reset();<br>void save (const char* filename) const;<br>int load (const char* filename);</p>
<caption id='293' style='font-size:14px'>Table 9 – The settings_type function members.</caption>
<table id='294' style='font-size:16px'><thead></thead><tbody><tr><td>© Computing Objects /version 5.6 /rev February 2025</td><td>CM2 SurfMesh® T3/Q4 - reference manual</td><td>18</td></tr></tbody></table>
</div>
<div class="page">
<div class="page-header">Page 19</div>
<p id='295' data-category='paragraph' style='font-size:14px'>https://www.computing-objects.com</p>
<br><p id='296' data-category='paragraph' style='font-size:14px'>© Computing Objects SARL - 25 rue du Maréchal Foch, 78000 Versailles, France.</p>
<br><p id='297' data-category='paragraph' style='font-size:14px'>Limited Liability Company with a capital of 100 000 €.<br>Registered at Versailles RCS under SIRET number 422 791 038 00033.<br>EU VAT registration FR59422791038.</p>
</div>

</body>
</html>
